var bluegenesProteinVisualizer=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";e.exports=n(7)},function(e,t,n){var r,i,a;i=[],void 0===(a="function"==typeof(r=function(){var e,t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v,_,g,y,b,w,T,S,x,C,E,A,R,k,P,M,F,D,I,N,O,V,L,z,U,B;return e=function(){var e={};if(!t)var t=1e-6;if(!n)var n="undefined"!=typeof Float32Array?Float32Array:Array;if(!r)var r=Math.random;var i={setMatrixArrayType:function(e){n=e}};e.glMatrix=i;var a,o={create:function(){var e=new n(3);return e[0]=0,e[1]=0,e[2]=0,e},clone:function(e){var t=new n(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},fromValues:function(e,t,r){var i=new n(3);return i[0]=e,i[1]=t,i[2]=r,i},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},subtract:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}};o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},o.div=o.divide,o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return e[0]=i*l-a*s,e[1]=a*o-r*l,e[2]=r*s-i*o,e},o.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e},o.random=function(e,t){t=t||1;var n=2*r()*Math.PI,i=2*r()-1,a=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=i*t,e},o.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12],e[1]=n[1]*r+n[5]*i+n[9]*a+n[13],e[2]=n[2]*r+n[6]*i+n[10]*a+n[14],e},o.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e},o.transformQuat=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*a-l*i,h=u*i+l*r-o*a,f=u*a+o*i-s*r,d=-o*r-s*i-l*a;return e[0]=c*u+d*-o+h*-l-f*-s,e[1]=h*u+d*-s+f*-o-c*-l,e[2]=f*u+d*-l+c*-s-h*-o,e},o.forEach=(a=o.create(),function(e,t,n,r,i,o){var s,l;for(t||(t=3),n||(n=0),l=r?Math.min(r*t+n,e.length):e.length,s=n;s<l;s+=t)a[0]=e[s],a[1]=e[s+1],a[2]=e[s+2],i(a,a,o),e[s]=a[0],e[s+1]=a[1],e[s+2]=a[2];return e}),o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},e.vec3=o;var s={create:function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},clone:function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},fromValues:function(e,t,r,i){var a=new n(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},set:function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},subtract:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}};s.sub=s.subtract,s.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},s.mul=s.multiply,s.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},s.div=s.divide,s.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},s.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},s.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},s.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},s.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)},s.dist=s.distance,s.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a},s.sqrDist=s.squaredDistance,s.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},s.len=s.length,s.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},s.sqrLen=s.squaredLength,s.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},s.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o),e},s.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},s.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e},s.random=function(e,t){return t=t||1,e[0]=r(),e[1]=r(),e[2]=r(),e[3]=r(),s.normalize(e,e),s.scale(e,e,t),e},s.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e},s.transformQuat=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*a-l*i,h=u*i+l*r-o*a,f=u*a+o*i-s*r,d=-o*r-s*i-l*a;return e[0]=c*u+d*-o+h*-l-f*-s,e[1]=h*u+d*-s+f*-o-c*-l,e[2]=f*u+d*-l+c*-s-h*-o,e},s.forEach=function(){var e=s.create();return function(t,n,r,i,a,o){var s,l;for(n||(n=4),r||(r=0),l=i?Math.min(i*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),s.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.vec4=s;var l={create:function(){var e=new n(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},clone:function(e){var t=new n(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=c*o-s*u,f=-c*a+s*l,d=u*a-o*l,p=n*h+r*f+i*d;return p?(p=1/p,e[0]=h*p,e[1]=(-c*r+i*u)*p,e[2]=(s*r-i*o)*p,e[3]=f*p,e[4]=(c*n-i*l)*p,e[5]=(-s*n+i*a)*p,e[6]=d*p,e[7]=(-u*n+r*l)*p,e[8]=(o*n-r*a)*p,e):null},adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-s*u,e[1]=i*u-r*c,e[2]=r*s-i*o,e[3]=s*l-a*c,e[4]=n*c-i*l,e[5]=i*a-n*s,e[6]=a*u-o*l,e[7]=r*l-n*u,e[8]=n*o-r*a,e},determinant:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*(u*a-o*l)+n*(-u*i+o*s)+r*(l*i-a*s)},multiply:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=n[0],d=n[1],p=n[2],m=n[3],v=n[4],_=n[5],g=n[6],y=n[7],b=n[8];return e[0]=f*r+d*o+p*u,e[1]=f*i+d*s+p*c,e[2]=f*a+d*l+p*h,e[3]=m*r+v*o+_*u,e[4]=m*i+v*s+_*c,e[5]=m*a+v*l+_*h,e[6]=g*r+y*o+b*u,e[7]=g*i+y*s+b*c,e[8]=g*a+y*l+b*h,e}};l.mul=l.multiply,l.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=n[0],d=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=f*r+d*o+u,e[7]=f*i+d*s+c,e[8]=f*a+d*l+h,e},l.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=Math.sin(n),d=Math.cos(n);return e[0]=d*r+f*o,e[1]=d*i+f*s,e[2]=d*a+f*l,e[3]=d*o-f*r,e[4]=d*s-f*i,e[5]=d*l-f*a,e[6]=u,e[7]=c,e[8]=h,e},l.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,u=n*o,c=n*s,h=n*l,f=r*s,d=r*l,p=i*l,m=a*o,v=a*s,_=a*l;return e[0]=1-(f+p),e[3]=c+_,e[6]=h-v,e[1]=c-_,e[4]=1-(u+p),e[7]=d+m,e[2]=h+v,e[5]=d-m,e[8]=1-(u+f),e},l.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],v=t[14],_=t[15],g=n*s-r*o,y=n*l-i*o,b=n*u-a*o,w=r*l-i*s,T=r*u-a*s,S=i*u-a*l,x=c*m-h*p,C=c*v-f*p,E=c*_-d*p,A=h*v-f*m,R=h*_-d*m,k=f*_-d*v,P=g*k-y*R+b*A+w*E-T*C+S*x;return P?(P=1/P,e[0]=(s*k-l*R+u*A)*P,e[1]=(l*E-o*k-u*C)*P,e[2]=(o*R-s*E+u*x)*P,e[3]=(i*R-r*k-a*A)*P,e[4]=(n*k-i*E+a*C)*P,e[5]=(r*E-n*R-a*x)*P,e[6]=(m*S-v*T+_*w)*P,e[7]=(v*b-p*S-_*y)*P,e[8]=(p*T-m*b+_*g)*P,e):null},l.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},e.mat3=l;var u={create:function(){var e=new n(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromValues:function(e,t,r,i,a,o,s,l,u,c,h,f,d,p,m,v){var _=new n(16);return _[0]=e,_[1]=t,_[2]=r,_[3]=i,_[4]=a,_[5]=o,_[6]=s,_[7]=l,_[8]=u,_[9]=c,_[10]=h,_[11]=f,_[12]=d,_[13]=p,_[14]=m,_[15]=v,_},clone:function(e){var t=new n(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],v=t[14],_=t[15],g=n*s-r*o,y=n*l-i*o,b=n*u-a*o,w=r*l-i*s,T=r*u-a*s,S=i*u-a*l,x=c*m-h*p,C=c*v-f*p,E=c*_-d*p,A=h*v-f*m,R=h*_-d*m,k=f*_-d*v,P=g*k-y*R+b*A+w*E-T*C+S*x;return P?(P=1/P,e[0]=(s*k-l*R+u*A)*P,e[1]=(i*R-r*k-a*A)*P,e[2]=(m*S-v*T+_*w)*P,e[3]=(f*T-h*S-d*w)*P,e[4]=(l*E-o*k-u*C)*P,e[5]=(n*k-i*E+a*C)*P,e[6]=(v*b-p*S-_*y)*P,e[7]=(c*S-f*b+d*y)*P,e[8]=(o*R-s*E+u*x)*P,e[9]=(r*E-n*R-a*x)*P,e[10]=(p*T-m*b+_*g)*P,e[11]=(h*b-c*T-d*g)*P,e[12]=(s*C-o*A-l*x)*P,e[13]=(n*A-r*C+i*x)*P,e[14]=(m*y-p*w-v*g)*P,e[15]=(c*w-h*y+f*g)*P,e):null},adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],v=t[14],_=t[15];return e[0]=s*(f*_-d*v)-h*(l*_-u*v)+m*(l*d-u*f),e[1]=-(r*(f*_-d*v)-h*(i*_-a*v)+m*(i*d-a*f)),e[2]=r*(l*_-u*v)-s*(i*_-a*v)+m*(i*u-a*l),e[3]=-(r*(l*d-u*f)-s*(i*d-a*f)+h*(i*u-a*l)),e[4]=-(o*(f*_-d*v)-c*(l*_-u*v)+p*(l*d-u*f)),e[5]=n*(f*_-d*v)-c*(i*_-a*v)+p*(i*d-a*f),e[6]=-(n*(l*_-u*v)-o*(i*_-a*v)+p*(i*u-a*l)),e[7]=n*(l*d-u*f)-o*(i*d-a*f)+c*(i*u-a*l),e[8]=o*(h*_-d*m)-c*(s*_-u*m)+p*(s*d-u*h),e[9]=-(n*(h*_-d*m)-c*(r*_-a*m)+p*(r*d-a*h)),e[10]=n*(s*_-u*m)-o*(r*_-a*m)+p*(r*u-a*s),e[11]=-(n*(s*d-u*h)-o*(r*d-a*h)+c*(r*u-a*s)),e[12]=-(o*(h*v-f*m)-c*(s*v-l*m)+p*(s*f-l*h)),e[13]=n*(h*v-f*m)-c*(r*v-i*m)+p*(r*f-i*h),e[14]=-(n*(s*v-l*m)-o*(r*v-i*m)+p*(r*l-i*s)),e[15]=n*(s*f-l*h)-o*(r*f-i*h)+c*(r*l-i*s),e},determinant:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],m=e[14],v=e[15];return(t*o-n*a)*(h*v-f*m)-(t*s-r*a)*(c*v-f*p)+(t*l-i*a)*(c*m-h*p)+(n*s-r*o)*(u*v-f*d)-(n*l-i*o)*(u*m-h*d)+(r*l-i*s)*(u*p-c*d)},multiply:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],m=t[12],v=t[13],_=t[14],g=t[15],y=n[0],b=n[1],w=n[2],T=n[3];return e[0]=y*r+b*s+w*h+T*m,e[1]=y*i+b*l+w*f+T*v,e[2]=y*a+b*u+w*d+T*_,e[3]=y*o+b*c+w*p+T*g,y=n[4],b=n[5],w=n[6],T=n[7],e[4]=y*r+b*s+w*h+T*m,e[5]=y*i+b*l+w*f+T*v,e[6]=y*a+b*u+w*d+T*_,e[7]=y*o+b*c+w*p+T*g,y=n[8],b=n[9],w=n[10],T=n[11],e[8]=y*r+b*s+w*h+T*m,e[9]=y*i+b*l+w*f+T*v,e[10]=y*a+b*u+w*d+T*_,e[11]=y*o+b*c+w*p+T*g,y=n[12],b=n[13],w=n[14],T=n[15],e[12]=y*r+b*s+w*h+T*m,e[13]=y*i+b*l+w*f+T*v,e[14]=y*a+b*u+w*d+T*_,e[15]=y*o+b*c+w*p+T*g,e},fromMat3:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0,e[4]=t[3],e[5]=t[4],e[6]=t[5],e[7]=0,e[8]=t[6],e[9]=t[7],e[10]=t[8],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}};u.mul=u.multiply,u.translate=function(e,t,n){var r,i,a,o,s,l,u,c,h,f,d,p,m=n[0],v=n[1],_=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*_+t[12],e[13]=t[1]*m+t[5]*v+t[9]*_+t[13],e[14]=t[2]*m+t[6]*v+t[10]*_+t[14],e[15]=t[3]*m+t[7]*v+t[11]*_+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=h,e[9]=f,e[10]=d,e[11]=p,e[12]=r*m+s*v+h*_+t[12],e[13]=i*m+l*v+f*_+t[13],e[14]=a*m+u*v+d*_+t[14],e[15]=o*m+c*v+p*_+t[15]),e},u.scale=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},u.rotate=function(e,n,r,i){var a,o,s,l,u,c,h,f,d,p,m,v,_,g,y,b,w,T,S,x,C,E,A,R,k=i[0],P=i[1],M=i[2],F=Math.sqrt(k*k+P*P+M*M);return Math.abs(F)<t?null:(k*=F=1/F,P*=F,M*=F,a=Math.sin(r),s=1-(o=Math.cos(r)),l=n[0],u=n[1],c=n[2],h=n[3],f=n[4],d=n[5],p=n[6],m=n[7],v=n[8],_=n[9],g=n[10],y=n[11],b=k*k*s+o,w=P*k*s+M*a,T=M*k*s-P*a,S=k*P*s-M*a,x=P*P*s+o,C=M*P*s+k*a,E=k*M*s+P*a,A=P*M*s-k*a,R=M*M*s+o,e[0]=l*b+f*w+v*T,e[1]=u*b+d*w+_*T,e[2]=c*b+p*w+g*T,e[3]=h*b+m*w+y*T,e[4]=l*S+f*x+v*C,e[5]=u*S+d*x+_*C,e[6]=c*S+p*x+g*C,e[7]=h*S+m*x+y*C,e[8]=l*E+f*A+v*R,e[9]=u*E+d*A+_*R,e[10]=c*E+p*A+g*R,e[11]=h*E+m*A+y*R,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},u.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*r,e[5]=o*i+c*r,e[6]=s*i+h*r,e[7]=l*i+f*r,e[8]=u*i-a*r,e[9]=c*i-o*r,e[10]=h*i-s*r,e[11]=f*i-l*r,e},u.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*r,e[1]=o*i-c*r,e[2]=s*i-h*r,e[3]=l*i-f*r,e[8]=a*r+u*i,e[9]=o*r+c*i,e[10]=s*r+h*i,e[11]=l*r+f*i,e},u.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*r,e[1]=o*i+c*r,e[2]=s*i+h*r,e[3]=l*i+f*r,e[4]=u*i-a*r,e[5]=c*i-o*r,e[6]=h*i-s*r,e[7]=f*i-l*r,e},u.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,l=i+i,u=a+a,c=r*s,h=r*l,f=r*u,d=i*l,p=i*u,m=a*u,v=o*s,_=o*l,g=o*u;return e[0]=1-(d+m),e[1]=h+g,e[2]=f-_,e[3]=0,e[4]=h-g,e[5]=1-(c+m),e[6]=p+v,e[7]=0,e[8]=f+_,e[9]=p-v,e[10]=1-(c+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},u.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,u=n*o,c=n*s,h=n*l,f=r*s,d=r*l,p=i*l,m=a*o,v=a*s,_=a*l;return e[0]=1-(f+p),e[1]=c+_,e[2]=h-v,e[3]=0,e[4]=c-_,e[5]=1-(u+p),e[6]=d+m,e[7]=0,e[8]=h+v,e[9]=d-m,e[10]=1-(u+f),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},u.frustum=function(e,t,n,r,i,a,o){var s=1/(n-t),l=1/(i-r),u=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e},u.perspective=function(e,t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e},u.ortho=function(e,t,n,r,i,a,o){var s=1/(t-n),l=1/(r-i),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(o+a)*u,e[15]=1,e},u.lookAt=function(e,n,r,i){var a,o,s,l,c,h,f,d,p,m,v=n[0],_=n[1],g=n[2],y=i[0],b=i[1],w=i[2],T=r[0],S=r[1],x=r[2];return Math.abs(v-T)<t&&Math.abs(_-S)<t&&Math.abs(g-x)<t?u.identity(e):(f=v-T,d=_-S,p=g-x,a=b*(p*=m=1/Math.sqrt(f*f+d*d+p*p))-w*(d*=m),o=w*(f*=m)-y*p,s=y*d-b*f,(m=Math.sqrt(a*a+o*o+s*s))?(a*=m=1/m,o*=m,s*=m):(a=0,o=0,s=0),l=d*s-p*o,c=p*a-f*s,h=f*o-d*a,(m=Math.sqrt(l*l+c*c+h*h))?(l*=m=1/m,c*=m,h*=m):(l=0,c=0,h=0),e[0]=a,e[1]=l,e[2]=f,e[3]=0,e[4]=o,e[5]=c,e[6]=d,e[7]=0,e[8]=s,e[9]=h,e[10]=p,e[11]=0,e[12]=-(a*v+o*_+s*g),e[13]=-(l*v+c*_+h*g),e[14]=-(f*v+d*_+p*g),e[15]=1,e)},u.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},e.mat4=u;var c,h,f,d,p,m={create:function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}};return m.rotationTo=(c=o.create(),h=o.fromValues(1,0,0),f=o.fromValues(0,1,0),function(e,t,n){var r=o.dot(t,n);return r<-.999999?(o.cross(c,h,t),o.length(c)<1e-6&&o.cross(c,f,t),o.normalize(c,c),m.setAxisAngle(e,c,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(o.cross(c,t,n),e[0]=c[0],e[1]=c[1],e[2]=c[2],e[3]=1+r,m.normalize(e,e))}),m.setAxes=(d=l.create(),function(e,t,n,r){return d[0]=n[0],d[3]=n[1],d[6]=n[2],d[1]=r[0],d[4]=r[1],d[7]=r[2],d[2]=t[0],d[5]=t[1],d[8]=t[2],m.normalize(e,m.fromMat3(e,d))}),m.clone=s.clone,m.fromValues=s.fromValues,m.copy=s.copy,m.set=s.set,m.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},m.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},m.add=s.add,m.multiply=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+o*s+i*u-a*l,e[1]=i*c+o*l+a*s-r*u,e[2]=a*c+o*u+r*l-i*s,e[3]=o*c-r*s-i*l-a*u,e},m.mul=m.multiply,m.scale=s.scale,m.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=a*l-i*s,e[3]=o*l-r*s,e},m.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-a*s,e[1]=i*l+o*s,e[2]=a*l+r*s,e[3]=o*l-i*s,e},m.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e},m.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=-Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},m.dot=s.dot,m.lerp=s.lerp,m.slerp=function(e,t,n,r){var i,a,o,s,l,u=t[0],c=t[1],h=t[2],f=t[3],d=n[0],p=n[1],m=n[2],v=n[3];return(a=u*d+c*p+h*m+f*v)<0&&(a=-a,d=-d,p=-p,m=-m,v=-v),1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,l=Math.sin(r*i)/o):(s=1-r,l=r),e[0]=s*u+l*d,e[1]=s*c+l*p,e[2]=s*h+l*m,e[3]=s*f+l*v,e},m.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e},m.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},m.length=s.length,m.len=m.length,m.squaredLength=s.squaredLength,m.sqrLen=m.squaredLength,m.normalize=s.normalize,m.fromMat3=(p="undefined"!=typeof Int8Array?new Int8Array([1,2,0]):[1,2,0],function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[7]-t[5])*n,e[1]=(t[2]-t[6])*n,e[2]=(t[3]-t[1])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=p[i],o=p[a];n=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n,e[o]=(t[3*o+i]+t[3*i+o])*n}return e}),m.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.quat=m,e}(),t=function(){var t=e.vec4,n={rgb:{}},r=n.rgb;n.rgb.create=t.create,n.rgb.scale=t.scale,n.rgb.copy=t.copy,n.rgb.fromValues=t.fromValues,n.rgb.mix=function(e,t,n,r){var i=1-r;return e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i,e[3]=t[3]*r+n[3]*i,e};var i={white:r.fromValues(1,1,1,1),black:r.fromValues(0,0,0,1),grey:r.fromValues(.5,.5,.5,1),lightgrey:r.fromValues(.8,.8,.8,1),darkgrey:r.fromValues(.3,.3,.3,1),red:r.fromValues(1,0,0,1),darkred:r.fromValues(.5,0,0,1),lightred:r.fromValues(1,.5,.5,1),green:r.fromValues(0,1,0,1),darkgreen:r.fromValues(0,.5,0,1),lightgreen:r.fromValues(.5,1,.5,1),blue:r.fromValues(0,0,1,1),darkblue:r.fromValues(0,0,.5,1),lightblue:r.fromValues(.5,.5,1,1),yellow:r.fromValues(1,1,0,1),darkyellow:r.fromValues(.5,.5,0,1),lightyellow:r.fromValues(1,1,.5,1),cyan:r.fromValues(0,1,1,1),darkcyan:r.fromValues(0,.5,.5,1),lightcyan:r.fromValues(.5,1,1,1),magenta:r.fromValues(1,0,1,1),darkmagenta:r.fromValues(.5,0,.5,1),lightmagenta:r.fromValues(1,.5,1,1),orange:r.fromValues(1,.5,0,1),darkorange:r.fromValues(.5,.25,0,1),lightorange:r.fromValues(1,.75,.5,1)};function a(e,t){this._colors=e;for(var r=0;r<this._colors.length;++r)this._colors[r]=n.forceRGB(this._colors[r]);this._stops=t}n.hex2rgb=function(e){var t,n,i,a;return 4===e.length||5===e.length?(t=parseInt(e[1],16),n=parseInt(e[2],16),i=parseInt(e[3],16),a=15,5===e.length&&(a=parseInt(e[4],16)),r.fromValues(1/15*t,1/15*n,1/15*i,1/15*a)):7===e.length||9===e.length?(t=parseInt(e.substr(1,2),16),n=parseInt(e.substr(3,2),16),i=parseInt(e.substr(5,2),16),a=255,9===e.length&&(a=parseInt(e.substr(7,2),16)),r.fromValues(1/255*t,1/255*n,1/255*i,1/255*a)):void 0},n.setColorPalette=function(e){console.log("setting colors"),i=e,n.initGradients()},n.forceRGB=function(e){if("string"==typeof e){var t=i[e];if(void 0!==t)return t;if(e.length>0&&"#"===e[0])return n.hex2rgb(e)}return 3===e.length?[e[0],e[1],e[2],1]:e},a.prototype={colorAt:function(e,n){if(n<=this._stops[0])return t.copy(e,this._colors[0]);if(n>=this._stops[this._stops.length-1])return t.copy(e,this._colors[this._stops.length-1]);for(var i=0,a=1;a<this._stops.length&&!(this._stops[a]>n);++a)i=a;var o=i+1,s=this._stops[i],l=(n-s)/(this._stops[o]-s);return r.mix(e,this._colors[o],this._colors[i],l)}};var o={};n.gradient=function(e,t){if("string"==typeof e)return o[e];if("equal"===(t=t||"equal")){t=[];for(var n=0;n<e.length;++n)t.push(1*n/(e.length-1))}return new a(e,t)};var s=n.gradient;function l(e,t,n){this.colorFor=e,this._beginFunc=t,this._endFunc=n}n.initGradients=function(){o.rainbow=s(["red","yellow","green","blue"]),o.reds=s(["lightred","darkred"]),o.greens=s(["lightgreen","darkgreen"]),o.blues=s(["lightblue","darkblue"]),o.trafficlight=s(["green","yellow","red"]),o.heatmap=s(["red","white","blue"])},l.prototype={begin:function(e){this._beginFunc&&this._beginFunc(e)},end:function(e){this._endFunc&&this._endFunc(e)}},n.ColorOp=l,n.uniform=function(e){return e=n.forceRGB(e||"white"),new l(function(t,n,r){n[r+0]=e[0],n[r+1]=e[1],n[r+2]=e[2],n[r+3]=e[3]},null,null)};var u={H:[1,1,1],C:[.83,.83,.83],N:[.13,.2,1],O:[1,.13,0],F:[.12,.94,.12],CL:[.12,.94,.12],BR:[.6,.13,0],I:[.4,0,.73],HE:[0,1,1],NE:[0,1,1],AR:[0,1,1],XE:[0,1,1],KR:[0,1,1],P:[1,.6,0],S:[.87,.87,0],B:[1,.67,.47],LI:[.47,0,1],NA:[.47,0,1],K:[.47,0,1],RB:[.47,0,1],CS:[.47,0,1],FR:[.47,0,1],BE:[0,.47,0],MG:[0,.47,0],SR:[0,.47,0],BA:[0,.47,0],RA:[0,.47,0],TI:[.6,.6,.6],FE:[.87,.47,0]};n.byElement=function(){return new l(function(e,t,n){var r=e.element(),i=u[r];return void 0!==i?(t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=1,t):(t[n]=1,t[n+1]=0,t[n+2]=1,t[n+3]=1,t)},null,null)},n.bySS=function(){return new l(function(e,t,n){switch(e.residue().ss()){case"C":return t[n]=.8,t[n+1]=.8,t[n+2]=.8,void(t[n+3]=1);case"H":return t[n]=.6,t[n+1]=.6,t[n+2]=.9,void(t[n+3]=1);case"E":return t[n]=.2,t[n+1]=.8,t[n+2]=.2,void(t[n+3]=1)}},null,null)},n.rainbow=function(e){return e||(e=s("rainbow")),new l(function(t,n,r){var i=0,a=this.chainLimits[t.residue().chain().name()];void 0!==a&&(i=(t.residue().index()-a[0])/(a[1]-a[0]));var o=[1,1,1,1];e.colorAt(o,i),n[r]=o[0],n[r+1]=o[1],n[r+2]=o[2],n[r+3]=o[3]},function(e){var t=e.chains();this.chainLimits={};for(var n=0;n<t.length;++n){var r=t[n].backboneTraces();if(0!==r.length){for(var i=r[0].residueAt(0).index(),a=r[0].residueAt(r[0].length()-1).index(),o=1;o<r.length;++o){var s=r[o];i=Math.min(i,s.residueAt(0).index()),a=Math.max(a,s.residueAt(s.length()-1).index())}i!==a&&(this.chainLimits[t[n].name()]=[i,a])}}},function(){this.chainLimits=null})},n.ssSuccession=function(e,t){return e||(e=s("rainbow")),t||(t=n.forceRGB("lightgrey")),new l(function(n,r,i){var a=n.residue().index(),o=this.chainLimits[n.residue().chain().name()],s=o.indices[a];if(-1===s)return r[i]=t[0],r[i+1]=t[1],r[i+2]=t[2],void(r[i+3]=t[3]);var l=0;o.max,null!==o.max&&(l=s/(o.max>0?o.max:1));var u=[0,0,0,0];e.colorAt(u,l),r[i]=u[0],r[i+1]=u[1],r[i+2]=u[2],r[i+3]=u[3]},function(e){var t=e.chains();this.chainLimits={};for(var n=0;n<t.length;++n){for(var r=t[n].residues(),i=null,a={},o=0,s="C",l=0;l<r.length;++l){var u=r[l].ss();"C"===u?("C"!==s&&o++,a[r[l].index()]=-1):(i=o,a[r[l].index()]=o),s=u}this.chainLimits[t[n].name()]={indices:a,max:i}}},function(){this.chainLimits=null})},n.byChain=function(e){return e||(e=s("rainbow")),new l(function(t,n,r){var i=this.chainIndices[t.residue().chain().name()]*this.scale,a=[0,0,0,0];e.colorAt(a,i),n[r+0]=a[0],n[r+1]=a[1],n[r+2]=a[2],n[r+3]=a[3]},function(e){var t=e.chains();this.chainIndices={};for(var n=0;n<t.length;++n)this.chainIndices[t[n].name()]=n;this.scale=t.length>1?1/(t.length-1):1},function(){this.chainIndices=null})};var c=function(){var e=t.create();return function(t,n,r,i){r.colorAt(e,i),t[n+0]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=e[3]}}();function h(e,t,n,r,i){return t||(t=s("rainbow")),new l(function(n,r,a){var o=0;this._min!==this._max&&(o=(i(n).prop(e)-this._min)/(this._max-this._min)),c(r,a,t,o)},function(t){if(void 0!==n)return this._min=n[0],void(this._max=n[1]);n=function(e,t,n){var r=null,i=null;return e[t](function(e){var t=e.prop(n);null!==r||null!==i?(r=Math.min(r,t),i=Math.max(i,t)):r=i=t}),{min:r,max:i}}(t,r,e),this._min=n.min,this._max=n.max},function(){})}return n.byAtomProp=function(e,t,n){return h(e,t,n,"eachAtom",function(e){return e})},n.byResidueProp=function(e,t,n){return h(e,t,n,"eachResidue",function(e){return e.residue()})},n.interpolateColor=function(e,n){for(var r=new Float32Array(4*(n*(e.length/4-1)+1)),i=0,a=t.create(),o=t.create(),s=1/n,l=0;l<e.length/4-1;++l){t.set(a,e[4*l+0],e[4*l+1],e[4*l+2],e[4*l+3]),t.set(o,e[4*l+4],e[4*l+5],e[4*l+6],e[4*l+7]);for(var u=0;u<n;++u){var c=s*u;r[i+0]=a[0]*(1-c)+o[0]*c,r[i+1]=a[1]*(1-c)+o[1]*c,r[i+2]=a[2]*(1-c)+o[2]*c,r[i+3]=a[3]*(1-c)+o[3]*c,i+=4}}return r[i+0]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3],r},n.initGradients(),n}(),n=function(){function e(e,t,n){this._pool=e,this._start=t,this._next=t,this._end=n}function t(){this.clear()}return e.prototype={nextId:function(e){var t=this._next;return console.assert(this._next<this._end),this._next++,this._pool._objects[t]=e,t},hasLeft:function(){return this._next<this._end},recycle:function(){this._pool.recycle(this)},length:function(){return this._end-this._start}},t.prototype={MAX_ID:16777216,getContinuousRange:function(t){for(var n=-1,r=null,i=0;i<this._free.length;++i){var a=this._free[i].length();a>=t&&(null===r||a<r)&&(r=a,n=i)}if(-1!==n){var o=this._free[n];return this._free.splice(n,1),this._usedCount++,o}var s=this._unusedRangeStart,l=s+t;if(l>this.MAX_ID)return console.error("not enough free object ids."),null;this._unusedRangeStart=l;var u=new e(this,s,l);return this._usedCount++,u},clear:function(){this._objects={},this._unusedRangeStart=1,this._free=[],this._usedCount=0},recycle:function(e){for(var t=e._start;t<e._next;++t)delete this._objects[t];e._next=e._start,this._free.push(e),this._usedCount--,console.assert(this._usedCount>=0),this._free.length>0&&0===this._usedCount&&this.clear()},objectForId:function(e){return this._objects[e]}},t}(),r=function(){var e={};function t(e,t){return e<t}function n(e,t){void 0===e||void 0===t?(this._empty=!0,this._min=this._max=null):(this._empty=!1,this._min=e,this._max=t)}return e.derive=function(e,t,n){for(var r in t.prototype)e.prototype[r]=t.prototype[r];if(void 0!==n)for(var i in n)e.prototype[i]=n[i]},e.bind=function(e,t){return function(){return t.apply(e,arguments)}},e.copy=function(e){e=e||{};var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},e.binarySearch=function(e,n,r){if(0===e.length)return-1;r=r||t;for(var i=0,a=e.length,o=i+a>>1;;){var s=e[o];if(r(n,s))a=o;else{if(!r(s,n))return o;i=o}var l=i+a>>1;if(l===o)return-1;o=l}return-1},e.indexFirstLargerEqualThan=function(e,n,r){if(r=r||t,0===e.length||r(e[e.length-1],n))return-1;for(var i=0,a=e.length,o=i+a>>1;;){var s=e[o];r(n,s)?a=o:r(s,n)?i=o+1:a=o;var l=i+a>>1;if(l===o)return o;o=l}},e.indexLastSmallerThan=function(e,n,r){if(r=r||t,0===e.length||r(e[e.length-1],n))return e.length-1;if(r(n,e[0])||!r(e[0],n))return-1;for(var i=0,a=e.length,o=i+a>>1;;){var s=e[o];r(n,s)||!r(s,n)?a=o:i=o;var l=i+a>>1;if(l===o)return o;o=l}},e.indexLastSmallerEqualThan=function(e,n,r){if(r=r||t,0===e.length||r(e[e.length-1],n))return e.length-1;if(r(n,e[0]))return-1;for(var i=0,a=e.length,o=i+a>>1;;){r(n,e[o])?a=o:i=o;var s=i+a>>1;if(s===o)return o;o=s}},n.prototype={min:function(){return this._min},max:function(){return this._max},length:function(){return this._max-this._min},empty:function(){return this._empty},center:function(){return.5*(this._max+this._min)},extend:function(e){this._min-=e,this._max+=e},update:function(e){this._empty?(this._min=this._max=e,this._empty=!1):e<this._min?this._min=e:e>this._max&&(this._max=e)}},e.Range=n,e}(),i=function(){function e(e){if("complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState)return console.error("isWebGLSupported only works after DOMContentLoaded"),!1;if(void 0===e)try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("experimental-webgl"))}catch(e){return!1}return!!e}function t(e,t){this._width=t.width,this._antialias=t.antialias,this._height=t.height,this._resize=!1,this._lastTimestamp=null,this._domElement=e,this._initCanvas(),this._backgroundColor=t.backgroundColor,this._forceManualAntialiasing=t.forceManualAntialiasing}return t.prototype={_ensureSize:function(){if(this._resize){this._resize=!1;var e=this._width*this._samples,t=this._height*this._samples;this._realWidth=e,this._realHeight=t,this._gl.viewport(0,0,e,t),this._canvas.width=e,this._canvas.height=t,this._samples>1&&this._initManualAntialiasing(this._samples)}},resize:function(e,t){e===this._width&&t===this._height||(this._resize=!0,this._width=e,this._height=t)},fitParent:function(){var e=this._domElement.getBoundingClientRect();this.resize(e.width,e.height)},gl:function(){return this._gl},imageData:function(){return this._canvas.toDataURL()},_initContext:function(){try{var e={antialias:this._antialias&&!this._forceManualAntialiasing,preserveDrawingBuffer:!0};this._gl=this._canvas.getContext("experimental-webgl",e)}catch(e){return console.error("WebGL not supported",e),!1}return!!this._gl||(console.error("WebGL not supported"),!1)},_initManualAntialiasing:function(e){var t=1/e,n="translate("+.5*-(1-t)*this._realWidth+"px, "+.5*-(1-t)*this._realHeight+"px) scale("+t+", "+t+")";this._canvas.style.webkitTransform=n,this._canvas.style.transform=n,this._canvas.style.ieTransform=n,this._canvas.width=this._realWidth,this._canvas.height=this._realHeight},initGL:function(){var e=1;if(!this._initContext())return!1;var t=this._gl;return t.getContextAttributes().antialias&&!this._forceManualAntialiasing||!this._antialias||(e=2),this._realWidth=this._width*e,this._realHeight=this._height*e,this._samples=e,e>1&&this._initManualAntialiasing(e),t.viewportWidth=this._realWidth,t.viewportHeight=this._realHeight,t.clearColor(this._backgroundColor[0],this._backgroundColor[1],this._backgroundColor[2],1),t.lineWidth(2),t.cullFace(t.FRONT),t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),!0},_shaderFromString:function(e,t,n){var r,i=this._gl;if("fragment"===t)r=i.createShader(i.FRAGMENT_SHADER);else{if("vertex"!==t)return console.error("could not determine type for shader"),null;r=i.createShader(i.VERTEX_SHADER)}var a=e.replace("${PRECISION}",n);return i.shaderSource(r,a),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS)?r:(console.log(a),console.error(i.getShaderInfoLog(r)),null)},initShader:function(e,t,n){var i=this._gl,a=this._shaderFromString(t,"fragment",n),o=this._shaderFromString(e,"vertex",n),s=i.createProgram();if(i.attachShader(s,o),i.attachShader(s,a),i.linkProgram(s),!i.getProgramParameter(s,i.LINK_STATUS))return console.error("could not initialise shaders"),console.error(i.getShaderInfoLog(s)),null;var l=r.bind(i,i.getAttribLocation),u=r.bind(i,i.getUniformLocation);return s.posAttrib=l(s,"attrPos"),s.colorAttrib=l(s,"attrColor"),s.normalAttrib=l(s,"attrNormal"),s.objIdAttrib=l(s,"attrObjId"),s.selectAttrib=l(s,"attrSelect"),s.symId=u(s,"symId"),s.projection=u(s,"projectionMat"),s.modelview=u(s,"modelviewMat"),s.rotation=u(s,"rotationMat"),s.fog=u(s,"fog"),s.fogFar=u(s,"fogFar"),s.fogNear=u(s,"fogNear"),s.fogColor=u(s,"fogColor"),s.outlineColor=u(s,"outlineColor"),s.outlineWidth=u(s,"outlineWidth"),s.relativePixelSize=u(s,"relativePixelSize"),s.screenDoorTransparency=u(s,"screenDoorTransparency"),s.selectionColor=u(s,"selectionColor"),s.pointSize=u(s,"pointSize"),s.zoom=u(s,"zoom"),s},on:function(e,t){this._canvas.addEventListener(e,t,!1)},removeEventListener:function(e,t){this._canvas.removeEventListener(e,t,!1)},onWheel:function(e,t){"onwheel"in this._canvas?this.on("wheel",e):this.on("mousewheel",t)},domElement:function(){return this._canvas},bind:function(){this._ensureSize(),this._gl.viewport(0,0,this._realWidth,this._realHeight)},superSamplingFactor:function(){return this._samples},viewportWidth:function(){return this._realWidth},viewportHeight:function(){return this._realHeight},width:function(){return this._width},height:function(){return this._height},_initCanvas:function(){this._canvas=document.createElement("canvas"),this._canvas.width=this._width,this._canvas.height=this._height,this._domElement.appendChild(this._canvas)},isWebGLSupported:function(){return e(this._gl)},destroy:function(){this._canvas.width=1,this._canvas.height=1,this._canvas.parentElement.removeChild(this._canvas),this._canvas=null}},{Canvas:t,isWebGLSupported:e}}(),a=function(){function e(e,t){this._width=t.width,this._height=t.height,this._colorBufferWidth=this._width,this._colorBufferHeight=this._height,this._gl=e,this._colorHandle=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this._colorHandle),this._depthHandle=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this._depthHandle),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this._width,this._height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this._depthHandle),this._colorTexture=e.createTexture(),this._initColorBuffer()}return e.prototype={width:function(){return this._width},height:function(){return this._height},bind:function(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._colorHandle),e.bindRenderbuffer(e.RENDERBUFFER,this._depthHandle),this._colorBufferWidth===this._width&&this._colorBufferHeight===this._height||this._resizeBuffers(),e.viewport(0,0,this._width,this._height)},colorTexture:function(){return this._colorTexture},_initColorBuffer:function(){this.bind();var e=this._gl;e.bindTexture(e.TEXTURE_2D,this._colorTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this._width,this._height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._colorTexture,0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),this.release()},_resizeBuffers:function(){var e=this._gl;e.bindRenderbuffer(e.RENDERBUFFER,this._depthHandle),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this._width,this._height),e.bindTexture(e.TEXTURE_2D,this._colorTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this._width,this._height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._colorTexture,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this._depthHandle),e.bindTexture(e.TEXTURE_2D,null),this._colorBufferWidth=this._width,this._colorBufferHeight=this._height},resize:function(e,t){this._width=e,this._height=t},release:function(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null)}},e}(),o=function(){function e(e){this._freeArrays=[],this._bufferType=e}return e.prototype.request=function(e){for(var t=-1,n=null,r=0;r<this._freeArrays.length;++r){var i=this._freeArrays[r].length;i>=e&&(null===n||i<n)&&(n=i,t=r)}if(-1!==t){var a=this._freeArrays[t];return this._freeArrays.splice(t,1),a}return new this._bufferType(e)},e.prototype.release=function(e){this._freeArrays.push(e)},e}(),s=function(){var t,n,r,i=e.vec3,a=e.mat4;function o(e){this._projection=a.create(),this._camModelView=a.create(),this._modelView=a.create(),this._rotation=a.create(),this._translation=a.create(),this._near=.1,this._far=4e3,this._fogNear=-5,this._fogFar=50,this._fog=!0,this._fovY=45*Math.PI/180,this._fogColor=i.fromValues(1,1,1),this._outlineColor=i.fromValues(.1,.1,.1),this._outlineWidth=1,this._selectionColor=i.fromValues(.1,1,.1),this._center=i.create(),this._zoom=50,this._screenDoorTransparency=!1,this._updateProjectionMat=!0,this._updateModelViewMat=!0,this._upsamplingFactor=1,this._gl=e,this._currentShader=null,this._stateId=0,this.setViewportSize(e.viewportWidth,e.viewportHeight)}return o.prototype={_incrementStateId:function(){this._stateId+=1,this._stateId>68719476735&&(this._stateId=0)},setScreenDoorTransparency:function(e){this._screenDoorTransparency=e,this._incrementStateId()},setOutlineWidth:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,this._incrementStateId())},setRotation:function(e){16===e.length?a.copy(this._rotation,e):a.fromMat3(this._rotation,e),this._updateModelViewMat=!0},upsamplingFactor:function(){return this._upsamplingFactor},setUpsamplingFactor:function(e){if(this._upsamplingFactor!==e){this._incrementStateId(),this._upsamplingFactor=e;var t=this._upsamplingFactor/this._width,n=this._upsamplingFactor/this._height;this._relativePixelSize=new Float32Array([t,n])}},mainAxes:function(){return[i.fromValues(this._rotation[0],this._rotation[4],this._rotation[8]),i.fromValues(this._rotation[1],this._rotation[5],this._rotation[9]),i.fromValues(this._rotation[2],this._rotation[6],this._rotation[10])]},fieldOfViewY:function(){return this._fovY},setFieldOfViewY:function(e){this._fovY=e,this._updateProjectionMat=!0},aspectRatio:function(){return this._width/this._height},rotation:function(){return this._rotation},_updateIfRequired:function(){var e=!1;return this._updateModelViewMat&&(a.identity(this._camModelView),a.translate(this._camModelView,this._camModelView,[-this._center[0],-this._center[1],-this._center[2]]),a.mul(this._camModelView,this._rotation,this._camModelView),a.identity(this._translation),a.translate(this._translation,this._translation,[0,0,-this._zoom]),a.mul(this._camModelView,this._translation,this._camModelView),e=!0),this._updateProjectionMat&&(a.identity(this._projection),a.perspective(this._projection,this._fovY,this._width/this._height,this._near,this._far),e=!0),this._updateProjectionMat=!1,this._updateModelViewMat=!1,e&&this._incrementStateId(),e},setViewportSize:function(e,t){this._updateProjectionMat=!0,this._width=e,this._height=t,this._relativePixelSize=new Float32Array([this._upsamplingFactor/e,this._upsamplingFactor/t])},viewportWidth:function(){return this._width},viewportHeight:function(){return this._height},setCenter:function(e){this._updateModelViewMat=!0,i.copy(this._center,e)},fog:function(e){return void 0!==e&&e!==this._fog&&(this._fog=e,this._incrementStateId()),this._fog},rotateZ:(r=a.create(),function(e){a.identity(r),this._updateModelViewMat=!0,a.rotate(r,r,e,[0,0,1]),a.mul(this._rotation,r,this._rotation)}),rotateX:function(){var e=a.create();return function(t){a.identity(e),this._updateModelViewMat=!0,a.rotate(e,e,t,[1,0,0]),a.mul(this._rotation,e,this._rotation)}}(),rotateY:function(){var e=a.create();return function(t){a.identity(e),this._updateModelViewMat=!0,a.rotate(e,e,t,[0,1,0]),a.mul(this._rotation,e,this._rotation)}}(),panX:function(e){return this.panXY(e,0)},panY:function(e){return this.panXY(0,e)},panXY:(t=a.create(),n=i.create(),function(e,r){a.transpose(t,this._rotation),this._updateModelViewMat=!0,i.set(n,-e,r,0),i.transformMat4(n,n,t),i.add(n,n,this._center),this.setCenter(n)}),nearOffset:function(){return this._near},farOffset:function(){return this._far},setNearFar:function(e,t){e===this._near&&t===this._far||(this._near=e,this._far=t,this._updateProjectionMat=!0)},setFogNearFar:function(e,t){this._fogNear=e,this._fogFar=t,this._updateProjectionMat=!0},setZoom:function(e){return this._updateModelViewMat=!0,this._zoom=e,this._zoom},zoom:function(e){if(void 0===e)return this._zoom;this._updateModelViewMat=!0;var t=1+.1*e;return this._zoom=Math.min(1e3,Math.max(2,t*this._zoom)),this._zoom},center:function(){return this._center},setFogColor:function(e){this._fogColor=i.clone(e)},currentShader:function(){return this._currentShader},invalidateCurrentShader:function(){this._currentShader=null},setOutlineColor:function(e){this._outlineColor=i.clone(e)},setSelectionColor:function(e){this._selectionColor=i.clone(e)},bind:function(e,t){var n=!1,r=this._gl;if(this._currentShader!==e&&(this._currentShader=e,r.useProgram(e),n=!0),n=this._updateIfRequired()||n,t?(a.mul(this._modelView,this._camModelView,t),r.uniformMatrix4fv(e.modelview,!1,this._modelView)):r.uniformMatrix4fv(e.modelview,!1,this._camModelView),this._stateId!==e.stateId){e.stateId=this._stateId,r.uniformMatrix4fv(e.projection,!1,this._projection),e.rotation&&r.uniformMatrix4fv(e.rotation,!1,this._rotation),r.uniform1i(e.fog,this._fog);var i=this._zoom;r.uniform1f(e.fogFar,this._fogFar+i),r.uniform1f(e.zoom,this._zoom),r.uniform1f(e.fogNear,this._fogNear+i),r.uniform3fv(e.fogColor,this._fogColor),r.uniform3fv(e.outlineColor,this._outlineColor),r.uniform3fv(e.selectionColor,this._selectionColor),r.uniform2fv(e.relativePixelSize,this._relativePixelSize),r.uniform1f(e.outlineWidth,this._outlineWidth),r.uniform1i(e.screenDoorTransparency,this._screenDoorTransparency)}}},o}(),l={PRELUDE_FS:"\nprecision ${PRECISION} float;\nuniform bool screenDoorTransparency;\nvec4 handleAlpha(vec4 inColor) {\n  if (screenDoorTransparency) {\n    ivec2 pxCoord = ivec2(gl_FragCoord.xy);\n    ivec2 mod = pxCoord - (pxCoord/2) * 2;\n    if (inColor.a < 0.99 &&\n        (inColor.a < 0.01 || mod.x != 0 || mod.y != 0)) { discard; }\n    return vec4(inColor.rgb, 1.0);\n  } else {\n    if (inColor.a == 0.0) { discard; }\n    return inColor;\n  } \n} \nuniform vec3 selectionColor;\n\nvec3 handleSelect(vec3 inColor, float vertSelect) { \n  return mix(inColor, selectionColor, step(0.5, vertSelect) * 0.7); \n} \n\nuniform bool fog;\nuniform float fogNear;\nuniform float fogFar;\nuniform vec3 fogColor;\nvec3 handleFog(vec3 inColor) {\n  if (fog) {\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fogNear, fogFar, depth);\n    return mix(inColor, fogColor, fogFactor);\n  } else {\n    return inColor;\n  }\n}",LINES_FS:"\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\n\nvoid main(void) {\n  gl_FragColor = handleAlpha(vertColor);\n  gl_FragColor.rgb = handleFog(gl_FragColor.rgb);\n}",SELECT_LINES_FS:"\nprecision ${PRECISION} float;\n\nvarying float vertSelect;\nvarying vec3 vertNormal;\nuniform float fogNear;\nuniform float fogFar;\nuniform vec3 fogColor;\nuniform bool fog;\nuniform vec3 selectionColor;\n\nvoid main(void) {\n  gl_FragColor = mix(vec4(0.0, 0.0, 0.0, 0.0), vec4(selectionColor, 1.0), \n                     vertSelect);\n  gl_FragColor.a = step(0.5, vertSelect);\n  if (gl_FragColor.a == 0.0) { discard; }\n  float depth = gl_FragCoord.z / gl_FragCoord.w;\n  if (fog) {\n    float fog_factor = smoothstep(fogNear, fogFar, depth);\n    gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w),\n                        fog_factor);\n  }\n}",SELECT_LINES_VS:"\nattribute vec3 attrPos;\nattribute float attrSelect;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform float pointSize;\nvarying float vertSelect;\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  gl_Position.z += gl_Position.w * 0.000001; \n  float distToCamera = vec4(modelviewMat * vec4(attrPos, 1.0)).z;\n  gl_PointSize = pointSize * 200.0 / abs(distToCamera); \n  vertSelect = attrSelect;\n}",SELECT_VS:"\nprecision ${PRECISION} float;\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform float pointSize;\nattribute vec3 attrPos;\nattribute float attrObjId;\n\nvarying float objId;\n\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  float distToCamera = vec4(modelviewMat * vec4(attrPos, 1.0)).z;\n  gl_PointSize = pointSize * 200.0 / abs(distToCamera); \n  objId = attrObjId;\n}",SELECT_FS:"\nprecision ${PRECISION} float;\n\nvarying float objId;\nuniform int symId;\n\nint intMod(int x, int y) { \n  int z = x/y;\n  return x-y*z;\n}\nvoid main(void) {\n  // ints are only required to be 7bit...\n  int integralObjId = int(objId+0.5);\n  int red = intMod(integralObjId, 256);\n  integralObjId/=256;\n  int green = intMod(integralObjId, 256);\n  integralObjId/=256;\n  int blue = intMod(integralObjId, 256);\n  int alpha = symId;\n  gl_FragColor = vec4(float(red), float(green), \n                      float(blue), float(alpha))/255.0;\n}",LINES_VS:"\nattribute vec3 attrPos;\nattribute vec4 attrColor;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nvarying vec4 vertColor;\nuniform float pointSize;\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  float distToCamera = vec4(modelviewMat * vec4(attrPos, 1.0)).z;\n  gl_PointSize = pointSize * 200.0 / abs(distToCamera); \n  vertColor = attrColor;\n}",HEMILIGHT_FS:"\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\nvarying float vertSelect;\n\nvoid main(void) {\n  float dp = dot(vertNormal, vec3(0.0, 0.0, 1.0));\n  float hemi = min(1.0, max(0.0, dp)*0.6+0.5);\n  gl_FragColor = vec4(vertColor.rgb*hemi, vertColor.a);\n  gl_FragColor.rgb = handleFog(handleSelect(gl_FragColor.rgb, vertSelect));\n  gl_FragColor = handleAlpha(gl_FragColor);\n}",PHONG_FS:"\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\nvarying vec3 vertPos;\nuniform float zoom;\nvarying float vertSelect;\n\nvoid main(void) {\n  vec3 eyePos = vec3(0.0, 0.0, zoom);\n  float dp = dot(vertNormal, normalize(eyePos - vertPos));\n  float hemi = min(1.0, max(0.3, dp)+0.2);\n  //hemi *= vertColor.a;\n  vec3 rgbColor = vertColor.rgb * hemi; \n  rgbColor += min(vertColor.rgb, 0.8) * pow(max(0.0, dp), 18.0);\n  rgbColor = handleSelect(rgbColor, vertSelect);\n  gl_FragColor = vec4(clamp(rgbColor, 0.0, 1.0), vertColor.a);\n  gl_FragColor.rgb = handleFog(gl_FragColor.rgb);\n  gl_FragColor = handleAlpha(gl_FragColor);\n}",HEMILIGHT_VS:"\nattribute vec3 attrPos;\nattribute vec4 attrColor;\nattribute vec3 attrNormal;\nattribute float attrSelect;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\nvarying vec3 vertPos;\nvarying float vertSelect;\nvoid main(void) {\n  vertPos = (modelviewMat * vec4(attrPos, 1.0)).xyz;\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  vec4 n = (modelviewMat * vec4(attrNormal, 0.0));\n  vertNormal = n.xyz;\n  vertColor = attrColor;\n  vertSelect = attrSelect;\n}",OUTLINE_FS:"\nvarying float vertAlpha;\nvarying float vertSelect;\n\nuniform vec3 outlineColor;\n\nvoid main() {\n  gl_FragColor = vec4(mix(outlineColor, selectionColor, \n                          step(0.5, vertSelect)), \n                      vertAlpha);\n  gl_FragColor.rgb = handleFog(gl_FragColor.rgb);\n  gl_FragColor = handleAlpha(gl_FragColor);\n}",OUTLINE_VS:"\nprecision ${PRECISION} float;\n\nattribute vec3 attrPos;\nattribute vec3 attrNormal;\nattribute vec4 attrColor;\nattribute float attrSelect;\n\nuniform vec3 outlineColor;\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nvarying float vertAlpha;\nvarying float vertSelect;\nuniform vec2 relativePixelSize;\nuniform float outlineWidth;\n\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  vec4 normal = modelviewMat * vec4(attrNormal, 0.0);\n  vertAlpha = attrColor.a;\n  vertSelect = attrSelect;\n  vec2 expansion = relativePixelSize * \n       (outlineWidth + 2.0 * step(0.5, attrSelect));\n  vec2 offset = normal.xy * expansion;\n  gl_Position.xy += gl_Position.w * offset;\n}",TEXT_VS:"\nprecision ${PRECISION} float;\n\nattribute vec3 attrCenter;\nattribute vec2 attrCorner;\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform mat4 rotationMat;\nvarying vec2 vertTex;\nuniform float width;\nuniform float height;\nvoid main() { \n  vec4 pos = modelviewMat* vec4(attrCenter, 1.0);\n  pos.z += 4.0;\n  gl_Position = projectionMat * pos;\n  gl_Position.xy += vec2(width,height)*attrCorner*gl_Position.w; \n  vertTex = (attrCorner+abs(attrCorner))/(2.0*abs(attrCorner)); \n}",TEXT_FS:"\nprecision ${PRECISION} float;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform sampler2D sampler;\nuniform float xScale;\nuniform float yScale;\nvarying vec2 vertTex;\nvoid main() { \n  vec2 texCoord = vec2(vertTex.x*xScale, vertTex.y*yScale);\n  gl_FragColor = texture2D(sampler, texCoord);\n  if (gl_FragColor.a == 0.0) { discard; }\n}"},u=function(){function e(e,t,n){this._element=e,this._element.addEventListener("touchmove",r.bind(this,this._touchMove)),this._element.addEventListener("touchstart",r.bind(this,this._touchStart)),this._element.addEventListener("touchend",r.bind(this,this._touchEnd)),this._element.addEventListener("touchcancel",r.bind(this,this._touchEnd)),this._touchState={scale:1,rotation:0,center:null},this._lastSingleTap=null,this._viewer=t,this._cam=n}function t(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function n(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.atan2(r,n)}return e.prototype={_extractEventAttributes:function(e,r){var i,a,o,s={};s.center=function(e){for(var t=0,n=0,r=0;r<e.length;++r)t+=e[r].clientX,n+=e[r].clientY;return{x:t/=e.length,y:n/=e.length}}(r.targetTouches),s.pointers=[];for(var l=0;l<r.targetTouches.length;++l){var u=r.targetTouches[l];s.pointers.push({x:u.clientX,y:u.clientY})}return s.numTouches=r.targetTouches.length,s.rotation=0,s.scale=1,s.deltaScale=0,s.deltaRotation=0,e.center&&(s.deltaCenter={x:s.center.x-e.center.x,y:s.center.y-e.center.y}),2!==e.numTouches||2!==s.numTouches?s:(e.initialPointers?s.initialPointers=e.initialPointers:s.initialPointers=e.pointers,s.scale=(i=s.initialPointers,a=s.pointers,o=t(i[0],i[1]),t(a[0],a[1])/(0===o?1:o)),s.deltaScale=s.scale-e.scale,s.rotation=function(e,t){return n(t[1],t[0])-n(e[1],e[0])}(s.initialPointers,s.pointers),s.deltaRotation=s.rotation-e.rotation,s)},_touchMove:function(e){e.preventDefault();var t=this._extractEventAttributes(this._touchState,e),n=4*-t.deltaScale;if(0!==n&&this._cam.zoom(n),2===t.numTouches&&2===this._touchState.numTouches){var r=.002*Math.tan(.5*this._cam.fieldOfViewY())*this._cam.zoom();this._cam.panXY(t.deltaCenter.x*r,t.deltaCenter.y*r)}var i=-t.deltaRotation;this._cam.rotateZ(i),1===t.numTouches&&1===this._touchState.numTouches&&(this._cam.rotateX(.005*t.deltaCenter.y),this._cam.rotateY(.005*t.deltaCenter.x)),this._viewer.requestRedraw(),this._touchState=t},_touchStart:function(e){if(e.preventDefault(),1===e.targetTouches.length){var t=(new Date).getTime();null!==this._lastSingleTap&&t-this._lastSingleTap<500&&this._viewer._mouseDoubleClick({clientX:e.targetTouches[0].clientX,clientY:e.targetTouches[0].clientY}),this._lastSingleTap=t}else this._lastSingleTap=null;this._touchState=this._extractEventAttributes(this._touchState,e)},_touchEnd:function(e){e.preventDefault()}},e}(),c=function(){function e(e,t,n,r){this._viewer=t,this._canvas=e,this._cam=n,this._canvas=e,this._animationTime=r,this._lastMouseUpTime=null,this._init()}return e.prototype={_centerOnClicked:function(e){null!==e&&this._viewer.setCenter(e.pos(),this._animationTime)},_mouseUp:function(e){var t=this._canvas,n=(new Date).getTime();if((null===this._lastMouseUpTime||n-this._lastMouseUpTime>300)&n-this._lastMouseDownTime<300){var r=this._canvas.domElement().getBoundingClientRect(),i=this._viewer.pick({x:e.clientX-r.left,y:e.clientY-r.top});this._viewer._dispatchEvent(e,"click",i)}this._lastMouseUpTime=n,t.removeEventListener("mousemove",this._mouseRotateListener),t.removeEventListener("mousemove",this._mousePanListener),t.removeEventListener("mouseup",this._mouseUpListener),document.removeEventListener("mouseup",this._mouseUpListener),document.removeEventListener("mousemove",this._mouseRotateListener),document.removeEventListener("mousemove",this._mousePanListener)},setCam:function(e){this._cam=e},_init:function(){return this._mousePanListener=r.bind(this,this._mousePan),this._mouseRotateListener=r.bind(this,this._mouseRotate),this._mouseUpListener=r.bind(this,this._mouseUp),this._canvas.onWheel(r.bind(this,this._mouseWheelFF),r.bind(this,this._mouseWheel)),this._canvas.on("dblclick",r.bind(this,this._mouseDoubleClick)),this._canvas.on("mousedown",r.bind(this,this._mouseDown)),!0},_mouseWheel:function(e){this._cam.zoom(e.wheelDelta<0?-1:1),e.preventDefault(),this._viewer.requestRedraw()},_mouseWheelFF:function(e){this._cam.zoom(e.deltaY<0?1:-1),e.preventDefault(),this._viewer.requestRedraw()},_mouseDoubleClick:function(e){var t=this._canvas.domElement().getBoundingClientRect(),n=this._viewer.pick({x:e.clientX-t.left,y:e.clientY-t.top});this._viewer._dispatchEvent(e,"doubleClick",n),this._viewer.requestRedraw()},_mouseDown:function(e){0===e.button&&(this._lastMouseDownTime=(new Date).getTime(),e.preventDefault(),!0===e.shiftKey?(this._canvas.on("mousemove",this._mousePanListener),document.addEventListener("mousemove",this._mousePanListener,!1)):(this._canvas.on("mousemove",this._mouseRotateListener),document.addEventListener("mousemove",this._mouseRotateListener,!1)),this._canvas.on("mouseup",this._mouseUpListener),document.addEventListener("mouseup",this._mouseUpListener,!1),this._lastMousePos={x:e.pageX,y:e.pageY})},_mouseRotate:function(e){var t={x:e.pageX,y:e.pageY},n=t.x-this._lastMousePos.x,r=t.y-this._lastMousePos.y;this._cam.rotateX(.005*r),this._cam.rotateY(.005*n),this._lastMousePos=t,this._viewer.requestRedraw()},_mousePan:function(e){var t={x:e.pageX,y:e.pageY},n=t.x-this._lastMousePos.x,r=t.y-this._lastMousePos.y,i=.002*Math.tan(.5*this._cam.fieldOfViewY())*this._cam.zoom();this._cam.panXY(i*n,i*r),this._lastMousePos=t,this._viewer.requestRedraw()}},e}(),h=function(){var t,n,r=e.vec3,i=e.vec4,a=e.mat3,o=e.quat,s=(t=r.create(),function(e,n,i){return r.cross(t,e,n),Math.atan2(r.dot(t,i),r.dot(e,n))}),l=function(){var e=r.create();return function(t,n){return r.copy(e,n),Math.abs(n[0])<Math.abs(n[1])?Math.abs(n[0])<Math.abs(n[2])?e[0]+=1:e[2]+=1:Math.abs(n[1])<Math.abs(n[2])?e[1]+=1:e[2]+=1,r.cross(t,n,e)}}(),u=(n=r.create(),function(e,t,i,a,o,s,l){var u=s*s,c=u*(3-2*s),h=1-c,f=u*(s-2)+s,d=u*(s-1);r.copy(n,t),r.scale(n,n,h),r.scaleAndAdd(n,n,i,f),r.scaleAndAdd(n,n,a,c),r.scaleAndAdd(n,n,o,d),e[l]=n[0],e[l+1]=n[1],e[l+2]=n[2]});function c(e,t,n){return n?e*t:t*(e-1)+1}function h(e,t){this._center=e||r.create(),this._radius=t||1}var f,d,p,m,v,_,g,y=(f=a.create(),d=a.create(),p=a.create(),m=a.create(),v=o.create(),_=r.create(),g=r.create(),function(e){for(var t=o.fromValues(0,0,0,1),n=0;n<24;++n){a.fromQuat(f,t);var s=a.transpose(p,f);a.mul(d,f,a.mul(m,e,s)),r.set(_,d[5],d[2],d[1]),r.set(g,Math.abs(_[0]),Math.abs(_[1]),Math.abs(_[2]));var l=g[0]>g[1]&&g[0]>g[2]?0:g[1]>g[2]?1:2,u=(l+1)%3,c=(l+2)%3;if(0===_[l])break;var h=(d[3*c+c]-d[3*u+u])/(2*_[l]),y=h>0?1:-1,b=y/((h*=y)+(h<1e6?Math.sqrt(h*h+1):h)),w=1/Math.sqrt(b*b+1);if(1===w)break;if(i.set(v,0,0,0,0),v[l]=y*Math.sqrt((1-w)/2),v[l]*=-1,v[3]=Math.sqrt(1-v[l]*v[l]),1===v[3])break;t=o.mul(t,t,v),o.normalize(t,t)}return t});h.prototype.center=function(){return this._center},h.prototype.radius=function(){return this._radius};var b=function(e,t,n,i,a){a?r.cross(i,t,n):l(i,t),r.cross(n,i,t),r.normalize(i,i),r.normalize(n,n),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=i[0],e[4]=i[1],e[5]=i[2],e[6]=t[0],e[7]=t[1],e[8]=t[2]};return{signedAngle:s,axisRotation:function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=a*a,u=a*o,c=a*s,h=o*o,f=o*s,d=s*s;return e[0]=l+i-l*i,e[1]=u-i*u-r*s,e[2]=c-i*c+r*o,e[3]=u-i*u+r*s,e[4]=h+i-i*h,e[5]=f-i*f-r*a,e[6]=c-i*c-r*o,e[7]=f-i*f+r*a,e[8]=d+i-i*d,e},ortho:l,diagonalizer:y,catmullRomSpline:function(e,t,n,i,a,o){i=i||.5;var s=null,l=3*c(t,n,a=a||!1);s=o?o.request(l):new Float32Array(l);var h,f,d,p=0,m=1/n,v=r.create(),_=r.create(),g=r.create(),y=r.create(),b=r.create(),w=r.create();for(r.set(y,e[0],e[1],e[2]),r.set(b,e[3],e[4],e[5]),a?(r.set(g,e[e.length-3],e[e.length-2],e[e.length-1]),r.sub(v,b,g),r.scale(v,v,i)):(r.set(g,e[0],e[1],e[2]),r.set(v,0,0,0)),h=1,d=t-1;h<d;++h){for(r.set(w,e[3*(h+1)],e[3*(h+1)+1],e[3*(h+1)+2]),r.sub(_,w,y),r.scale(_,_,i),f=0;f<n;++f)u(s,y,v,b,_,m*f,p),p+=3;r.copy(g,y),r.copy(y,b),r.copy(b,w),r.copy(v,_)}for(a?(r.set(w,e[0],e[1],e[3]),r.sub(_,w,y),r.scale(_,_,i)):r.set(_,0,0,0),f=0;f<n;++f)u(s,y,v,b,_,m*f,p),p+=3;if(!a)return s[p]=e[3*(t-1)+0],s[p+1]=e[3*(t-1)+1],s[p+2]=e[3*(t-1)+2],s;for(r.copy(g,y),r.copy(y,b),r.copy(b,w),r.copy(v,_),r.set(w,e[3],e[4],e[5]),r.sub(_,w,y),r.scale(_,_,i),f=0;f<n;++f)u(s,y,v,b,_,m*f,p),p+=3;return s},cubicHermiteInterpolate:u,interpolateScalars:function(e,t){for(var n=new Float32Array(t*(e.length-1)+1),r=0,i=0,a=0,o=1/t,s=0;s<e.length-1;++s){i=e[s],a=e[s+1];for(var l=0;l<t;++l){var u=o*l;n[r+0]=i*(1-u)+a*u,r+=1}}return n[r+0]=a,n},catmullRomSplineNumPoints:c,Sphere:h,buildRotation:b}}(),f=function(){var t,n,r=e.vec3;function i(e,t){this._arcs=t,this._stacks=e,this._indices=new Uint16Array(3*t*e*2),this._verts=new Float32Array(3*t*e);var n,r,i=Math.PI/(e-1),a=2*Math.PI/t;for(n=0;n<this._stacks;++n){var o=Math.sin(n*i),s=Math.cos(n*i);for(r=0;r<this._arcs;++r){var l=o*Math.cos(r*a),u=o*Math.sin(r*a);this._verts[3*(r+n*this._arcs)]=l,this._verts[3*(r+n*this._arcs)+1]=u,this._verts[3*(r+n*this._arcs)+2]=s}}var c=0;for(n=0;n<this._stacks-1;++n)for(r=0;r<this._arcs;++r)this._indices[c]=n*this._arcs+r,this._indices[c+1]=n*this._arcs+(r+1)%this._arcs,this._indices[c+2]=(n+1)*this._arcs+r,c+=3,this._indices[c]=n*this._arcs+(r+1)%this._arcs,this._indices[c+1]=(n+1)*this._arcs+(r+1)%this._arcs,this._indices[c+2]=(n+1)*this._arcs+r,c+=3}function a(e,t,n){var i=h.catmullRomSpline(e,e.length/3,t,n,!0);this._indices=new Uint16Array(2*i.length),this._verts=i,this._normals=new Float32Array(i.length),this._arcs=i.length/3;for(var a=r.create(),o=0;o<this._arcs;++o){var s=0===o?this._arcs-1:o-1,l=o===this._arcs-1?0:o+1;a[0]=this._verts[3*l+1]-this._verts[3*s+1],a[1]=this._verts[3*s]-this._verts[3*l],r.normalize(a,a),this._normals[3*o]=a[0],this._normals[3*o+1]=a[1],this._normals[3*o+2]=a[2]}for(o=0;o<this._arcs;++o)this._indices[6*o]=o,this._indices[6*o+1]=o+this._arcs,this._indices[6*o+2]=(o+1)%this._arcs+this._arcs,this._indices[6*o+3]=o,this._indices[6*o+4]=(o+1)%this._arcs+this._arcs,this._indices[6*o+5]=(o+1)%this._arcs}function o(e){this._arcs=e,this._indices=new Uint16Array(3*e*2),this._verts=new Float32Array(3*e*2),this._normals=new Float32Array(3*e*2);for(var t=2*Math.PI/this._arcs,n=0;n<this._arcs;++n){var r=Math.cos(t*n),i=Math.sin(t*n);this._verts[3*n]=r,this._verts[3*n+1]=i,this._verts[3*n+2]=-.5,this._verts[3*e+3*n]=r,this._verts[3*e+3*n+1]=i,this._verts[3*e+3*n+2]=.5,this._normals[3*n]=r,this._normals[3*n+1]=i,this._normals[3*e+3*n]=r,this._normals[3*e+3*n+1]=i}for(n=0;n<this._arcs;++n)this._indices[6*n]=n%this._arcs,this._indices[6*n+1]=e+(n+1)%this._arcs,this._indices[6*n+2]=(n+1)%this._arcs,this._indices[6*n+3]=n%this._arcs,this._indices[6*n+4]=e+n%this._arcs,this._indices[6*n+5]=e+(n+1)%this._arcs}return i.prototype={addTransformed:(t=r.create(),n=r.create(),function(e,i,a,o,s){for(var l=e.numVerts(),u=0;u<this._stacks*this._arcs;++u)r.set(n,this._verts[3*u],this._verts[3*u+1],this._verts[3*u+2]),r.copy(t,n),r.scale(t,t,a),r.add(t,t,i),e.addVertex(t,n,o,s);for(u=0;u<this._indices.length/3;++u)e.addTriangle(l+this._indices[3*u],l+this._indices[3*u+1],l+this._indices[3*u+2])}),numIndices:function(){return this._indices.length},numVerts:function(){return this._verts.length/3}},a.prototype={addTransformed:function(){var e=r.create(),t=r.create();return function(n,i,a,o,s,l,u,c){for(var h=this._arcs,f=this._normals,d=this._verts,p=n.numVerts()-h,m=0;m<h;++m)r.set(e,a*d[3*m],a*d[3*m+1],0),r.transformMat3(e,e,o),r.add(e,e,i),r.set(t,f[3*m],f[3*m+1],0),r.transformMat3(t,t,o),n.addVertex(e,t,s,c);if(!l)if(0!==u)for(m=0;m<h;++m)n.addTriangle(p+(m+u)%h,p+m+h,p+(m+1)%h+h),n.addTriangle(p+(m+u)%h,p+(m+1)%h+h,p+(m+1+u)%h);else for(m=0;m<this._indices.length/3;++m)n.addTriangle(p+this._indices[3*m],p+this._indices[3*m+1],p+this._indices[3*m+2])}}()},o.prototype={numVerts:function(){return this._verts.length/3},numIndices:function(){return this._indices.length},addTransformed:function(){var e=r.create(),t=r.create();return function(n,i,a,o,s,l,u,c,h){for(var f=n.numVerts(),d=this._verts,p=this._normals,m=this._arcs,v=0;v<2*m;++v){r.set(e,o*d[3*v],o*d[3*v+1],a*d[3*v+2]),r.transformMat3(e,e,s),r.add(e,e,i),r.set(t,p[3*v],p[3*v+1],p[3*v+2]),r.transformMat3(t,t,s);var _=v<m?c:h;n.addVertex(e,t,v<m?l:u,_)}var g=this._indices;for(v=0;v<g.length/3;++v)n.addTriangle(f+g[3*v],f+g[3*v+1],f+g[3*v+2])}}()},{TubeProfile:a,ProtoCylinder:o,ProtoSphere:i}}(),O=function(){function e(e){this._children=[],this._visible=!0,this._name=name||"",this._gl=e,this._order=1}return e.prototype={order:function(e){return void 0!==e&&(this._order=e),this._order},add:function(e){this._children.push(e)},draw:function(e,t,n,r){for(var i=0,a=this._children.length;i!==a;++i)this._children[i].draw(e,t,n,r)},show:function(){this._visible=!0},hide:function(){this._visible=!1},name:function(e){return void 0!==e&&(this._name=e),this._name},destroy:function(){for(var e=0;e<this._children.length;++e)this._children[e].destroy()},visible:function(){return this._visible}},e}(),z=function(){var t,n=e.vec3,i=(t=n.create(),function(e,r,i){for(var a=0;a<r.length;++a)for(var o=r[a],s=e.chainsByName(o.chains()),l=0;l<o.matrices().length;++l)for(var u=o.matrix(l),c=0;c<s.length;++c)for(var h=s[c],f=0;f<h.residues().length;++f){var d=h.residues()[f].centralAtom();null!==d&&(n.transformMat4(t,d.pos(),u),i(d,t))}});function a(e){O.call(this,e),this._idRanges=[],this._vertAssocs=[],this._showRelated=null,this._selection=null}return r.derive(a,O,{setShowRelated:function(e){if(!e||"asym"===e||null!==this.structure().assembly(e))return this._showRelated=e,e;console.error("no assembly with name",e,". Falling back to asymmetric unit")},symWithIndex:function(e){if("asym"===this.showRelated())return null;var t=this.structure().assembly(this.showRelated());if(!t)return null;for(var n=t.generators(),r=0;r<n.length;++r){if(n[r].matrices().length>e)return n[r].matrix(e);e-=n[r].matrices().length}return null},showRelated:function(){return this._showRelated},select:function(e){return this.structure().select(e)},structure:function(){return this._vertAssocs[0]._structure},getColorForAtom:function(e,t){return this._vertAssocs[0].getColorForAtom(e,t)},addIdRange:function(e){this._idRanges.push(e)},destroy:function(){O.prototype.destroy.call(this);for(var e=0;e<this._idRanges.length;++e)this._idRanges[e].recycle()},eachCentralAtom:function(e){var t=this.structure(),n=t.assembly(this.showRelated());return null===n?function(e,t){e.eachResidue(function(e){var n=e.centralAtom();null!==n&&t(n,n.pos())})}(t,e):i(t,n.generators(),e)},addVertAssoc:function(e){this._vertAssocs.push(e)},_vertArraysInvolving:function(e){for(var t=this.vertArrays(),n=[],r={},i=0;i<e.length;++i)r[e[i]]=!0;for(var a=0;a<t.length;++a)!0===r[t[a].chain()]&&n.push(t[a]);return n},_drawSymmetryRelated:function(e,t,n){for(var r=n.generators(),i=0;i<r.length;++i){var a=r[i],o=this._vertArraysInvolving(a.chains());this._drawVertArrays(e,t,o,a.matrices())}},_updateProjectionIntervalsAsym:function(e,t,n,r,i,a){for(var o=this.vertArrays(),s=0;s<o.length;++s)o[s].updateProjectionIntervals(e,t,n,r,i,a)},updateProjectionIntervals:function(e,t,n,r,i,a){if(this._visible){var o=this.showRelated();if("asym"===o)return this._updateProjectionIntervalsAsym(e,t,n,r,i,a);for(var s=this.structure().assembly(o).generators(),l=0;l<s.length;++l)for(var u=s[l],c=this._vertArraysInvolving(u.chains()),h=0;h<u.matrices().length;++h)for(var f=0;f<c.length;++f){var d=u.matrix(h);c[f].updateProjectionIntervals(e,t,n,r,i,a,d)}}},_updateSquaredSphereRadiusAsym:function(e,t){for(var n=this.vertArrays(),r=0;r<n.length;++r)t=n[r].updateSquaredSphereRadius(e,t);return t},updateSquaredSphereRadius:function(e,t){if(!this._visible)return t;var n=this.showRelated();if("asym"===n)return this._updateSquaredSphereRadiusAsym(e,t);for(var r=this.structure().assembly(n).generators(),i=0;i<r.length;++i)for(var a=r[i],o=this._vertArraysInvolving(a.chains()),s=0;s<a.matrices().length;++s)for(var l=0;l<o.length;++l)t=o[l].updateSquaredSphereRadius(e,t);return t},draw:function(e,t,n,r){if(this._visible){var i=this.shaderForStyleAndPass(t,n,r);if(i){var a=this.showRelated();if("asym"===a)return this._drawVertArrays(e,i,this.vertArrays(),null);var o=this.structure().assembly(a);return this._drawSymmetryRelated(e,i,o)}}},colorBy:function(e,t){console.time("BaseGeom.colorBy"),this._ready=!1,t=t||this.structure();for(var n=0;n<this._vertAssocs.length;++n)this._vertAssocs[n].recolor(e,t);console.timeEnd("BaseGeom.colorBy")},setOpacity:function(e,t){console.time("BaseGeom.setOpacity"),this._ready=!1,t=t||this.structure();for(var n=0;n<this._vertAssocs.length;++n)this._vertAssocs[n].setOpacity(e,t);console.timeEnd("BaseGeom.setOpacity")},setSelection:function(e){console.time("BaseGeom.setSelection"),this._selection=e,this._ready=!1;for(var t=0;t<this._vertAssocs.length;++t)this._vertAssocs[t].setSelection(e);console.timeEnd("BaseGeom.setSelection")},selection:function(){return null===this._selection&&(this._selection=this.structure().createEmptyView()),this._selection}}),a}(),V=function(){var t,n=e.vec3;function r(e,t,n){this._gl=e,this._vertBuffer=e.createBuffer(),this._float32Allocator=n||null,this._ready=!1,this._boundingSphere=null;var r=this._FLOATS_PER_VERT*t;this._vertData=n.request(r)}return r.prototype={setColor:function(e,t,n,r,i){var a=e*this._FLOATS_PER_VERT+this._COLOR_OFFSET;this._vertData[a+0]=t,this._vertData[a+1]=n,this._vertData[a+2]=r,this._vertData[a+3]=i,this._ready=!1},getColor:function(e,t){var n=e*this._FLOATS_PER_VERT+this._COLOR_OFFSET;return t[0]=this._vertData[n+0],t[1]=this._vertData[n+1],t[2]=this._vertData[n+2],t[3]=this._vertData[n+3],t},setOpacity:function(e,t){var n=e*this._FLOATS_PER_VERT+this._COLOR_OFFSET;this._vertData[n+3]=t,this._ready=!1},setSelected:function(e,t){var n=e*this._FLOATS_PER_VERT+this._SELECT_OFFSET;this._vertData[n]=t,this._ready=!1},boundingSphere:function(){return this._boundingSphere||(this._boundingSphere=this._calculateBoundingSphere()),this._boundingSphere},_calculateBoundingSphere:function(){var e=this.numVerts();if(0===e)return null;var t,r,i=n.create();for(r=0;r<e;++r)t=r*this._FLOATS_PER_VERT,i[0]+=this._vertData[t+0],i[1]+=this._vertData[t+1],i[2]+=this._vertData[t+2];n.scale(i,i,1/e);var a=0;for(r=0;r<e;++r){t=r*this._FLOATS_PER_VERT;var o=i[0]-this._vertData[t+0],s=i[1]-this._vertData[t+1],l=i[2]-this._vertData[t+2];a=Math.max(a,o*o+s*s+l*l)}return new h.Sphere(i,Math.sqrt(a))},destroy:function(){this._gl.deleteBuffer(this._vertBuffer),this._float32Allocator.release(this._vertData)},bindBuffers:function(){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._vertBuffer),this._ready||(this._gl.bufferData(this._gl.ARRAY_BUFFER,this._vertData,this._gl.STATIC_DRAW),this._ready=!0)},updateSquaredSphereRadius:(t=n.create(),function(e,r,i){var a=this.boundingSphere();if(!a)return r;if(i)return n.transformMat4(t,a.center(),i),Math.max(n.sqrDist(t,e),r);var o=a.radius()*a.radius();return Math.max(n.sqrDist(a.center(),e)+o,r)}),updateProjectionIntervals:function(){var e=n.create();return function(t,r,i,a,o,s,l){var u=this.boundingSphere();if(u){l?n.transformMat4(e,u.center(),l):n.copy(e,u.center());var c=n.dot(t,e),h=n.dot(r,e),f=n.dot(i,e);a.update(c-u.radius()),a.update(c+u.radius()),o.update(h-u.radius()),o.update(h+u.radius()),s.update(f-u.radius()),s.update(f+u.radius())}}}()},r}(),d=function(){function e(e,t,n){V.call(this,e,t,n),this._numVerts=0,this._primitiveType=this._gl.LINES}return r.derive(e,V,{_FLOATS_PER_VERT:9,_POS_OFFSET:0,_COLOR_OFFSET:3,_ID_OFFSET:7,_SELECT_OFFSET:8,numVerts:function(){return this._numVerts},setDrawAsPoints:function(e){this._primitiveType=e?this._gl.POINTS:this._gl.LINES},addPoint:function(e,t,n){var r=this._FLOATS_PER_VERT*this._numVerts;this._vertData[r++]=e[0],this._vertData[r++]=e[1],this._vertData[r++]=e[2],this._vertData[r++]=t[0],this._vertData[r++]=t[1],this._vertData[r++]=t[2],this._vertData[r++]=t[3],this._vertData[r++]=n,this._vertData[r++]=0,this._numVerts+=1,this._ready=!1,this._boundingSphere=null},addLine:function(e,t,n,r,i,a){this.addPoint(e,t,i),this.addPoint(n,r,a)},bindAttribs:function(e){this._gl.vertexAttribPointer(e.posAttrib,3,this._gl.FLOAT,!1,4*this._FLOATS_PER_VERT,4*this._POS_OFFSET),-1!==e.colorAttrib&&(this._gl.vertexAttribPointer(e.colorAttrib,4,this._gl.FLOAT,!1,4*this._FLOATS_PER_VERT,4*this._COLOR_OFFSET),this._gl.enableVertexAttribArray(e.colorAttrib)),this._gl.enableVertexAttribArray(e.posAttrib),-1!==e.objIdAttrib&&(this._gl.vertexAttribPointer(e.objIdAttrib,1,this._gl.FLOAT,!1,4*this._FLOATS_PER_VERT,4*this._ID_OFFSET),this._gl.enableVertexAttribArray(e.objIdAttrib)),-1!==e.selectAttrib&&(this._gl.vertexAttribPointer(e.selectAttrib,1,this._gl.FLOAT,!1,4*this._FLOATS_PER_VERT,4*this._SELECT_OFFSET),this._gl.enableVertexAttribArray(e.selectAttrib))},releaseAttribs:function(e){this._gl.disableVertexAttribArray(e.posAttrib),-1!==e.colorAttrib&&this._gl.disableVertexAttribArray(e.colorAttrib),-1!==e.objIdAttrib&&this._gl.disableVertexAttribArray(e.objIdAttrib),-1!==e.selectAttrib&&this._gl.disableVertexAttribArray(e.selectAttrib)},bind:function(e){this.bindBuffers(),this.bindAttribs(e)},draw:function(){this._gl.drawArrays(this._primitiveType,0,this._numVerts)}}),e}(),p=L=function(){function e(e,t,n,r,i){V.call(this,e,t,r),this._indexBuffer=e.createBuffer(),this._uint16Allocator=i,this._numVerts=0,this._maxVerts=t,this._numTriangles=0,this._indexData=i.request(n)}return r.derive(e,V,{destroy:function(){V.prototype.destroy.call(this),this._gl.deleteBuffer(this._indexBuffer),this._uint16Allocator.release(this._indexData)},setIndexData:function(e){this._ready=!1,this._numTriangles=e.length/3;for(var t=0;t<e.length;++t)this._indexData[t]=e[t]},setVertData:function(e){this._ready=!1,this._numVerts=e.length/this._FLOATS_PER_VERT;for(var t=0;t<e.length;++t)this._vertData[t]=e[t]},numVerts:function(){return this._numVerts},maxVerts:function(){return this._maxVerts},numIndices:function(){return 3*this._numTriangles},addVertex:function(e,t,n,r){if(this._numVerts!==this._maxVerts){var i=this._numVerts*this._FLOATS_PER_VERT;this._vertData[i++]=e[0],this._vertData[i++]=e[1],this._vertData[i++]=e[2],this._vertData[i++]=t[0],this._vertData[i++]=t[1],this._vertData[i++]=t[2],this._vertData[i++]=n[0],this._vertData[i++]=n[1],this._vertData[i++]=n[2],this._vertData[i++]=n[3],this._vertData[i++]=r,this._vertData[i++]=0,this._numVerts+=1,this._ready=!1}else console.error("maximum number of vertices reached")},_FLOATS_PER_VERT:12,_BYTES_PER_VERT:48,_OBJID_OFFSET:10,_OBJID_BYTE_OFFSET:40,_SELECT_OFFSET:11,_SELECT_BYTE_OFFSET:44,_COLOR_OFFSET:6,_COLOR_BYTE_OFFSET:24,_NORMAL_OFFSET:3,_NORMAL_BYTE_OFFSET:12,_POS_OFFSET:0,_POS_BYTE_OFFSET:0,addTriangle:function(e,t,n){var r=3*this._numTriangles;r+2>=this._indexData.length||(this._indexData[r++]=e,this._indexData[r++]=t,this._indexData[r++]=n,this._numTriangles+=1,this._ready=!1)},bindBuffers:function(){var e=this._ready,t=this._gl;V.prototype.bindBuffers.call(this),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e||t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indexData,t.STATIC_DRAW)},bindAttribs:function(e){var t=this._gl,n=this._BYTES_PER_VERT;t.enableVertexAttribArray(e.posAttrib),t.vertexAttribPointer(e.posAttrib,3,t.FLOAT,!1,n,this._POS_BYTE_OFFSET),-1!==e.normalAttrib&&(t.enableVertexAttribArray(e.normalAttrib),t.vertexAttribPointer(e.normalAttrib,3,t.FLOAT,!1,n,this._NORMAL_BYTE_OFFSET)),-1!==e.colorAttrib&&(t.vertexAttribPointer(e.colorAttrib,4,t.FLOAT,!1,n,this._COLOR_BYTE_OFFSET),t.enableVertexAttribArray(e.colorAttrib)),-1!==e.objIdAttrib&&(t.vertexAttribPointer(e.objIdAttrib,1,t.FLOAT,!1,n,this._OBJID_BYTE_OFFSET),t.enableVertexAttribArray(e.objIdAttrib)),-1!==e.selectAttrib&&(t.vertexAttribPointer(e.selectAttrib,1,t.FLOAT,!1,n,this._SELECT_BYTE_OFFSET),t.enableVertexAttribArray(e.selectAttrib))},releaseAttribs:function(e){var t=this._gl;t.disableVertexAttribArray(e.posAttrib),-1!==e.colorAttrib&&t.disableVertexAttribArray(e.colorAttrib),-1!==e.normalAttrib&&t.disableVertexAttribArray(e.normalAttrib),-1!==e.objIdAttrib&&t.disableVertexAttribArray(e.objIdAttrib),-1!==e.selectAttrib&&t.disableVertexAttribArray(e.selectAttrib)},bind:function(e){this.bindBuffers(),this.bindAttribs(e)},draw:function(){var e=this._gl;e.drawElements(e.TRIANGLES,3*this._numTriangles,e.UNSIGNED_SHORT,0)}}),e}(),m=function(e){function t(t,n,r,i){e.call(this,n,r,i),this._chain=t}function n(e,t,n,r,i,a){L.call(this,t,n,r,i,a),this._chain=e}return r.derive(t,e,{chain:function(){return this._chain},drawSymmetryRelated:function(e,t,n){this.bind(t);for(var r=0;r<n.length;++r)e.bind(t,n[r]),this._gl.uniform1i(t.symId,r),this.draw();this.releaseAttribs(t)}}),r.derive(n,L,{chain:function(){return this._chain}}),n.prototype.drawSymmetryRelated=t.prototype.drawSymmetryRelated,{LineChainData:t,MeshChainData:n}}(d),v=function(e,t){var n=m.MeshChainData;function i(e,t,n){z.call(this,e),this._indexedVAs=[],this._float32Allocator=t,this._uint16Allocator=n,this._remainingVerts=null,this._remainingIndices=null}return r.derive(i,z,{_boundedVertArraySize:function(e){return Math.min(65536,e)},addChainVertArray:function(e,t,r){this._remainingVerts=t,this._remainingIndices=r;var i=new n(e.name(),this._gl,this._boundedVertArraySize(t),r,this._float32Allocator,this._uint16Allocator);return this._indexedVAs.push(i),i},addVertArray:function(e,n){this._remainingVerts=e,this._remainingIndices=n;var r=new t(this._gl,this._boundedVertArraySize(e),n,this._float32Allocator,this._uint16Allocator);return this._indexedVAs.push(r),r},vertArrayWithSpaceFor:function(e){var r=this._indexedVAs[this._indexedVAs.length-1];if(r.maxVerts()-r.numVerts()>=e)return r;this._remainingVerts-=r.numVerts(),this._remainingIndices-=r.numIndices(),e=this._boundedVertArraySize(this._remainingVerts);var i=null;return i=r instanceof n?new n(r.chain(),this._gl,e,this._remainingIndices,this._float32Allocator,this._uint16Allocator):new t(this._gl,e,this._remainingIndices,this._float32Allocator,this._uint16Allocator),this._indexedVAs.push(i),i},vertArray:function(e){return this._indexedVAs[e]},destroy:function(){z.prototype.destroy.call(this);for(var e=0;e<this._indexedVAs.length;++e)this._indexedVAs[e].destroy();this._indexedVAs=[]},numVerts:function(){return this._indexedVAs[0].numVerts()},shaderForStyleAndPass:function(e,t,n){if("normal"===n)return"hemilight"===t?e.hemilight:e.phong;if("select"===n)return e.select;if("outline"===n)return e.outline;var r=e[n];return void 0!==r?r:null},_drawVertArrays:function(e,t,n,r){var i;if(r)for(i=0;i<n.length;++i)n[i].drawSymmetryRelated(e,t,r);else for(e.bind(t),this._gl.uniform1i(t.symId,255),i=0;i<n.length;++i)n[i].bind(t),n[i].draw(),n[i].releaseAttribs(t)},vertArrays:function(){return this._indexedVAs},addVertex:function(e,t,n,r){this._indexedVAs[0].addVertex(e,t,n,r)},addTriangle:function(e,t,n){this._indexedVAs[0].addTriangle(e,t,n)}}),i}(0,p),_=function(e){var t=m.LineChainData;function n(e,t){z.call(this,e),this._vertArrays=[],this._float32Allocator=t,this._lineWidth=.5,this._pointSize=1}return r.derive(n,z,{addChainVertArray:function(e,n){var r=new t(e.name(),this._gl,n,this._float32Allocator);return this._vertArrays.push(r),r},setLineWidth:function(e){this._lineWidth=e},setPointSize:function(e){this._pointSize=e},vertArrays:function(){return this._vertArrays},shaderForStyleAndPass:function(e,t,n){return"outline"===n?e.selectLines:"select"===n?e.select:e.lines},destroy:function(){z.prototype.destroy.call(this);for(var e=0;e<this._vertArrays.length;++e)this._vertArrays[e].destroy();this._vertArrays=[]},_drawVertArrays:function(e,t,n,r){var i,a=e.upsamplingFactor();if(-1!==t.selectAttrib&&(a=4*e.upsamplingFactor()),r)for(e.bind(t),this._gl.lineWidth(a*this._lineWidth),t.pointSize&&this._gl.uniform1f(t.pointSize,a*this._pointSize),i=0;i<n.length;++i)n[i].drawSymmetryRelated(e,t,r);else for(e.bind(t),this._gl.lineWidth(a*this._lineWidth),this._gl.uniform1i(t.symId,255),t.pointSize&&this._gl.uniform1f(t.pointSize,a*this._pointSize),i=0;i<n.length;++i)n[i].bind(t),n[i].draw(),n[i].releaseAttribs(t)},vertArray:function(){return this._va}}),n}(),g=function(){function e(e,t){this._structure=e,this._assocs=[],this._callBeginEnd=t}function n(e,t,n){this._structure=e,this._assocs=[],this._callBeginEnd=n,this._interpolation=t||1,this._perResidueColors={}}return e.prototype={addAssoc:function(e,t,n,r){this._assocs.push({atom:e,vertexArray:t,vertStart:n,vertEnd:r})},recolor:function(e,t){var n=new Float32Array(4*t.atomCount());this._callBeginEnd&&e.begin(this._structure);var r={};t.eachAtom(function(t,i){r[t.index()]=i,e.colorFor(t,n,4*i)}),this._callBeginEnd&&e.end(this._structure);for(var i=0;i<this._assocs.length;++i){var a=this._assocs[i],o=r[a.atom.index()];if(void 0!==o)for(var s=n[4*o+0],l=n[4*o+1],u=n[4*o+2],c=n[4*o+3],h=a.vertexArray,f=a.vertStart;f<a.vertEnd;++f)h.setColor(f,s,l,u,c)}},getColorForAtom:function(e,t){for(var n=0;n<this._assocs.length;++n){var r=this._assocs[n];if(r.atom.full()===e.full())return r.vertexArray.getColor(r.vertStart,t)}return null},setSelection:function(e){var t={};e.eachAtom(function(e){t[e.index()]=!0});for(var n=0;n<this._assocs.length;++n)for(var r=this._assocs[n],i=!0!==t[r.atom.index()]?0:1,a=r.vertexArray,o=r.vertStart;o<r.vertEnd;++o)a.setSelected(o,i)},setOpacity:function(e,t){var n={};t.eachAtom(function(e){n[e.index()]=!0});for(var r=0;r<this._assocs.length;++r){var i=this._assocs[r];if(!0===n[i.atom.index()])for(var a=i.vertexArray,o=i.vertStart;o<i.vertEnd;++o)a.setOpacity(o,e)}}},n.prototype={setPerResidueColors:function(e,t){this._perResidueColors[e]=t},addAssoc:function(e,t,n,r,i){this._assocs.push({traceIndex:e,slice:n,vertStart:r,vertEnd:i,vertexArray:t})},recolor:function(e,n){this._callBeginEnd&&e.begin(this._structure);var r,i,a=[],o=this._structure.backboneTraces();for(console.assert(this._perResidueColors,"per-residue colors must be set for recoloring to work"),r=0;r<o.length;++r){var s=this._perResidueColors[r];console.assert(s,"no per-residue colors. Seriously, man?");var l=0,u=o[r];for(i=0;i<u.length();++i)n.containsResidue(u.residueAt(i))?(e.colorFor(u.centralAtomAt(i),s,l),l+=4):l+=4;this._interpolation>1?a.push(t.interpolateColor(s,this._interpolation)):a.push(s)}for(r=0;r<this._assocs.length;++r){var c=this._assocs[r],h=c.slice,f=a[c.traceIndex],d=f[4*h],p=f[4*h+1],m=f[4*h+2],v=f[4*h+3],_=c.vertexArray;for(i=c.vertStart;i<c.vertEnd;++i)_.setColor(i,d,p,m,v)}this._callBeginEnd&&e.end(this._structure)},getColorForAtom:function(e,t){var n,r,i=this._structure.backboneTraces(),a=e.full().residue();for(n=0;n<i.length;++n){var o=this._perResidueColors[n],s=0,l=i[n];for(r=0;r<l.length();++r){if(a===l.residueAt(r).full())return t[0]=o[s+0],t[1]=o[s+1],t[2]=o[s+2],t[3]=o[s+3],t;s+=4}}return null},setSelection:function(e){var t,n,r=[],i=this._structure.backboneTraces();for(t=0;t<i.length;++t){var a=new Float32Array(this._perResidueColors[t].length),o=0,s=i[t];for(n=0;n<s.length();++n){var l=e.containsResidue(s.residueAt(n))?1:0;a[o]=l,o+=1}this._interpolation>1?r.push(h.interpolateScalars(a,this._interpolation)):r.push(a)}for(t=0;t<this._assocs.length;++t){var u=this._assocs[t],c=u.slice,f=r[u.traceIndex][c],d=u.vertexArray;for(n=u.vertStart;n<u.vertEnd;++n)d.setSelected(n,f)}},setOpacity:function(e,n){var r,i,a=[],o=this._structure.backboneTraces();for(r=0;r<o.length;++r){var s=this._perResidueColors[r],l=0,u=o[r];for(i=0;i<u.length();++i)n.containsResidue(u.residueAt(i))?(s[l+3]=e,l+=4):l+=4;this._interpolation>1?a.push(t.interpolateColor(s,this._interpolation)):a.push(s)}for(r=0;r<this._assocs.length;++r){var c=this._assocs[r],h=c.slice,f=a[c.traceIndex][4*h+3],d=c.vertexArray;for(i=c.vertStart;i<c.vertEnd;++i)d.setOpacity(i,f)}}},{TraceVertexAssoc:n,AtomVertexAssoc:e}}(),y=function(n,r,i,a){var o,s,l,u=e.vec3,c=e.vec4,f=e.mat3,d=n.TubeProfile,p=n.ProtoSphere,m=n.ProtoCylinder,v=a.TraceVertexAssoc,_=a.AtomVertexAssoc,g=t.interpolateColor,y={},b=.7071,w=[-b,-b,0,b,-b,0,b,b,0,-b,b,0],T=[-6*b,-.9*b,0,-5.8*b,-1*b,0,5.8*b,-1*b,0,6*b,-.9*b,0,6*b,.9*b,0,5.8*b,1*b,0,-5.8*b,1*b,0,-6*b,.9*b,0],S=[-10*b,-.9*b,0,-9.8*b,-1*b,0,9.8*b,-1*b,0,10*b,-.9*b,0,10*b,.9*b,0,9.8*b,1*b,0,-9.8*b,1*b,0,-10*b,.9*b,0],x=(o=u.create(),s=u.create(),l=u.create(),function(e,t,n,r){t=Math.max(t,1),n=Math.min(r-1,n);var i=3*(t-1);u.set(o,e[i],e[i+1],e[i+2]),u.set(l,e[3*t],e[3*t+1],e[3*t+2]);for(var a=t;a<n;++a)i=3*(a+1),u.set(s,e[i],e[i+1],e[i+2]),e[3*a+0]=.25*s[0]+.5*l[0]+.25*o[0],e[3*a+1]=.25*s[1]+.5*l[1]+.25*o[1],e[3*a+2]=.25*s[2]+.5*l[2]+.25*o[2],u.copy(o,l),u.copy(l,s)}),C=function(){var e=c.fromValues(0,0,0,1);return function(t,n,r,i){var a=i.atomCount(),o=r.idPool.getContinuousRange(a);t.addIdRange(o);var s=r.protoSphere.numVerts(),l=r.protoSphere.numIndices(),u=1.5*r.radiusMultiplier;t.addChainVertArray(i,s*a,l*a),i.eachAtom(function(i){var a=t.vertArrayWithSpaceFor(s);r.color.colorFor(i,e,0);var l=a.numVerts(),c=o.nextId({geom:t,atom:i});r.protoSphere.addTransformed(a,i.pos(),u,e,c);var h=a.numVerts();n.addAssoc(i,a,l,h)})}}();y.spheres=function(e,t,n){console.time("spheres");var i=new p(n.sphereDetail,n.sphereDetail);n.protoSphere=i;var a=new r(t,n.float32Allocator,n.uint16Allocator),o=new _(e,!0);return a.addVertAssoc(o),a.setShowRelated(n.showRelated),n.color.begin(e),e.eachChain(function(e){C(a,o,n,e)}),n.color.end(e),console.timeEnd("spheres"),a};var E=function(){var e=u.create(),t=u.create(),n=c.fromValues(0,0,0,1),r=u.create(),i=u.create(),a=f.create();return function(o,s,l,c){var f=c.atomCount(),d=0;c.eachAtom(function(e){d+=e.bonds().length});var p=f*l.protoSphere.numVerts()+d*l.protoCyl.numVerts(),m=f*l.protoSphere.numIndices()+d*l.protoCyl.numIndices();o.addChainVertArray(c,p,m);var v=l.idPool.getContinuousRange(f);o.addIdRange(v),c.eachAtom(function(c){var f=l.protoSphere.numVerts()+c.bondCount()*l.protoCyl.numVerts(),d=o.vertArrayWithSpaceFor(f),p=d.numVerts(),m=v.nextId({geom:o,atom:c});l.color.colorFor(c,n,0),l.protoSphere.addTransformed(d,c.pos(),l.radius,n,m),c.eachBond(function(o){o.mid_point(e),u.sub(t,c.pos(),e);var s=u.length(t);u.scale(t,t,1/s),h.buildRotation(a,t,r,i,!1),u.add(e,e,c.pos()),u.scale(e,e,.5),l.protoCyl.addTransformed(d,e,s,l.radius,a,n,n,m,m)});var _=d.numVerts();s.addAssoc(c,d,p,_)})}}();y.ballsAndSticks=function(e,t,n){console.time("ballsAndSticks");var i=new _(e,!0),a=new p(n.sphereDetail,n.sphereDetail),o=new m(n.arcDetail);n.protoSphere=a,n.protoCyl=o;var s=new r(t,n.float32Allocator,n.uint16Allocator);return s.addVertAssoc(i),s.setShowRelated(n.showRelated),n.color.begin(e),e.eachChain(function(e){E(s,i,n,e)}),n.color.end(e),console.timeEnd("ballsAndSticks"),s};var A,R=(A=c.fromValues(0,0,0,1),function(e,t,n,r){var i=n.atomCount(),a=r.idPool.getContinuousRange(i);e.addIdRange(a);var o=e.addChainVertArray(n,i);o.setDrawAsPoints(!0),n.eachAtom(function(n){var i=o.numVerts();r.color.colorFor(n,A,0);var s=a.nextId({geom:e,atom:n});o.addPoint(n.pos(),A,s);var l=o.numVerts();t.addAssoc(n,o,i,l)})});y.points=function(e,t,n){console.time("points");var r=new _(e,!0);n.color.begin(e);var a=new i(t,n.float32Allocator);return a.setPointSize(n.pointSize),a.addVertAssoc(r),a.setShowRelated(n.showRelated),e.eachChain(function(e){R(a,r,e,n)}),n.color.end(e),console.timeEnd("points"),a};var k=function(){var e=u.create(),t=c.fromValues(0,0,0,1);return function(n,r,i,a){var o=0,s=i.atomCount(),l=a.idPool.getContinuousRange(s);n.addIdRange(l),i.eachAtom(function(e){var t=e.bonds().length;o+=t||3});var u=n.addChainVertArray(i,2*o);i.eachAtom(function(i){var o=u.numVerts(),s=l.nextId({geom:n,atom:i});if(i.bonds().length)i.eachBond(function(n){n.mid_point(e),a.color.colorFor(i,t,0),u.addLine(i.pos(),t,e,t,s,s)});else{var c=i.pos();a.color.colorFor(i,t,0),u.addLine([c[0]-.2,c[1],c[2]],t,[c[0]+.2,c[1],c[2]],t,s,s),u.addLine([c[0],c[1]-.2,c[2]],t,[c[0],c[1]+.2,c[2]],t,s,s),u.addLine([c[0],c[1],c[2]-.2],t,[c[0],c[1],c[2]+.2],t,s,s)}var h=u.numVerts();r.addAssoc(i,u,o,h)})}}();y.lines=function(e,t,n){console.time("lines");var r=new _(e,!0);n.color.begin(e);var a=new i(t,n.float32Allocator);return a.setLineWidth(n.lineWidth),a.addVertAssoc(r),a.setShowRelated(n.showRelated),e.eachChain(function(e){k(a,r,e,n)}),n.color.end(e),console.timeEnd("lines"),a};var P,M,F,D,I=(P=c.fromValues(0,0,0,1),M=c.fromValues(0,0,0,1),F=u.create(),D=u.create(),function(e,t,n,r,i,a){t.addAssoc(r,n,0,n.numVerts(),n.numVerts()+1);var o=a.float32Allocator.request(4*i.length()),s=a.idPool.getContinuousRange(i.length());e.addIdRange(s);for(var l,u=s.nextId({geom:e,atom:i.centralAtomAt(0)}),c=1;c<i.length();++c){a.color.colorFor(i.centralAtomAt(c-1),P,0),o[4*(c-1)+0]=P[0],o[4*(c-1)+1]=P[1],o[4*(c-1)+2]=P[2],o[4*(c-1)+3]=P[3],a.color.colorFor(i.centralAtomAt(c),M,0),i.posAt(F,c-1),i.posAt(D,c),l=s.nextId({geom:e,atom:i.centralAtomAt(c)}),n.addLine(F,P,D,M,u,l),u=l,l=null;var h=n.numVerts();t.addAssoc(r,n,c,h-1,h+(c===i.length()-1?0:1))}return o[4*i.length()-4]=M[0],o[4*i.length()-3]=M[1],o[4*i.length()-2]=M[2],o[4*i.length()-1]=M[3],t.setPerResidueColors(r,o),r+1});y.lineTrace=function(e,t,n){console.time("lineTrace");var r=new v(e,1,!0);n.color.begin(e);var a=new i(t,n.float32Allocator);a.setLineWidth(n.lineWidth);var o=0;return e.eachChain(function(e){o=function(e,t,n,r,i){for(var a=i.backboneTraces(),o=function(e){for(var t=0,n=0;n<e.length;++n)t+=2*(e[n].length()-1);return t}(a),s=e.addChainVertArray(i,o),l=0;l<a.length;++l)r=I(e,t,s,r,a[l],n);return r}(a,r,n,o,e)}),a.addVertAssoc(r),a.setShowRelated(n.showRelated),n.color.end(e),console.timeEnd("lineTrace"),a};var N=function(){var e=u.create(),t=u.create(),n=c.fromValues(0,0,0,1),r=c.fromValues(0,0,0,1);return function(i,a,o,s,l,u){var c,f=u.fullTraceIndex(0),d=s.float32Allocator.request(3*u.length()),p=s.float32Allocator.request(4*u.length()),m=[],v=s.idPool.getContinuousRange(u.length());for(i.addIdRange(v),c=0;c<u.length();++c){var _=u.centralAtomAt(c);u.smoothPosAt(e,c,s.strength),s.color.colorFor(_,p,4*c),d[3*c]=e[0],d[3*c+1]=e[1],d[3*c+2]=e[2],m.push(v.nextId({geom:i,atom:_}))}var y=m[0],b=0,w=h.catmullRomSpline(d,u.length(),s.splineDetail,s.strength,!1,s.float32Allocator),T=g(p,s.splineDetail),S=o.numVerts();a.addAssoc(l,o,f,S,S+1);var x=Math.floor(s.splineDetail/2),C=h.catmullRomSplineNumPoints(u.length(),s.splineDetail,!1);for(c=1;c<C;++c){e[0]=w[3*(c-1)],e[1]=w[3*(c-1)+1],e[2]=w[3*(c-1)+2],t[0]=w[3*(c-0)],t[1]=w[3*(c-0)+1],t[2]=w[3*(c-0)+2],n[0]=T[4*(c-1)+0],n[1]=T[4*(c-1)+1],n[2]=T[4*(c-1)+2],n[3]=T[4*(c-1)+3],r[0]=T[4*(c-0)+0],r[1]=T[4*(c-0)+1],r[2]=T[4*(c-0)+2],r[3]=T[4*(c-0)+3];var E=Math.floor((c+x)/s.splineDetail);b=m[Math.min(m.length-1,E)],o.addLine(e,n,t,r,y,b),y=b;var A=o.numVerts();a.addAssoc(l,o,f+c,A-1,A+(c===u.length-1?0:1))}return a.setPerResidueColors(l,p),s.float32Allocator.release(d),s.float32Allocator.release(w),l+1}}();y.sline=function(e,t,n){console.time("sline"),n.color.begin(e);var r=new v(e,n.splineDetail,1,!0),a=new i(t,n.float32Allocator);a.addVertAssoc(r),a.setLineWidth(n.lineWidth),a.setShowRelated(n.showRelated);var o=0;return e.eachChain(function(e){o=function(e,t,n,r,i){for(var a=r.backboneTraces(),o=function(e,t){for(var n=0,r=0;r<e.length;++r)n+=2*(t*(e[r].length()-1)+1);return n}(a,n.splineDetail),s=e.addChainVertArray(r,o),l=0;l<a.length;++l)i=N(e,t,s,n,i,a[l]);return i}(a,r,n,e,o)}),n.color.end(e),console.timeEnd("sline"),a};var O=function(e,t,n){for(var r=0,i=0;i<e.length;++i)r+=e[i].length()*t,r+=(e[i].length()-1)*n;return r};y.trace=function(e,t,n){console.time("trace"),n.protoCyl=new m(n.arcDetail),n.protoSphere=new p(n.sphereDetail,n.sphereDetail);var i=new r(t,n.float32Allocator,n.uint16Allocator),a=new v(e,1,!0);i.addVertAssoc(a),i.setShowRelated(n.showRelated),n.color.begin(e);var o=0;return e.eachChain(function(e){o=function(e,t,n,r,i){var a=i.backboneTraces(),o=O(a,n.protoSphere.numVerts(),n.protoCyl.numVerts()),s=function(e,t,n){for(var r=0,i=0;i<e.length;++i)r+=e[i].length()*t,r+=(e[i].length()-1)*n;return r}(a,n.protoSphere.numIndices(),n.protoCyl.numIndices());e.addChainVertArray(i,o,s);for(var l=0;l<a.length;++l)Y(e,t,a[l],r,n),r++;return r}(i,a,n,o,e)}),n.color.end(e),console.timeEnd("trace"),i};var V=function(e,t,n){for(var r=0,i=0;i<e.length;++i){var a=((e[i].length()-1)*n+1)*t;r+=a+(Math.ceil((a+2)/65536)-1)*t,r+=2}return r},L=function(){var e=f.create(),t=u.create(),n=u.create(),r=u.create(),i=u.create(),a=c.create();return function(o,s,l,c){for(var f=1.8*c.radius,d=c.protoCyl.numVerts()+2*c.protoSphere.numVerts(),p=0;p<l.length;++p){var m=l[p],v=c.idPool.getContinuousRange(m.length());o.addIdRange(v);for(var _=0;_<m.length();++_){var g=o.vertArrayWithSpaceFor(d),y=g.numVerts(),b=m.residueAt(_),w=b.name(),T=b.atom("C3'"),S=null;if(null!==(S="A"===w||"G"===w||"DA"===w||"DG"===w?b.atom("N1"):b.atom("N3"))&&null!==T){var x=v.nextId({geom:o,atom:S});u.add(i,T.pos(),S.pos()),u.scale(i,i,.5),c.color.colorFor(S,a,0),u.sub(r,S.pos(),T.pos());var C=u.length(r);u.scale(r,r,1/C),h.buildRotation(e,r,n,t,!1),c.protoCyl.addTransformed(g,i,C,f,e,a,a,x,x),c.protoSphere.addTransformed(g,S.pos(),f,a,x),c.protoSphere.addTransformed(g,T.pos(),f,a,x);var E=g.numVerts();console.assert(E<=65536,"too many vertices"),s.addAssoc(S,g,y,E)}}}}}();y.cartoon=function(e,t,n){console.time("cartoon"),n.arrowSkip=Math.floor(3*n.splineDetail/4),n.coilProfile=new d(w,n.arcDetail,1),n.arrowProfile=new d(S,n.arcDetail/2,.1),n.helixProfile=new d(T,n.arcDetail/2,.1),n.strandProfile=new d(T,n.arcDetail/2,.1),n.protoCyl=new m(4*n.arcDetail),n.protoSphere=new p(4*n.arcDetail,4*n.arcDetail);var i=new r(t,n.float32Allocator,n.uint16Allocator),a=new v(e,n.splineDetail,!0);i.addVertAssoc(a),i.setShowRelated(n.showRelated),n.color.begin(e);var o=0,s=e.select({anames:["N1","N3"]}),l=new _(s,!0);return i.addVertAssoc(l),e.eachChain(function(e){o=function(e,t,n,r,i,a){for(var o=a.backboneTraces(),s=V(o,4*r.arcDetail,r.splineDetail),l=function(e,t,n){for(var r=0,i=0;i<e.length;++i)r+=(e[i].length()*n-1)*t*6,r+=6*t;return r}(o,4*r.arcDetail,r.splineDetail),u=[],c=r.protoCyl.numVerts()+2*r.protoSphere.numVerts(),h=r.protoCyl.numIndices()+2*r.protoSphere.numIndices(),f=0;f<o.length;++f){var d=o[f];d.residueAt(0).isNucleotide()&&(u.push(d),s+=d.length()*c,l+=d.length()*h)}e.addChainVertArray(a,s,l);for(var p=0;p<o.length;++p)i=G(e,t,o[p],i,r);return L(e,n,u,r),i}(i,a,l,n,o,e)}),n.color.end(e),console.timeEnd("cartoon"),i},y.surface=function(){var e=u.create(),t=u.create(),n=c.fromValues(.8,.8,.8,1);return function(i,a,o){var s=0;i.getUint32(0),s+=4;var l=i.getUint32(s),c=24*l+(s+=4),h=i.getUint32(c),f=new r(a,o.float32Allocator,o.uint16Allocator);f.setShowRelated("asym");var d,p=f.addVertArray(l,3*h);for(d=0;d<l;++d)u.set(e,i.getFloat32(s+0),i.getFloat32(s+4),i.getFloat32(s+8)),s+=12,u.set(t,i.getFloat32(s+0),i.getFloat32(s+4),i.getFloat32(s+8)),s+=12,p.addVertex(e,t,n,0);for(s=c+4,d=0;d<h;++d){var m=i.getUint32(s+0),v=i.getUint32(s+4),_=i.getUint32(s+8);s+=12,p.addTriangle(m-1,_-1,v-1)}return f}}();var z,U,B,j,W,q=(z=f.create(),U=u.create(),function(e,t,n,r,i,a,o,s,l,c,f){var d=l.coilProfile;"C"===r||l.forceTube?s?h.ortho(n,i):u.cross(n,U,i):"H"===r?d=l.helixProfile:"E"===r?d=l.strandProfile:"A"===r&&(d=l.arrowProfile),h.buildRotation(z,i,n,U,!0),d.addTransformed(e,t,o,z,a,s,c,f)}),H=(B=u.create(),j=u.create(),W=u.create(),function(e,t,n,r,i,a,o,s){var l=null,c=null,h=t.length();u.set(W,0,0,0);for(var f=0;f<h;++f){a.push(o.nextId({geom:e,atom:t.centralAtomAt(f)})),t.smoothPosAt(B,f,s.strength),r[3*f]=B[0],r[3*f+1]=B[1],r[3*f+2]=B[2],t.smoothNormalAt(j,f,s.strength);var d=t.centralAtomAt(f);s.color.colorFor(d,n,4*f),u.dot(j,W)<0&&u.scale(j,j,-1),"E"!==t.residueAt(f).ss()||s.forceTube||(null===l&&(l=f),c=f),"C"===t.residueAt(f).ss()&&null!==l&&(x(r,l,c,h),x(i,l,c,h),l=null,c=null),i[3*f]=r[3*f]+j[0]+W[0],i[3*f+1]=r[3*f+1]+j[1]+W[1],i[3*f+2]=r[3*f+2]+j[2]+W[2],u.copy(W,j)}}),G=function(){var e=u.create(),t=u.create(),n=c.fromValues(0,0,0,1),r=u.create(),i=u.create();return function(a,o,s,l,f){var d=V([s],4*f.arcDetail,f.splineDetail),p=f.float32Allocator.request(3*s.length()),m=f.float32Allocator.request(4*s.length()),v=f.float32Allocator.request(3*s.length()),_=[],y=f.idPool.getContinuousRange(s.length());a.addIdRange(y),H(a,s,m,p,v,_,y,f);var b=a.vertArrayWithSpaceFor(d),w=h.catmullRomSpline(p,s.length(),f.splineDetail,f.strength,!1,f.float32Allocator),T=h.catmullRomSpline(v,s.length(),f.splineDetail,f.strength,!1,f.float32Allocator);o.setPerResidueColors(l,m);var S=f.radius*(s.residueAt(0).isAminoacid()?1:1.8),x=g(m,f.splineDetail);u.set(e,w[3]-w[0],w[4]-w[1],w[5]-w[2]),u.set(t,w[0],w[1],w[2]),u.set(r,T[0]-w[0],T[1]-w[0],T[2]-w[2]),u.normalize(e,e),u.normalize(r,r),c.set(n,x[0],x[1],x[2],x[3]);var C=b.numVerts();b.addVertex(t,[-e[0],-e[1],-e[2]],n,_[0]),q(b,t,r,s.residueAt(0).ss(),e,n,S,!0,f,0,_[0]),function(e,t,n){for(var r=0;r<n-1;++r)e.addTriangle(t,t+1+r,t+2+r);e.addTriangle(t,t+n,t+1)}(b,C,4*f.arcDetail);var E=b.numVerts(),A=0;o.addAssoc(l,b,A,C,E),A+=1;for(var R=Math.floor(f.splineDetail/2),k=h.catmullRomSplineNumPoints(s.length(),f.splineDetail,!1),P=4*f.arcDetail,M=1,F=k;M<F;++M){var D=3*M,I=4*M,N=3*(M+1),O=3*(M-1);u.set(t,w[D],w[D+1],w[D+2]),M===F-1?u.set(e,w[D]-w[O],w[D+1]-w[O+1],w[D+2]-w[O+2]):u.set(e,w[N]-w[O],w[N+1]-w[O+1],w[N+2]-w[O+2]),u.normalize(e,e),c.set(n,x[I],x[I+1],x[I+2],x[I+3]);var L=0,z=Math.floor(M/f.splineDetail),U=Math.floor((M-1)/f.splineDetail),B=Math.floor((M+f.arrowSkip)/f.splineDetail),j=!1,W=s.residueAt(z).ss();if(!f.forceTube){if(z!==U&&"C"===s.residueAt(U).ss()&&("H"===W||"E"===W)){u.set(i,T[O]-w[O],T[O+1]-w[O+1],T[O+2]-w[O+2]),u.normalize(i,i);var G=2*Math.PI/(4*f.arcDetail),Y=h.signedAngle(r,i,e);L=((L=Math.round(Y/G))+4*f.arcDetail)%(4*f.arcDetail)}B!==z&&B<s.length()&&"C"===s.residueAt(B).ss()&&"E"===W&&(j=!0)}u.set(r,T[3*M]-w[D],T[D+1]-w[D+1],T[D+2]-w[D+2]),u.normalize(r,r),C=b.numVerts();var X=Math.floor((M+R)/f.splineDetail),$=_[Math.min(_.length-1,X)];q(b,t,r,W,e,n,S,!1,f,L,$);var Q=M===F-1?1:P;b.numVerts()+Q>b.maxVerts()&&(E=b.numVerts(),o.addAssoc(l,b,A,C,E),b=a.vertArrayWithSpaceFor(Q),C=0,q(b,t,r,W,e,n,S,!0,f,0,$)),j&&(o.addAssoc(l,b,A,C,E),q(b,t,r,"A",e,n,S,!1,f,0,$),M+=f.arrowSkip),E=b.numVerts(),M===F-1&&(E+=1),o.addAssoc(l,b,A,C,E),A+=1,j&&(A+=f.arrowSkip)}return b.addVertex(t,e,n,_[_.length-1]),function(e,t,n){for(var r=t+n,i=0;i<n-1;++i)e.addTriangle(r,t+i+1,t+i);e.addTriangle(r,t,t+n-1)}(b,C,4*f.arcDetail),f.float32Allocator.release(v),f.float32Allocator.release(p),l+1}}(),Y=function(){var e=f.create(),t=u.create(),n=u.create(),r=u.create(),i=u.create(),a=u.create(),o=u.create(),s=c.fromValues(0,0,0,1),l=c.fromValues(0,0,0,1);return function(c,f,d,p,m){if(0!==d.length()){var v=m.idPool.getContinuousRange(d.length());c.addIdRange(v),m.color.colorFor(d.centralAtomAt(0),s,0);var _=O([d],m.protoSphere.numVerts(),m.protoCyl.numVerts()),g=_,y=c.vertArrayWithSpaceFor(_),b=y.maxVerts(),w=y.numVerts();d.posAt(a,0);var T=v.nextId({geom:c,atom:d.centralAtomAt(0)}),S=0;m.protoSphere.addTransformed(y,a,m.radius,s,T);var x=null;f.addAssoc(p,y,0,w,x);var C=m.float32Allocator.request(4*d.length());C[0]=s[0],C[1]=s[1],C[2]=s[2],C[3]=s[3];for(var E=m.protoCyl.numVerts()+m.protoSphere.numVerts(),A=1;A<d.length();++A){S=v.nextId({geom:c,atom:d.centralAtomAt(A)}),d.posAt(a,A-1),d.posAt(o,A),m.color.colorFor(d.centralAtomAt(A),l,0),C[4*A+0]=l[0],C[4*A+1]=l[1],C[4*A+2]=l[2],C[4*A+3]=l[3],u.sub(t,o,a);var R=u.length(t);u.scale(t,t,1/R),h.buildRotation(e,t,n,r,!1),u.copy(i,a),u.add(i,i,o),u.scale(i,i,.5),E>b-y.numVerts()&&(y=c.vertArrayWithSpaceFor(g)),g-=E;var k=y.numVerts();m.protoCyl.addTransformed(y,i,R,m.radius,e,s,l,T,S),x=y.numVerts(),x-=(x-k)/2,m.protoSphere.addTransformed(y,o,m.radius,l,S),T=S,f.addAssoc(p,y,A,w,x),w=x,u.copy(s,l)}f.setPerResidueColors(p,C),f.addAssoc(p,y,d.length()-1,w,y.numVerts())}}}();return y}(f,v,_,g),b=function(){function e(e,t,n,r,i,a){O.call(this,e);var o=a||{};this._options={},this._options.fillStyle=o.fillStyle||"#000",this._options.backgroundAlpha=o.backgroundAlpha||0,this._options.fontSize=o.fontSize||24,this._options.font=o.font||"Verdana",this._options.fontStyle=o.fontStyle||"normal",this._options.fontColor=o.fontColor||"#000",this._order=100,this._pos=r,this._interleavedBuffer=this._gl.createBuffer(),this._interleavedData=new Float32Array(30),this._prepareText(t,n,i),this._interleavedData[0]=r[0],this._interleavedData[1]=r[1],this._interleavedData[2]=r[2],this._interleavedData[3]=-.5,this._interleavedData[4]=-.5,this._interleavedData[5]=r[0],this._interleavedData[6]=r[1],this._interleavedData[7]=r[2],this._interleavedData[8]=.5,this._interleavedData[9]=.5,this._interleavedData[10]=r[0],this._interleavedData[11]=r[1],this._interleavedData[12]=r[2],this._interleavedData[13]=.5,this._interleavedData[14]=-.5,this._interleavedData[15]=r[0],this._interleavedData[16]=r[1],this._interleavedData[17]=r[2],this._interleavedData[18]=-.5,this._interleavedData[19]=-.5,this._interleavedData[20]=r[0],this._interleavedData[21]=r[1],this._interleavedData[22]=r[2],this._interleavedData[23]=-.5,this._interleavedData[24]=.5,this._interleavedData[25]=r[0],this._interleavedData[26]=r[1],this._interleavedData[27]=r[2],this._interleavedData[28]=.5,this._interleavedData[29]=.5}function t(e){for(var t=1;t<e;)t*=2;return t}return r.derive(e,O,{updateProjectionIntervals:function(){},updateSquaredSphereRadius:function(e,t){return t},_setupTextParameters:function(e){e.fillStyle=this._options.fontColor,e.textAlign="left",e.textBaseline="bottom",e.font=this._options.fontStyle+" "+this._options.fontSize+"px "+this._options.font},_prepareText:function(e,n,r){this._setupTextParameters(n);var i=n.measureText(r).width;e.width=t(i),e.height=t(24),n.fillStyle=this._options.fillStyle,n.globalAlpha=this._options.backgroundAlpha,n.fillRect(0,0,e.width,e.height),this._setupTextParameters(n),n.globalAlpha=1,n.lineWidth=.5,n.lineStyle="none",n.fillText(r,0,e.height),n.strokeText(r,0,e.height),this._texture=this._gl.createTexture(),this._textureFromCanvas(this._texture,e),this._xScale=i/e.width,this._yScale=24/e.height,this._width=i,this._height=24},_textureFromCanvas:function(e,t){var n=this._gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.bindTexture(n.TEXTURE_2D,e),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.generateMipmap(n.TEXTURE_2D),n.bindTexture(n.TEXTURE_2D,null)},bind:function(){var e=this._gl;e.bindBuffer(e.ARRAY_BUFFER,this._interleavedBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._texture),this._ready||(e.bufferData(e.ARRAY_BUFFER,this._interleavedData,e.STATIC_DRAW),this._ready=!0)},draw:function(e,t,n,r){if(this._visible&&"normal"===r){var i=t.text;e.bind(i),this.bind();var a=this._gl,o=e.upsamplingFactor();a.uniform1f(a.getUniformLocation(i,"xScale"),this._xScale),a.uniform1f(a.getUniformLocation(i,"yScale"),this._yScale),a.uniform1f(a.getUniformLocation(i,"width"),2*o*this._width/e.viewportWidth()),a.uniform1f(a.getUniformLocation(i,"height"),2*o*this._height/e.viewportHeight()),a.uniform1i(a.getUniformLocation(i,"sampler"),0);var s=a.getAttribLocation(i,"attrCenter");a.enableVertexAttribArray(s),a.vertexAttribPointer(s,3,a.FLOAT,!1,20,0);var l=a.getAttribLocation(i,"attrCorner");a.vertexAttribPointer(l,2,a.FLOAT,!1,20,12),a.enableVertexAttribArray(l),a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),a.drawArrays(a.TRIANGLES,0,6),a.disableVertexAttribArray(s),a.disableVertexAttribArray(l),a.disable(a.BLEND)}}}),e}(),w=function(n){var i,a,o,s,l,u=e.vec3,c=e.mat3,f=t.forceRGB;function d(){this._vertData=[],this._indexData=[],this._numVerts=0}function p(e,t,r,i,a){O.call(this,t),this._float32Allocator=r,this._uint16Allocator=i,this._data=new d,this._protoSphere=new n.ProtoSphere(8,8),this._protoCyl=new n.ProtoCylinder(8),this._va=null,this._idRanges=[],this._idPool=a,this._ready=!1,this._currentRange=null}return d.prototype={numVerts:function(){return this._numVerts},addVertex:function(e,t,n,r){this._numVerts+=1,this._vertData.push(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2],n[3],r,0)},addTriangle:function(e,t,n){this._indexData.push(e,t,n)},numIndices:function(){return this._indexData.length},indexData:function(){return this._indexData},vertData:function(){return this._vertData}},r.derive(p,O,{updateProjectionIntervals:function(){},updateSquaredSphereRadius:function(e,t){return t},addTube:(i=u.create(),a=u.create(),o=u.create(),s=u.create(),l=c.create(),function(e,t,n,r){var c=f((r=r||{}).color||"white"),d=!0;void 0!==r.cap&&(d=r.cap),u.sub(s,t,e);var p=u.length(s);if(u.normalize(s,s),u.add(i,e,t),u.scale(i,i,.5),h.buildRotation(l,s,a,o,!1),d){var m=this._data.numVerts();this._data.addVertex(e,[-s[0],-s[1],-s[2]],c,0),function(e,t,n){for(var r=0;r<n-1;++r)e.addTriangle(t,t+1+r,t+2+r);e.addTriangle(t,t+n,t+1)}(this._data,m,8)}var v=void 0!==r.userData?r.userData:null;console.log(v);var _=this._nextObjectId({center:i,userData:v,geom:this});if(this._protoCyl.addTransformed(this._data,i,p,n,l,c,c,_,_),d){var g=this._data.numVerts();this._data.addVertex(t,s,c,0),function(e,t,n){for(var r=t+n,i=0;i<n-1;++i)e.addTriangle(r,t+i+1,t+i);e.addTriangle(r,t,t+n-1)}(this._data,g-8,8)}this._ready=!1}),_nextObjectId:function(e){return this._currentRange&&this._currentRange.hasLeft()||(this._currentRange=this._idPool.getContinuousRange(100),this._idRanges.push(this._currentRange)),this._currentRange.nextId(e)},destroy:function(){O.prototype.destroy.call(this);for(var e=0;e<this._idRanges.length;++e)this._idRanges[e].recycle()},addSphere:function(e,t,n){var r=f((n=n||{}).color||"white"),i=void 0!==n.userData?n.userData:null,a=this._nextObjectId({center:e,userData:i,geom:this});this._protoSphere.addTransformed(this._data,e,t,r,a),this._ready=!1},_prepareVertexArray:function(){this._ready=!0,null!==this._va&&this._va.destroy(),this._va=new L(this._gl,this._data.numVerts(),this._data.numIndices(),this._float32Allocator,this._uint16Allocator),this._va.setIndexData(this._data.indexData()),this._va.setVertData(this._data.vertData())},draw:function(e,t,n,r){if(this._visible){this._ready||this._prepareVertexArray();var i=this.shaderForStyleAndPass(t,n,r);if(i){e.bind(i),this._gl.uniform1i(i.symId,255);var a=this._va;a.bind(i),a.draw(),a.releaseAttribs(i)}}},shaderForStyleAndPass:function(e,t,n){if("normal"===n)return"hemilight"===t?e.hemilight:e.phong;if("select"===n)return e.select;if("outline"===n)return e.outline;var r=e[n];return void 0!==r?r:null}}),p}(f),T=function(){var t,n,i,a=e.vec3,o=e.quat,s=e.mat3;function l(e,t,n){this._from=e,this._to=t,this._duration=n,this._left=n,this._start=Date.now(),this._looping=!1,this._finished=!1}function u(e,t,n){l.call(this,a.clone(e),a.clone(t),n),this._current=a.clone(e)}function c(e,t,n){var r=s.create(),i=s.create();s.fromMat4(r,e),s.fromMat4(i,t);var a=o.create(),u=o.create();o.fromMat3(a,r),o.fromMat3(u,i),this._current=s.create(),l.call(this,a,u,n)}function f(e,t){l.call(this,null,null,t),this._axis=a.clone(e),this.setLooping(!0),this._previousAngle=0}function d(e,t){var n=2*Math.PI/t*1e3;l.call(this,null,null,n),this._axis=a.clone(e),this.setLooping(!0),this._speed=t,this._previousT=0}function p(){this._animations=[]}return l.prototype={setLooping:function(e){this._looping=e},step:function(e){var t,n=Date.now()-this._start;return 0===this._duration?t=1:this._looping?t=(n-Math.floor(n/this._duration)*this._duration)/this._duration:(t=(n=Math.min(this._duration,n))/this._duration,this._finished=1===t),this.apply(e,t),this._finished},apply:function(e,t){var n=(1-Math.cos(t*Math.PI))/2;this._current=this._from*(1-n)+this._to*n,e.setZoom(this._current)},finished:function(){return this._finished}},r.derive(u,l,{apply:function(e,t){var n=(1-Math.cos(t*Math.PI))/2;a.lerp(this._current,this._from,this._to,n),e.setCenter(this._current)}}),r.derive(c,l,{apply:(t=o.create(),function(e,n){o.slerp(t,this._from,this._to,n),s.fromQuat(this._current,t),e.setRotation(this._current)})}),r.derive(f,l,{apply:(n=s.create(),i=s.create(),function(e,t){s.fromMat4(i,e.rotation());var r=.2*Math.sin(2*t*Math.PI),a=r-this._previousAngle;this._previousAngle=r,h.axisRotation(n,this._axis,a),s.mul(i,n,i),e.setRotation(i)})}),r.derive(d,l,{apply:function(){var e=s.create(),t=s.create();return function(n,r){s.fromMat4(t,n.rotation());var i=2*Math.PI*(r-this._previousT);this._previousT=r,h.axisRotation(e,this._axis,i),s.mul(t,e,t),n.setRotation(t)}}(),setSpeed:function(e){this._speed=e},setAxis:function(e){this._axis=e}}),p.prototype={run:function(e){var t=Date.now();return this._animations=this._animations.filter(function(n){return!n.step(e,t)}),this._animations.length>0},add:function(e){this._animations.push(e)},remove:function(e){this._animations=this._animations.filter(function(t){return t!==e})}},{AnimationControl:p,move:function(e,t,n){return new u(e,t,n)},rotate:function(e,t,n){return new c(e,t,n)},zoom:function(e,t,n){return new l(e,t,n)},rockAndRoll:function(){return new f([0,1,0],2e3)},spin:function(e,t){return new d(e,t)}}}(),S=function(){function e(e,t){this.near=e,this.far=t}function t(e){e=e||{},this._near=e.near||.1,this._far=e.far||400}function n(){this._far=100}return t.prototype.update=function(){return new e(this._near,this._far)},n.prototype.update=function(t,n){for(var r=n.center(),i=null,a=0;a<t.length;++a){var o=t[a];o.visible()&&(i=o.updateSquaredSphereRadius(r,i))}return null===i?null:new e(.1,1.05*((i=Math.sqrt(i))+n.zoom()))},{FixedSlab:t,AutoSlab:n,Slab:e}}(),x=function(n,i,a,o,s,l,u,c,h,f,d,p){var m=e.vec3,v=e.mat4,_=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function g(e,t){return"fixed"===(e=e||"auto")?new S.FixedSlab(t):"auto"===e?new S.AutoSlab(t):null}function y(e,t,n,r,i,a){this._pos=r,this._target=e,this._node=t,this._symIndex=n,this._legacyObject=i,this._legacyTransform=a}function b(e,t){this._options=this._initOptions(t,e),this._initialized=!1,this._objects=[],this._domElement=e,this._redrawRequested=!1,this._resize=!1,this._lastTimestamp=null,this._objectIdManager=new n,this._spin=null,this._rockAndRoll=null,this.listenerMap={},this._animControl=new p.AnimationControl,this._initKeyboardInput(),this._initCanvas(),this.quality(this._options.quality),null!==this._options.click&&this.on("click",this._options.click),null!==this._options.doubleClicked&&this.on("doubleClick",this._options.doubleClick),"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?this._initViewer():document.addEventListener("DOMContentLoaded",r.bind(this,this._initViewer))}function w(e,t,n){return t in e?e[t]:n}function T(e){return e.atomDoubleClick?(console.warn("use of atomDoubleClick is deprecated. ","use doubleClick instead"),e.atomDoubleClick):e.atomDoubleClicked?(console.warn("use of atomDoubleClicked is deprecated. ","use doubleClick instead"),e.atomDoubleClicked):e.doubleClick?e.doubleClick:"center"}function x(e){return e.atomClick?(console.warn("use of atomClick is deprecated. ","use click instead"),e.atomClick):e.atomClicked?(console.warn("use of atomClicked is deprecated. ","use click instead"),e.atomClicked):e.click?e.click:null}return y.prototype={symIndex:function(){return this._symIndex},target:function(){return this._target},pos:function(){return this._pos},node:function(){return this._node},transform:function(){return this._legacyTransform},object:function(){return this._legacyObject}},b.prototype={_initOptions:function(e,n){var r={width:(e=e||{}).width||500,height:e.height||500,animateTime:e.animateTime||0,antialias:e.antialias,quality:w(e,"quality","low"),style:w(e,"style","hemilight"),background:t.forceRGB(e.background||"white"),slabMode:g(e.slabMode),outline:w(e,"outline",!0),outlineColor:t.forceRGB(w(e,"outlineColor","black")),outlineWidth:w(e,"outlineWidth",1.5),selectionColor:t.forceRGB(w(e,"selectionColor","#3f3")),fov:w(e,"fov",45),doubleClick:T(e),click:x(e),fog:w(e,"fog",!0),transparency:w(e,"transparency","alpha")},i=n.getBoundingClientRect();return"auto"===r.width&&(r.width=i.width),"auto"===r.height&&(r.height=i.height),r},_ensureSize:function(){this._resize&&(this._resize=!1,this._cam.setViewportSize(this._canvas.viewportWidth(),this._canvas.viewportHeight()),this._pickBuffer.resize(this._options.width,this._options.height))},resize:function(e,t){e===this._options.width&&t===this._options.height||(this._canvas.resize(e,t),this._resize=!0,this._options.width=e,this._options.height=t,this.requestRedraw())},fitParent:function(){var e=this._domElement.getBoundingClientRect();this.resize(e.width,e.height)},gl:function(){return this._canvas.gl()},ok:function(){return this._initialized},options:function(e,n){if(void 0!==n)if(this._options[e]=n,"fog"===e)this._cam.fog(n),this.requestRedraw();else if("fov"===e)this._cam.setFieldOfViewY(n*Math.PI/180);else if("selectionColor"===e)this._cam.setSelectionColor(t.forceRGB(n));else if("outlineColor"===e)this._cam.setOutlineColorColor(t.forceRGB(n));else if("outlineWidth"===e)this._cam.setOutlineWidth(n+0);else if("transparency"===e){var r="screendoor"===n;this._cam.setScreenDoorTransparency(r)}return this._options[e]},quality:function(e){return this._options.quality=e,"high"===e?(this._options.arcDetail=4,this._options.sphereDetail=16,void(this._options.splineDetail=8)):"medium"===e?(this._options.arcDetail=2,this._options.sphereDetail=10,void(this._options.splineDetail=5)):"low"===e?(this._options.arcDetail=2,this._options.sphereDetail=8,void(this._options.splineDetail=3)):void console.error("invalid quality argument",e)},imageData:function(){return this._canvas.imageData()},_initPickBuffer:function(){var e={width:this._options.width,height:this._options.height};this._pickBuffer=new a(this._canvas.gl(),e)},_initViewer:function(){if(!this._canvas.initGL())return this._domElement.removeChild(this._canvas.domElement()),this._domElement.innerHTML='<div style="vertical-align:middle; text-align:center;"><h1>WebGL not supported</h1><p>Your browser does not support WebGL. You might want to try Chrome, Firefox, IE 11, or newer versions of Safari</p><p>If you are using a recent version of one of the above browsers, your graphic card might be blocked. Check the browser documentation for details on how to unblock it.</p></div>',this._domElement.style.width=this._options.width+"px",this._domElement.style.height=this._options.height+"px",!1;this._initPickBuffer(),this._2dcontext=this._textureCanvas.getContext("2d"),this._float32Allocator=new o(Float32Array),this._uint16Allocator=new o(Uint16Array),this._cam=new s(this._canvas.gl()),this._cam.setUpsamplingFactor(this._canvas.superSamplingFactor()),this._cam.setOutlineWidth(this._options.outlineWidth);var e="screendoor"===this._options.transparency;this._cam.setScreenDoorTransparency(e),this._cam.fog(this._options.fog),this._cam.setFogColor(this._options.background),this._cam.setOutlineColor(this._options.outlineColor),this._cam.setSelectionColor(this._options.selectionColor),this._cam.setFieldOfViewY(this._options.fov*Math.PI/180),this._mouseHandler.setCam(this._cam);var t=this._canvas,n=/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?"highp":"mediump";return this._shaderCatalog={hemilight:t.initShader(l.HEMILIGHT_VS,l.PRELUDE_FS+l.HEMILIGHT_FS,n),phong:t.initShader(l.HEMILIGHT_VS,l.PRELUDE_FS+l.PHONG_FS,n),outline:t.initShader(l.OUTLINE_VS,l.PRELUDE_FS+l.OUTLINE_FS,n),lines:t.initShader(l.LINES_VS,l.PRELUDE_FS+l.LINES_FS,n),text:t.initShader(l.TEXT_VS,l.TEXT_FS,n),selectLines:t.initShader(l.SELECT_LINES_VS,l.SELECT_LINES_FS,n),select:t.initShader(l.SELECT_VS,l.SELECT_FS,n)},this._boundDraw=r.bind(this,this._draw),this._touchHandler=new u(this._canvas.domElement(),this,this._cam),this._initialized||(this._initialized=!0,this._dispatchEvent({name:"viewerReadyEvent"},"viewerReady",this)),!0},requestRedraw:function(){this._redrawRequested||(this._redrawRequested=!0,_(this._boundDraw))},boundingClientRect:function(){return this._canvas.domElement().getBoundingClientRect()},_drawWithPass:function(e){for(var t=0,n=this._objects.length;t!==n;++t)this._objects[t].draw(this._cam,this._shaderCatalog,this._options.style,e)},_initKeyboardInput:function(){var e=document.createElement("div");e.setAttribute("style","overflow:hidden;width:0;height:0"),this._keyInput=document.createElement("textarea"),this._domElement.appendChild(e),e.appendChild(this._keyInput),this._keyInput.focus()},focus:function(){this._keyInput.focus()},_initCanvas:function(){var e={antialias:this._options.antialias,height:this._options.height,width:this._options.width,backgroundColor:this._options.background};this._canvas=new i.Canvas(this._domElement,e),this._textureCanvas=document.createElement("canvas"),this._textureCanvas.style.display="none",this._domElement.appendChild(this._textureCanvas),this._mouseHandler=new c(this._canvas,this,this._cam,this._options.animateTime),this._canvas.domElement().addEventListener("mousedown",r.bind(this,this._gainFocus))},_gainFocus:function(){this._keyInput.focus()},setRotation:function(e,t){if(0==(t|=0))return this._cam.setRotation(e),void this.requestRedraw();var n;9===e.length?(n=v.create(),v.fromMat3(n,e)):n=v.clone(e),this._animControl.add(p.rotate(this._cam.rotation(),n,t)),this.requestRedraw()},setCamera:function(e,t,n,r){r|=0,this.setCenter(t,r),this.setRotation(e,r),this.setZoom(n,r)},_animateCam:function(){this._animControl.run(this._cam)&&this.requestRedraw()},_draw:function(){if(null!==this._canvas){this._redrawRequested=!1,this._animateCam(),this._canvas.bind(),this._ensureSize();var e=this._canvas.gl();e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);var t=this._options.slabMode.update(this._objects,this._cam);null!==t&&this._cam.setNearFar(t.near,t.far),e.enable(e.CULL_FACE),this._options.outline&&(e.cullFace(e.BACK),e.enable(e.CULL_FACE),this._drawWithPass("outline")),e.cullFace(e.FRONT),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),this._drawWithPass("normal")}},setCenter:function(e,t){0!=(t|=0)?(this._animControl.add(p.move(this._cam.center(),m.clone(e),t)),this.requestRedraw()):this._cam.setCenter(e)},setZoom:function(e,t){0!=(t|=0)?(this._animControl.add(p.zoom(this._cam.zoom(),e,t)),this.requestRedraw()):this._cam.setZoom(e)},centerOn:function(e,t){this.setCenter(e.center(),t)},clear:function(){for(var e=0;e<this._objects.length;++e)this._objects[e].destroy();this._objects=[]},addListener:function(e,t){if("keypress"===e||"keydown"===e||"keyup"===e)console.log("keypress"),this._keyInput.addEventListener(e,t,!1);else{var n=this.listenerMap[e];if(void 0===n&&(n=[],this.listenerMap[e]=n),"center"===t){var i=r.bind(this._mouseHandler,this._mouseHandler._centerOnClicked);n.push(i)}else n.push(t);this._initialized&&"viewerReady"===e&&t(this,null)}},_dispatchEvent:function(e,t,n){var r=this.listenerMap[t];r&&r.forEach(function(t){t(n,e)})},RENDER_MODES:["sline","lines","trace","lineTrace","cartoon","tube","spheres","ballsAndSticks","points"],renderAs:function(e,t,n,r){for(var i=!1,a=0;a<this.RENDER_MODES.length;++a)if(this.RENDER_MODES[a]===n){i=!0;break}if(i)return this[n](e,t,r);console.error("render mode",n,"not supported")},_handleStandardMolOptions:function(e,t){return(e=this._handleStandardOptions(e)).showRelated=e.showRelated||"asym",e.showRelated&&"asym"!==e.showRelated&&null===t.assembly(e.showRelated)&&(console.error("no assembly with name",e.showRelated,". Falling back to asymmetric unit"),e.showRelated="asym"),e},_handleStandardOptions:function(e){return(e=r.copy(e)).float32Allocator=this._float32Allocator,e.uint16Allocator=this._uint16Allocator,e.idPool=this._objectIdManager,e},lineTrace:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.uniform([1,0,1]),i.lineWidth=i.lineWidth||4;var a=h.lineTrace(n,this._canvas.gl(),i);return this.add(e,a)},spheres:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.byElement(),i.sphereDetail=this.options("sphereDetail"),i.radiusMultiplier=i.radiusMultiplier||1;var a=h.spheres(n,this._canvas.gl(),i);return this.add(e,a)},sline:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.uniform([1,0,1]),i.splineDetail=i.splineDetail||this.options("splineDetail"),i.strength=i.strength||1,i.lineWidth=i.lineWidth||4;var a=h.sline(n,this._canvas.gl(),i);return this.add(e,a)},cartoon:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.bySS(),i.strength=i.strength||1,i.splineDetail=i.splineDetail||this.options("splineDetail"),i.arcDetail=i.arcDetail||this.options("arcDetail"),i.radius=i.radius||.3,i.forceTube=i.forceTube||!1;var a=h.cartoon(n,this._canvas.gl(),i);return this.add(e,a)},surface:function(e,t,n){var r=this._handleStandardOptions(n),i=h.surface(t,this._canvas.gl(),r);return this.add(e,i)},tube:function(e,t,n){return(n=n||{}).forceTube=!0,this.cartoon(e,t,n)},ballsAndSticks:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.byElement(),i.radius=i.radius||.3,i.arcDetail=2*(i.arcDetail||this.options("arcDetail")),i.sphereDetail=i.sphereDetail||this.options("sphereDetail");var a=h.ballsAndSticks(n,this._canvas.gl(),i);return this.add(e,a)},lines:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.byElement(),i.lineWidth=i.lineWidth||4;var a=h.lines(n,this._canvas.gl(),i);return this.add(e,a)},points:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.byElement(),i.pointSize=i.pointSize||1;var a=h.points(n,this._canvas.gl(),i);return this.add(e,a)},trace:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.uniform([1,0,0]),i.radius=i.radius||.3,i.arcDetail=2*(i.arcDetail||this.options("arcDetail")),i.sphereDetail=i.sphereDetail||this.options("sphereDetail");var a=h.trace(n,this._canvas.gl(),i);return this.add(e,a)},_updateProjectionIntervals:function(e,t,n){n.eachAtom(function(n){for(var r=n.pos(),i=0;i<3;++i)t[i].update(m.dot(r,e[i]))});for(var r=0;r<3;++r)t[r].extend(1.5)},fitTo:function(e){var t=this._cam.mainAxes(),n=[new r.Range,new r.Range,new r.Range];if(e instanceof O)e.updateProjectionIntervals(t[0],t[1],t[2],n[0],n[1],n[2]);else if(void 0!==e.eachAtom)this._updateProjectionIntervals(t,n,e);else if(void 0!==e.length)for(var i=0;i<e.length;++i)this._updateProjectionIntervals(t,n,e[i]);this._fitToIntervals(t,n)},_fitToIntervals:function(e,t){if(t[0].empty()||t[1].empty()||t[2].empty())console.error("could not determine interval. No objects shown?");else{var n=t[0].center(),r=t[1].center(),i=t[2].center(),a=[n*e[0][0]+r*e[1][0]+i*e[2][0],n*e[0][1]+r*e[1][1]+i*e[2][1],n*e[0][2]+r*e[1][2]+i*e[2][2]],o=this._cam.fieldOfViewY(),s=this._cam.aspectRatio(),l=t[0].length()/s,u=t[1].length(),c=.5*Math.max(l,u)/Math.tan(.5*o),h=c+.5*t[2].length(),f=Math.max(c-.5,.1),d=1+c+t[2].length();this._cam.setNearFar(f,d),this.setCamera(this._cam.rotation(),a,h,this._options.animateTime),this.requestRedraw()}},autoZoom:function(){var e=this._cam.mainAxes(),t=[new r.Range,new r.Range,new r.Range];this.forEach(function(n){n.visible()&&n.updateProjectionIntervals(e[0],e[1],e[2],t[0],t[1],t[2])}),this._fitToIntervals(e,t)},slabInterval:function(){},autoSlab:function(){var e=this._options._slabMode.update(this._objects,this._cam);null!==e&&this._cam.setNearFar(e.near,e.far),this.requestRedraw()},rockAndRoll:function(e){return void 0===e?null!==this._rockAndRoll:e?(null===this._rockAndRoll&&(this._rockAndRoll=p.rockAndRoll(),this._animControl.add(this._rockAndRoll),this.requestRedraw()),!0):(this._animControl.remove(this._rockAndRoll),this._rockAndRoll=null,this.requestRedraw(),!1)},spin:function(e,t){return void 0===e?null!==this._spin:!1===e?(this._animControl.remove(this._spin),this._spin=null,this.requestRedraw(),!1):(!0===e&&(e=Math.PI/8),t=t||[0,1,0],null===this._spin?(this._spin=p.spin(t,e),this._animControl.add(this._spin)):(this._spin.setSpeed(e),this._spin.setAxis(t)),this.requestRedraw(),!0)},slabMode:function(e,t){var n=g(e,t=t||{}),r=n.update(this._objects,this._cam);null!==r&&this._cam.setNearFar(r.near,r.far),this._options.slabMode=n,this.requestRedraw()},label:function(e,t,n,r){var i=new f(this._canvas.gl(),this._textureCanvas,this._2dcontext,n,t,r);return this.add(e,i),i},customMesh:function(e,t){var n=this._handleStandardOptions(t),r=new d(e,this._canvas.gl(),n.float32Allocator,n.uint16Allocator,n.idPool);return this.add(e,r),r},_drawPickingScene:function(){var e=this._canvas.gl();e.clearColor(0,0,0,0),e.disable(e.BLEND),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.clearColor(this._options.background[0],this._options.background[1],this._options.background[2],1),e.cullFace(e.FRONT),e.enable(e.CULL_FACE),this._drawWithPass("select")},pick:function(e){this._pickBuffer.bind(),this._drawPickingScene();var t=new Uint8Array(4),n=this._canvas.gl();n.readPixels(e.x,this._options.height-e.y,1,1,n.RGBA,n.UNSIGNED_BYTE,t),this._pickBuffer.release(),t.data&&(t=t.data);var r=t[0]|t[1]<<8|t[2]<<16,i=t[3],a=this._objectIdManager.objectForId(r);if(void 0===a)return null;var o=m.create(),s=null,l=null;return 255!==i?(s=a.atom,l=a.geom.symWithIndex(i),m.transformMat4(o,a.atom.pos(),l)):void 0!==a.atom?(s=a.atom,o=a.atom.pos()):(s=a.userData,o=a.center),new y(s,a.geom,i<255?i:null,o,a,l)},add:function(e,t){return t.name(e),this._objects.push(t),this._objects.sort(function(e,t){return e.order()-t.order()}),this.requestRedraw(),t},_globToRegex:function(e){var t=e.replace(".","\\.").replace("*",".*");return new RegExp("^"+t+"$")},forEach:function(){var e,t="*";2===arguments.length?(e=arguments[1],t=arguments[0]):e=arguments[0];for(var n=this._globToRegex(t),r=0;r<this._objects.length;++r){var i=this._objects[r];n.test(i.name())&&e(i,r)}},get:function(e){for(var t=0;t<this._objects.length;++t)if(this._objects[t].name()===e)return this._objects[t];return console.error("could not find object with name",e),null},hide:function(e){this.forEach(e,function(e){e.hide()})},show:function(e){this.forEach(e,function(e){e.show()})},rm:function(e){for(var t=[],n=this._globToRegex(e),r=0;r<this._objects.length;++r){var i=this._objects[r];n.test(i.name())?i.destroy():t.push(i)}this._objects=t},all:function(){return this._objects},isWebGLSupported:function(){return this._canvas.isWebGLSupported()},destroy:function(){this.clear(),this._canvas.destroy(),this._canvas=null}},b.prototype.on=b.prototype.addListener,{Viewer:function(e,t){return new b(e,t)},isWebGLSupported:i.isWebGLSupported}}(n,i,a,o,s,l,u,c,y,b,w,T),C=function(){function e(e,t){this._chains=e||[],this._matrices=t||[]}function t(e){this._name=e,this._generators=[]}return e.prototype={addChain:function(e){this._chains.push(e)},chains:function(){return this._chains},addMatrix:function(e){this._matrices.push(e)},matrices:function(){return this._matrices},matrix:function(e){return this._matrices[e]}},t.prototype={name:function(){return this._name},generators:function(){return this._generators},generator:function(e){return this._generators[e]},addGenerator:function(e){this._generators.push(e)}},{SymGenerator:e,Assembly:t}}(),E=function(){var t=e.vec3;function n(){}function i(e,t,r,i,a,o,s,l){n.call(this),this._residue=e,this._bonds=[],this._isHetatm=!!o,this._name=t,this._pos=r,this._index=a,this._element=i,this._occupancy=void 0!==s?s:null,this._tempFactor=void 0!==l?l:null}function a(e,t){n.call(this),this._resView=e,this._atom=t,this._bonds=[]}return n.prototype={bondCount:function(){return this.bonds().length},eachBond:function(e){for(var t=this.bonds(),n=0,r=t.length;n<r;++n)e(t[n])},isConnectedTo:function(e){if(null===e)return!1;for(var t=e.full(),n=this.full(),r=this.bonds(),i=0,a=r.length;i<a;++i){var o=r[i];if(o.atom_one()===n&&o.atom_two()===t||o.atom_one()===t&&o.atom_two()===n)return!0}return!1}},r.derive(i,n,{addBond:function(e){this._bonds.push(e)},name:function(){return this._name},bonds:function(){return this._bonds},residue:function(){return this._residue},structure:function(){return this._residue.structure()},full:function(){return this},qualifiedName:function(){return this.residue().qualifiedName()+"."+this.name()},pos:function(){return this._pos},setPos:function(e){t.copy(this._pos,e)},element:function(){return this._element},index:function(){return this._index},prop:function(e){return this[e]()},occupancy:function(){return this._occupancy},tempFactor:function(){return this._tempFactor},isHetatm:function(){return this._isHetatm}}),r.derive(a,n,{full:function(){return this._atom},name:function(){return this._atom.name()},pos:function(){return this._atom.pos()},element:function(){return this._atom.element()},residue:function(){return this._resView},bonds:function(){return this._atom.bonds()},index:function(){return this._atom.index()},occupancy:function(){return this._atom.occupancy()},tempFactor:function(){return this._atom.tempFactor()},qualifiedName:function(){return this._atom.qualifiedName()},isHetatm:function(){return this._atom.isHetatm()}}),{Atom:i,AtomView:a}}(),A=function(t){var n=e.vec3,i=t.Atom,a=t.AtomView;function o(){}function s(e,t,n,r){o.call(this),this._name=t,this._num=n,this._insCode=r,this._atoms=[],this._ss="C",this._chain=e,this._isAminoacid=!1,this._isNucleotide=!1,this._index=e.residues().length}function l(e,t){o.call(this),this._chainView=e,this._atoms=[],this._residue=t}return o.prototype={prop:function(e){return this[e]()},isWater:function(){return"HOH"===this.name()||"DOD"===this.name()},eachAtom:function(e,t){t|=0;for(var n=0;n<this._atoms.length;n+=1){if(!1===e(this._atoms[n],t))return!1;t+=1}return t},qualifiedName:function(){var e=this.chain().name()+"."+this.name()+this.num();return"\0"===this.insCode()?e:e+this.insCode()},atom:function(e){if("string"==typeof e){for(var t=0;t<this._atoms.length;++t)if(this._atoms[t].name()===e)return this._atoms[t];return null}return e>=this._atoms.length&&e<0?null:this._atoms[e]},centralAtom:function(){return this.isAminoacid()?this.atom("CA"):this.isNucleotide()?this.atom("C3'"):null},center:function(){var e=0,t=n.create();return this.eachAtom(function(r){n.add(t,t,r.pos()),e+=1}),e>0&&n.scale(t,t,1/e),t},isAminoacid:function(){return this._isAminoacid},isNucleotide:function(){return this._isNucleotide}},r.derive(s,o,{_deduceType:function(){this._isNucleotide=null!==this.atom("P")&&null!==this.atom("C3'"),this._isAminoacid=null!==this.atom("N")&&null!==this.atom("CA")&&null!==this.atom("C")&&null!==this.atom("O")},name:function(){return this._name},insCode:function(){return this._insCode},num:function(){return this._num},full:function(){return this},addAtom:function(e,t,n,r,a,o){var s=new i(this,e,t,n,this.structure().nextAtomIndex(),r,a,o);return this._atoms.push(s),s},ss:function(){return this._ss},setSS:function(e){this._ss=e},index:function(){return this._index},atoms:function(){return this._atoms},chain:function(){return this._chain},structure:function(){return this._chain.structure()}}),r.derive(l,o,{addAtom:function(e,t){if(t)for(var n=0;n<this._atoms.length;++n){var r=this._atoms[n];if(r.index()===e.index())return r}var i=new a(this,e.full());return this._atoms.push(i),i},removeAtom:function(e){var t=this._atoms.length;return this._atoms=this._atoms.filter(function(t){return t.index()!==e.index()}),t!==this._atoms.length},full:function(){return this._residue},num:function(){return this._residue.num()},insCode:function(){return this._residue.insCode()},ss:function(){return this._residue.ss()},index:function(){return this._residue.index()},chain:function(){return this._chainView},name:function(){return this._residue.name()},atoms:function(){return this._atoms},qualifiedName:function(){return this._residue.qualifiedName()},containsResidue:function(e){return this._residue.full()===e.full()},isAminoacid:function(){return this._residue.isAminoacid()},isNucleotide:function(){return this._residue.isNucleotide()},isWater:function(){return this._residue.isWater()}}),{ResidueView:l,Residue:s}}(E),R=function(){var t,n,r,i,a=e.vec3;function o(){this._trace=[]}function s(e,t,n){this._fullTrace=e,this._fullTraceBegin=t,this._fullTraceEnd=n,this._isNTerminal=0===this._fullTraceBegin,this._isCTerminal=this._fullTrace.length()===this._fullTraceEnd;var r=this._fullTraceEnd-this._fullTraceBegin;this._isCTerminal||++r,this._isNTerminal||(++r,this._fullTraceBegin-=1),this._length=r}return o.prototype={push:function(e){this._trace.push(e)},length:function(){return this._trace.length},residueAt:function(e){return this._trace[e]},posAt:function(e,t){return a.copy(e,this._trace[t].centralAtom().pos()),e},normalAt:function(e,t){var n=this._trace[t];return n.isAminoacid()&&a.sub(e,n.atom("O").pos(),n.atom("C").pos()),a.normalize(e,e),e},centralAtomAt:function(e){return this._trace[e].centralAtom()},tangentAt:(t=a.create(),n=a.create(),function(e,r){r>0?this.posAt(t,r-1):this.posAt(t,r),r<this._trace.length-1?this.posAt(n,r+1):this.posAt(n,r),a.sub(e,n,t)}),fullTraceIndex:function(e){return e},subsets:function(e){for(var t=0,n=0,r=[];n<e.length&&t<this._trace.length;){for(var i=e[n].full().index();this._trace.length>t&&this._trace[t].index()<i;)++t;if(t>=this._trace.length)break;for(var a=this._trace[t].index();e.length>n&&e[n].full().index()<a;)++n;if(n>=e.length)break;for(var o=t;e.length>n&&this._trace.length>t&&e[n].full().index()===this._trace[t].index();)++n,++t;var l=t;r.push(new s(this,o,l))}return r}},o.prototype.smoothPosAt=o.prototype.posAt,o.prototype.smoothNormalAt=o.prototype.normalAt,s.prototype={length:function(){return this._length},residueAt:function(e){return this._fullTrace.residueAt(this._fullTraceBegin+e)},_interpolate:(r=a.create(),i=a.create(),function(e,t,n,o){return this.tangentAt(r,t),this.tangentAt(i,n),a.scale(r,r,o),a.scale(i,i,o),h.cubicHermiteInterpolate(e,this.centralAtomAt(t).pos(),r,this.centralAtomAt(n).pos(),i,.5,0),e}),smoothPosAt:function(e,t,n){if(0===t&&!this._isNTerminal)return this._interpolate(e,t,t+1,n);if(t===this._length-1&&!this._isCTerminal)return this._interpolate(e,t-1,t,n);var r=this.centralAtomAt(t);return a.copy(e,r.pos()),e},smoothNormalAt:function(e,t){return this._fullTrace.normalAt(e,t+this._fullTraceBegin),e},posAt:function(e,t){var n=this.centralAtomAt(t),r=null;return a.copy(e,n.pos()),0!==t||this._isNTerminal||(r=this.centralAtomAt(t+1),a.add(e,e,r.pos()),a.scale(e,e,.5)),t!==this._length-1||this._isCTerminal||(r=this.centralAtomAt(t-1),a.add(e,e,r.pos()),a.scale(e,e,.5)),e},centralAtomAt:function(e){return this.residueAt(e).centralAtom()},fullTraceIndex:function(e){return this._fullTraceBegin+e},tangentAt:function(e,t){return this._fullTrace.tangentAt(e,t+this._fullTraceBegin)}},{TraceSubset:s,BackboneTrace:o}}(),k=function(t,n){var i=e.vec3,a=t.Residue,o=t.ResidueView;function s(e,t){return e<<8|t.charCodeAt(0)}function l(e,t){return e.num()<t.num()}function u(e){return{num:function(){return e}}}function c(){}function h(e,t){c.call(this),this._structure=e,this._name=t,this._cachedTraces=[],this._residues=[],this._rnumsOrdered=!0}function f(e,t,n){var r,a;if(e?(r=t.atom("C"),a=n.atom("N")):(r=t.atom("O3'"),a=n.atom("P")),r.isConnectedTo(a))return!1;var o=i.sqrDist(r.pos(),a.pos());return Math.abs(o-2.25)>1}function d(e,t){t.length()<2||e.push(t)}function p(e,t,n){if(0===e.length)return!0;if(!t)return!1;var r=s(n.num(),n.insCode()),i=e[e.length-1];return s(i.num(),i.insCode())<r}function m(e,t){c.call(this),this._chain=t,this._residues=[],this._molView=e,this._residueMap={},this._rnumsOrdered=!0}return c.prototype={eachAtom:function(e,t){t|=0;for(var n=0;n<this._residues.length;n+=1)if(!1===(t=this._residues[n].eachAtom(e,t)))return!1;return t},atomCount:function(){for(var e=0,t=this.residues(),n=0;n<t.length;++n)e+=t[n].atoms().length;return e},eachResidue:function(e){for(var t=0;t<this._residues.length;t+=1)if(!1===e(this._residues[t]))return!1},residues:function(){return this._residues},structure:function(){return this._structure},asView:function(){var e=this.structure().createEmptyView();return e.addChain(this,!0),e},residueByRnum:function(e){var t=this.residues();if(this._rnumsOrdered){var n=r.binarySearch(t,u(e),l);return-1===n?null:t[n]}for(var i=0;i<t.length;++i)if(t[i].num()===e)return t[i];return null},residuesInRnumRange:function(e,t){var n,i,a=[],o=this.residues();if(!0===this._rnumsOrdered){var s=r.indexFirstLargerEqualThan(o,u(e),l);if(-1===s)return a;var c=r.indexLastSmallerEqualThan(o,u(t),l);if(-1===c)return a;for(n=s;n<=c;++n)a.push(this._residues[n])}else for(n=0,i=o.length;n!==i;++n){var h=o[n];h.num()>=e&&h.num()<=t&&a.push(h)}return a},prop:function(e){return this[e]()}},r.derive(h,c,{name:function(){return this._name},full:function(){return this},addResidue:function(e,t,n){var r=new a(this,e,t,n=n||"\0");return this._rnumsOrdered=p(this._residues,this._rnumsOrdered,r),this._residues.push(r),r},assignSS:function(e,t,n){for(var r=s(e[0],e[1]),i=s(t[0],t[1]),a=1;a<this._residues.length-1;++a){var o=this._residues[a],l=s(o.num(),o.insCode());l<=r||l>=i||o.setSS(n)}},eachBackboneTrace:function(e){this._cacheBackboneTraces();for(var t=0;t<this._cachedTraces.length;++t)e(this._cachedTraces[t])},_cacheBackboneTraces:function(){if(!(this._cachedTraces.length>0)){for(var e=new n.BackboneTrace,t=null,r=0;r<this._residues.length;r+=1){var i=this._residues[r],a=i.isAminoacid(),o=i.isNucleotide();!0===t&&!a||!1===t&&!o||null===t&&!o&&!a?(d(this._cachedTraces,e),t=null,e=new n.BackboneTrace):0!==e.length()?(f(t,this._residues[r-1],i)&&(d(this._cachedTraces,e),e=new n.BackboneTrace),e.push(i)):(e.push(i),t=i.isAminoacid())}d(this._cachedTraces,e)}},backboneTraces:function(){var e=[];return this.eachBackboneTrace(function(t){e.push(t)}),e}}),r.derive(m,c,{addResidue:function(e,t){var n=new o(this,e.full());if(this._rnumsOrdered=p(this._residues,this._rnumsOrdered,e),this._residues.push(n),this._residueMap[e.full().index()]=n,t)for(var r=e.atoms(),i=0;i<r.length;++i)n.addAtom(r[i].full(),!1);return n},addAtom:function(e){var t=this._residueMap[e.residue().full().index()];return void 0===t&&(t=this.addResidue(e.residue())),t.addAtom(e,!0)},removeAtom:function(e,t){var n=this._residueMap[e.residue().full().index()];if(void 0===n)return!1;var r=n.removeAtom(e);return r&&0===n.atoms().length&&t&&(delete this._residueMap[e.residue().full().index()],this._residues=this._residues.filter(function(e){return e!==n})),r},containsResidue:function(e){var t=this._residueMap[e.full().index()];return void 0!==t&&t.full()===e.full()},eachBackboneTrace:function(e){for(var t=this._chain.backboneTraces(),n=0;n<t.length;++n)for(var r=t[n].subsets(this._residues),i=0;i<r.length;++i)e(r[i])},backboneTraces:function(){var e=[];return this.eachBackboneTrace(function(t){e.push(t)}),e},full:function(){return this._chain},name:function(){return this._chain.name()},structure:function(){return this._molView}}),{Chain:h,ChainView:m}}(A,R),B=e.vec3,P={Bond:function(e,t){var n={atom_one:e,atom_two:t};return{atom_one:function(){return n.atom_one},atom_two:function(){return n.atom_two},mid_point:function(e){return e||(e=B.create()),B.add(e,n.atom_one.pos(),n.atom_two.pos()),B.scale(e,e,.5),e}}}},M=function(){function e(e,t){for(var n=0;n<t.length;++n)if(!t[n](e))return!1;return!0}function t(e,t){var n=e.residues();t.rnumRange&&(n=e.residuesInRnumRange(t.rnumRange[0],t.rnumRange[1]));var r,i,a=[];if(void 0!==t.rindexRange){for(r=t.rindexRange[0],i=Math.min(n.length-1,t.rindexRange[1]);r<=i;++r)a.push(n[r]);return a}if(t.rindices&&void 0!==t.rindices.length){for(a=[],r=0;r<t.rindices.length;++r)a.push(n[t.rindices[r]]);return a}return n}return{dict:function(n,r,i){var a=function(e){var t=[];if(void 0!==e.rname&&t.push(function(t){return t.name()===e.rname}),void 0!==e.rnames&&t.push(function(t){for(var n=t.name(),r=0;r<e.rnames.length;++r)if(n===e.rnames[r])return!0;return!1}),void 0!==e.rnums){for(var n={},r=0;r<e.rnums.length;++r)n[e.rnums[r]]=!0;t.push(function(e){var t=e.num();return!0===n[t]})}return void 0!==e.rnum&&t.push(function(t){return t.num()===e.rnum}),t}(i),o=function(e){var t=[];return void 0!==e.aname&&t.push(function(t){return t.name()===e.aname}),void 0!==e.hetatm&&t.push(function(t){return t.isHetatm()===e.hetatm}),void 0!==e.anames&&t.push(function(t){for(var n=t.name(),r=0;r<e.anames.length;++r)if(n===e.anames[r])return!0;return!1}),t}(i),s=function(e){var t=[];return void 0!==e.cname&&(e.chain=e.cname),void 0!==e.cnames&&(e.chains=e.cnames),void 0!==e.chain&&t.push(function(t){return t.name()===e.chain}),void 0!==e.chains&&t.push(function(t){for(var n=t.name(),r=0;r<e.chains.length;++r)if(n===e.chains[r])return!0;return!1}),t}(i);i.rindex&&(i.rindices=[i.rindex]);for(var l=0;l<n._chains.length;++l){var u=n._chains[l];if(e(u,s))for(var c=t(u,i),h=null,f=0;f<c.length;++f)if(e(c[f],a)){h||(h=r.addChain(u,!1));for(var d=null,p=c[f].atoms(),m=0;m<p.length;++m)e(p[m],o)&&(d||(d=h.addResidue(c[f],!1)),d.addAtom(p[m]))}}return r}}}(),U=function(t,n,i){var a,o=e.vec3,s=t.Chain,l=t.ChainView,u=n.Bond,c={H:.31,HE:.28,LI:1.28,BE:.96,B:.84,C:.76,N:.71,O:.66,F:.57,NE:.58,NA:1.66,MG:1.41,AL:1.21,SI:1.11,P:1.07,S:1.05,CL:1.02,AR:1.06,K:2.03,CA:1.76,SC:1.7,TI:1.6,V:1.53,CR:1.39,MN:1.39,FE:1.32,CO:1.26,NI:1.24,CU:1.32,ZN:1.22,GA:1.22,GE:1.2,AS:1.19,SE:1.2,BR:1.2,KR:1.16,RB:2.2,SR:1.95,Y:1.9,ZR:1.75,NB:1.64,MO:1.54,TC:1.47,RU:1.46,RH:1.42,PD:1.39,AG:1.45,CD:1.44,IN:1.42,SN:1.39,SB:1.39,TE:1.38,I:1.39,XE:1.4,CS:2.44,BA:2.15,LA:2.07,CE:2.04,PR:2.03,ND:2.01,PM:1.99,SM:1.98,EU:1.98,GD:1.96,TB:1.94,DY:1.92,HO:1.92,ER:1.89,TM:1.9,YB:1.87,LU:1.87,HF:1.75,TA:1.7,W:1.62,RE:1.51,OS:1.44,IR:1.41,PT:1.36,AU:1.36,HG:1.32,TL:1.45,PB:1.46,BI:1.48,PO:1.4,AT:1.5,RN:1.5,FR:2.6,RA:2.21,AC:2.15,TH:2.06,PA:2,U:1.96,NP:1.9,PU:1.87,AM:1.8,CM:1.69};function f(e){var t=c[e.toUpperCase()];return void 0!==t?t:1.5}function d(){}function p(){d.call(this),this._chains=[],this._assemblies=[],this._nextAtomIndex=0}function m(e){d.call(this),this._mol=e,this._chains=[]}return d.prototype={eachResidue:function(e){for(var t=0;t<this._chains.length;t+=1)if(!1===this._chains[t].eachResidue(e))return!1},eachAtom:function(e,t){t|=0;for(var n=0;n<this._chains.length;n+=1)if(!1===(t=this._chains[n].eachAtom(e,t)))return!1},residueCount:function(){for(var e=this.chains(),t=0,n=0;n<e.length;++n)t+=e[n].residues().length;return t},eachChain:function(e){for(var t=this.chains(),n=0;n<t.length;++n)if(!1===e(t[n]))return},atomCount:function(){for(var e=this.chains(),t=0,n=0;n<e.length;++n)t+=e[n].atomCount();return t},atoms:function(){var e=[];return this.eachAtom(function(t){e.push(t)}),e},atom:function(e){var t=e.split("."),n=this.chain(t[0]);if(null===n)return null;var r=n.residueByRnum(parseInt(t[1],10));return null===r?null:r.atom(t[2])},center:function(){var e=o.create(),t=0;return this.eachAtom(function(n){o.add(e,e,n.pos()),t+=1}),t&&o.scale(e,e,1/t),e},boundingSphere:function(){var e=this.center(),t=0;return this.eachAtom(function(n){t=Math.max(t,o.sqrDist(e,n.pos()))}),new h.Sphere(e,Math.sqrt(t))},backboneTraces:function(){for(var e=this.chains(),t=[],n=0;n<e.length;++n)Array.prototype.push.apply(t,e[n].backboneTraces());return t},select:function(e){return"protein"===e?this.residueSelect(function(e){return e.isAminoacid()}):"water"===e?this.residueSelect(function(e){return e.isWater()}):"ligand"===e?this.residueSelect(function(e){return!e.isAminoacid()&&!e.isWater()}):i.dict(this,new m(this),e||{})},residueSelect:function(e){console.time("Mol.residueSelect");for(var t=new m(this.full()),n=0;n<this._chains.length;++n)for(var r=this._chains[n],i=null,a=r.residues(),o=0;o<a.length;++o)e(a[o])&&(i||(i=t.addChain(r,!1)),i.addResidue(a[o],!0));return console.timeEnd("Mol.residueSelect"),t},atomSelect:function(e){console.time("Mol.atomSelect");for(var t=new m(this.full()),n=0;n<this._chains.length;++n)for(var r=this._chains[n],i=null,a=r.residues(),o=0;o<a.length;++o)for(var s=null,l=a[o],u=l.atoms(),c=0;c<u.length;++c)e(u[c])&&(i||(i=t.addChain(r,!1)),s||(s=i.addResidue(l,!1)),s.addAtom(u[c]));return console.timeEnd("Mol.atomSelect"),t},assembly:function(e){for(var t=this.assemblies(),n=0;n<t.length;++n)if(t[n].name()===e)return t[n];return null},chainsByName:function(e){for(var t={},n=this.chains(),r=0;r<n.length;++r)t[n[r].name()]=n[r];for(var i=[],a=0;a<e.length;++a){var o=t[e[a]];void 0!==o&&i.push(o)}return i},selectWithin:(a=o.create(),function(e,t){console.time("Mol.selectWithin");var n=(t=t||{}).radius||4,r=n*n,i=!!t.matchResidues,s=[];e.eachAtom(function(e){s.push(e)});for(var l=new m(this.full()),u=null,c=null,h=this.chains(),f=!1,d=0;d<h.length;++d){var p=h[d].residues();c=null;for(var v=0;v<p.length;++v){u=null,f=!1;for(var _=p[v].atoms(),g=0;g<_.length&&!f;++g)for(var y=0;y<s.length;++y)if(o.sub(a,_[g].pos(),s[y].pos()),!(o.sqrLen(a)>r)){if(c||(c=l.addChain(h[d].full(),!1)),u||(u=c.addResidue(p[v].full(),i)),i){f=!0;break}u.addAtom(_[g].full());break}}}return console.timeEnd("Mol.selectWithin"),l}),createEmptyView:function(){return new m(this.full())}},r.derive(p,d,{addAssembly:function(e){this._assemblies.push(e)},setAssemblies:function(e){this._assemblies=e},assemblies:function(){return this._assemblies},chains:function(){return this._chains},full:function(){return this},containsResidue:function(e){return e.full().structure()===this},chainByName:function(e){for(var t=0;t<this._chains.length;++t)if(this._chains[t].name()===e)return this._chains[t];return null},chain:function(e){return this.chainByName(e)},nextAtomIndex:function(){var e=this._nextAtomIndex;return this._nextAtomIndex+=1,e},addChain:function(e){var t=new s(this,e);return this._chains.push(t),t},connect:function(e,t){var n=new u(e,t);return e.addBond(n),t.addBond(n),n},deriveConnectivity:function(){console.time("Mol.deriveConnectivity");var e=this,t=null;this.eachResidue(function(n){for(var r,i,a,s,l,u=n.atoms(),c=u.length,h=0;h<c;h+=1)for(var d=u[h],p=d.pos(),m=f(d.element()),v=0;v<h;v+=1){var _=u[v],g=f(_.element()),y=m+g-.3,b=m+g+.3;(r=o.sqrDist(p,_.pos()))<b*b&&r>y*y&&e.connect(d,_)}n._deduceType(),null!==t&&(n.isAminoacid()&&t.isAminoacid()&&(i=e,a=n,s=t.atom("C"),l=a.atom("N"),s&&l&&o.sqrDist(s.pos(),l.pos())<1.6*1.6&&i.connect(l,s)),n.isNucleotide()&&t.isNucleotide()&&function(e,t,n){var r=t.atom("O3'"),i=n.atom("P");r&&i&&o.sqrDist(r.pos(),i.pos())<1.7*1.7&&e.connect(r,i)}(e,t,n)),t=n}),console.timeEnd("Mol.deriveConnectivity")}}),r.derive(m,d,{full:function(){return this._mol},assemblies:function(){return this._mol.assemblies()},addChain:function(e,t){var n=new l(this,e.full());if(this._chains.push(n),t)for(var r=e.residues(),i=0;i<r.length;++i)n.addResidue(r[i],!0);return n},addAtom:function(e){var t=this.chain(e.residue().chain().name());return null===t&&(t=this.addChain(e.residue().chain())),t.addAtom(e)},removeAtom:function(e,t){if(null===e)return!1;var n=this.chain(e.residue().chain().name());if(null===n)return!1;var r=n.removeAtom(e,t);return r&&0===n.residues().length&&(this._chains=this._chains.filter(function(e){return e!==n})),r},containsResidue:function(e){if(!e)return!1;var t=this.chain(e.chain().name());return!!t&&t.containsResidue(e)},addResidues:function(e,t){var n=this,r={};return e.forEach(function(e){var i=e.chain().name();void 0===r[i]&&(r[i]=n.addChain(e.chain(),!1)),r[i].addResidue(e,t)}),r},chains:function(){return this._chains},chain:function(e){for(var t=0;t<this._chains.length;++t)if(this._chains[t].name()===e)return this._chains[t];return null}}),{MolView:m,Mol:p}}(k,P,M),F=function(e){var t,n=Math.pow(2,-52),r=1e-64/n,i=0,a=0,o=0,s=0,l=0,u=e,c=u.length,h=u[0].length;if(c<h)throw"Need more rows than columns";var f=new Array(h),d=new Array(h);for(a=0;a<h;a++)f[a]=d[a]=0;var p=[];for(a=0;a<h;++a){var m=[];for(p.push([]),o=0;o<h;++o)m.push(0);p.push(m)}function v(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var _=0,g=0,y=0,b=0,w=0,T=0,S=0;for(a=0;a<h;a++){for(f[a]=g,S=0,l=a+1,o=a;o<c;o++)S+=u[o][a]*u[o][a];if(S<=r)g=0;else for(_=u[a][a],g=Math.sqrt(S),_>=0&&(g=-g),y=_*g-S,u[a][a]=_-g,o=l;o<h;o++){for(S=0,s=a;s<c;s++)S+=u[s][a]*u[s][o];for(_=S/y,s=a;s<c;s++)u[s][o]+=_*u[s][a]}for(d[a]=g,S=0,o=l;o<h;o++)S+=u[a][o]*u[a][o];if(S<=r)g=0;else{for(_=u[a][a+1],g=Math.sqrt(S),_>=0&&(g=-g),y=_*g-S,u[a][a+1]=_-g,o=l;o<h;o++)f[o]=u[a][o]/y;for(o=l;o<c;o++){for(S=0,s=l;s<h;s++)S+=u[o][s]*u[a][s];for(s=l;s<h;s++)u[o][s]+=S*f[s]}}(w=Math.abs(d[a])+Math.abs(f[a]))>b&&(b=w)}for(a=h-1;-1!=a;a+=-1){if(0!=g){for(y=g*u[a][a+1],o=l;o<h;o++)p[o][a]=u[a][o]/y;for(o=l;o<h;o++){for(S=0,s=l;s<h;s++)S+=u[a][s]*p[s][o];for(s=l;s<h;s++)p[s][o]+=S*p[s][a]}}for(o=l;o<h;o++)p[a][o]=0,p[o][a]=0;p[a][a]=1,g=f[a],l=a}for(a=h-1;-1!=a;a+=-1){for(l=a+1,g=d[a],o=l;o<h;o++)u[a][o]=0;if(0!=g){for(y=u[a][a]*g,o=l;o<h;o++){for(S=0,s=l;s<c;s++)S+=u[s][a]*u[s][o];for(_=S/y,s=a;s<c;s++)u[s][o]+=_*u[s][a]}for(o=a;o<c;o++)u[o][a]=u[o][a]/g}else for(o=a;o<c;o++)u[o][a]=0;u[a][a]+=1}for(n*=b,s=h-1;-1!=s;s+=-1)for(var x=0;x<50;x++){var C=!1;for(l=s;-1!=l;l+=-1){if(Math.abs(f[l])<=n){C=!0;break}if(Math.abs(d[l-1])<=n)break}if(!C){i=0,S=1;var E=l-1;for(a=l;a<s+1&&(_=S*f[a],f[a]=i*f[a],!(Math.abs(_)<=n));a++)for(y=v(_,g=d[a]),d[a]=y,i=g/y,S=-_/y,o=0;o<c;o++)w=u[o][E],T=u[o][a],u[o][E]=w*i+T*S,u[o][a]=-w*S+T*i}if(T=d[s],l==s){if(T<0)for(d[s]=-T,o=0;o<h;o++)p[o][s]=-p[o][s];break}if(x>=49)throw"Error: no convergence.";for(b=d[l],g=v(_=(((w=d[s-1])-T)*(w+T)+((g=f[s-1])-(y=f[s]))*(g+y))/(2*y*w),1),_=_<0?((b-T)*(b+T)+y*(w/(_-g)-y))/b:((b-T)*(b+T)+y*(w/(_+g)-y))/b,i=1,S=1,a=l+1;a<s+1;a++){for(g=f[a],w=d[a],y=S*g,g*=i,T=v(_,y),f[a-1]=T,_=b*(i=_/T)+g*(S=y/T),g=-b*S+g*i,y=w*S,w*=i,o=0;o<h;o++)b=p[o][a-1],T=p[o][a],p[o][a-1]=b*i+T*S,p[o][a]=-b*S+T*i;for(T=v(_,y),d[a-1]=T,_=(i=_/T)*g+(S=y/T)*w,b=-S*g+i*w,o=0;o<c;o++)w=u[o][a-1],T=u[o][a],u[o][a-1]=w*i+T*S,u[o][a]=-w*S+T*i}f[l]=0,f[s]=_,d[s]=b}for(a=0;a<d.length;a++)d[a]<n&&(d[a]=0);for(a=0;a<h;a++)for(o=a-1;o>=0;o--)if(d[o]<d[a]){for(i=d[o],d[o]=d[a],d[a]=i,s=0;s<u.length;s++)t=u[s][a],u[s][a]=u[s][o],u[s][o]=t;for(s=0;s<p.length;s++)t=p[s][a],p[s][a]=p[s][o],p[s][o]=t;a=o}return{U:u,S:d,V:p}},D=function(){var t,n,r,i,a,o,s,l,u,c,h=e.vec3,f=e.mat3,d=(e.quat,function(e,t){if(h.set(t,0,0,0),0!==e.length){for(var n=0;n<e.length;++n){var r=e[n];h.add(t,t,r.pos())}h.scale(t,t,1/e.length)}}),p=(t=h.create(),n=h.create(),function(e,r,i,a,o){o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=0,o[6]=0,o[7]=0,o[8]=0;for(var s=0;s<r.length;++s){h.sub(t,e[s].pos(),i),h.sub(n,r[s].pos(),a);var l=t,u=n;o[0]+=l[0]*u[0],o[1]+=l[0]*u[1],o[2]+=l[0]*u[2],o[3]+=l[1]*u[0],o[4]+=l[1]*u[1],o[5]+=l[1]*u[2],o[6]+=l[2]*u[0],o[7]+=l[2]*u[1],o[8]+=l[2]*u[2]}});function m(e){if(null==e||"all"===e)return null;if("backbone"===e)return{CA:!0,C:!0,O:!0,N:!0};if(void 0!==e.substr){for(var t={},n=e.split(","),r=0;r<n.length;++r)t[n[r].trim()]=!0;return t}for(t={},r=0;r<e.length;++r)t[e[r]]=!0;return t}function v(e,t,n,r,i){for(var a=e.atoms(),o=t.atoms(),s=0;s<a.length;++s){var l=a[s];if(null===i||!0===i[l.name()])for(var u=0;u<o.length;++u){var c=o[u];if(c.name()===l.name()){n.push(l),r.push(c);break}}}}function _(e,t,n,r){for(var i=e.full().createEmptyView(),a=t.full().createEmptyView(),o=Math.min(e.chains().length,t.chains().length),s=m(n),l=0;l<o;++l){var u=e.chains()[l],c=t.chains()[l],h=r(u,c),f=h[0],d=h[1];if(f.length!==d.length)return console.error("chains",u.name()," and",c.name()," do not contain the same number of residues."),null;for(var p=i.addChain(u),_=a.addChain(c),g=0;g<f.length;++g){var y=f[g],b=d[g],w=[],T=[];if(v(y,b,w,T,s),0!==w.length)for(var S=p.addResidue(y),x=_.addResidue(b),C=0;C<w.length;++C)S.addAtom(w[C]),x.addAtom(T[C])}}return[i,a]}return{superpose:(r=h.create(),i=h.create(),a=h.create(),o=f.create(),s=f.create(),l=f.create(),u=f.create(),c=f.create(),function(e,t){var n=e.atoms(),m=t.atoms();if(d(m,r),d(n,i),n.length!==m.length)return console.error("atom counts do not match ("+n.length+"in structure vs "+m.length+" in reference)"),!1;if(n.length<3)return console.error("at least 3 atoms are required for superposition"),!1;p(n,m,i,r,s);var v=[[s[0],s[1],s[2]],[s[3],s[4],s[5]],[s[6],s[7],s[8]]],_=F(v);u[0]=_.U[0][0],u[1]=_.U[0][1],u[2]=_.U[0][2],u[3]=_.U[1][0],u[4]=_.U[1][1],u[5]=_.U[1][2],u[6]=_.U[2][0],u[7]=_.U[2][1],u[8]=_.U[2][2];var g=f.determinant(u);c[0]=_.V[0][0],c[1]=_.V[0][1],c[2]=_.V[0][2],c[3]=_.V[1][0],c[4]=_.V[1][1],c[5]=_.V[1][2],c[6]=_.V[2][0],c[7]=_.V[2][1],c[8]=_.V[2][2];var y=f.determinant(c);f.identity(l),g*y<0&&(console.log("determinants smaller than zero!"),l[8]=-1,f.mul(u,u,l)),console.log(f.str(u)),f.mul(o,f.transpose(c,c),u);for(var b=e.full().atoms(),w=0;w<b.length;++w){var T=b[w];h.sub(a,T.pos(),i),h.transformMat3(a,a,o),h.add(a,r,a),T.setPos(a)}return!0}),matchResiduesByNum:function(e,t,n){return _(e,t,n,function(e,t){for(var n=[],r=[],i=e.residues(),a=0;a<i.length;++a){var o=t.residueByRnum(i[a].num());null!==o&&(n.push(i[a]),r.push(o))}return[n,r]})},matchResiduesByIndex:function(e,t,n){return _(e,t,n,function(e,t){return[e.residues(),t.residues()]})},parseAtomNames:m,addAtomsPresentInBoth:v}}(),U=function(t){var n,r,i=e.vec3,a=(n=i.create(),r=i.create(),function(e,t,a,o){for(var s=Math.max(0,t-2);s<=t;++s)for(var l=2;l<5;++l)if(!(s+l>=e.length())){var u=i.dist(e.posAt(n,s),e.posAt(r,s+l));if(Math.abs(u-a[l-2])>o)return!1}return!0}),o=function(e,t){return a(e,t,[5.45,5.18,6.37],2.1)},s=function(e,t){return a(e,t,[6.1,10.4,13],1.42)};function l(e){for(var t=0;t<e.length();++t)o(e,t)?e.residueAt(t).setSS("H"):s(e,t)?e.residueAt(t).setSS("E"):e.residueAt(t).setSS("C")}return{Mol:U.Mol,MolView:U.MolView,assignHelixSheet:function(e){console.time("mol.assignHelixSheet");for(var t=e.chains(),n=0;n<t.length;++n)t[n].eachBackboneTrace(l);console.timeEnd("mol.assignHelixSheet")},superpose:t.superpose,matchResiduesByIndex:t.matchResiduesByIndex,matchResiduesByNum:t.matchResiduesByNum}}(D),I=function(t){var n=e.vec3,r=e.mat4;function i(){this._assemblies={},this._current=null}function a(e){if(" "!==e[0]){var t=e.trim();if(4===t.length){for(var n=0,r=t.charCodeAt(n);n<4&&(r<65||r>122||r>90&&r<97);)++n,r=t.charCodeAt(n);return t[n]}var i=t.charCodeAt(0);return i>=48&&i<=57?t[1]:t.substr(0,2)}return e[1]}function o(e){this._helices=[],this._sheets=[],this._conect=[],this._serialToAtomMap={},this._structure=new U.Mol,this._remark350Reader=new i,this._currChain=null,this._currRes=null,this._currAtom=null,this._options={},this._options.conectRecords=!!e.conectRecords}function s(e){return e.split(/\r\n|\r|\n/g)}function l(e,t){console.time("pdb");for(var n=t||{},r=s(e),i=new o(n),a=[],l=0;l<r.length;l++){var u=i.processLine(r[l]);if(u===i.ERROR)return console.timeEnd("pdb"),null;if(u!==i.CONTINUE){var c=i.finish();if(null!==c&&a.push(c),u!==i.MODEL_COMPLETE||!n.loadAllModels)break}}var h=i.finish();return null!==h&&a.push(h),console.timeEnd("pdb"),n.loadAllModels?a:a[0]}function u(){this._structure=new U.Mol,this._reset(),this._sawEnd=!1}function c(e){console.time("sdf");for(var t=new u,n=s(e),r=0;r<n.length&&t.processLine(n[r]);r++);var i=t.finish();return console.timeEnd("sdf"),i}function h(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){n.response&&t(n.response)},n.send(null)}return i.prototype={assemblies:function(){var e=[];for(var t in this._assemblies)this._assemblies.hasOwnProperty(t)&&e.push(this._assemblies[t]);return e},assembly:function(e){return this._assemblies[e]},nextLine:function(e){if("B"===(e=e.substr(11))[0]&&"BIOMOLECULE:"===e.substr(0,12)){var n=e.substr(13).trim();return this._currentAssembly=new t.Assembly(n),void(this._assemblies[n]=this._currentAssembly)}if("APPLY THE FOLLOWING TO CHAINS:"!==e.substr(0,30)&&"                   AND CHAINS:"!==e.substr(0,30)){if("  BIOMT"===e.substr(0,7)){for(var i=parseInt(e[7],10)-1,a=0;" "!==e[12+a];)a+=1;var o=parseFloat(e.substr(13+a,9)),s=parseFloat(e.substr(23+a,9)),l=parseFloat(e.substr(33+a,9)),u=parseFloat(e.substr(43+a,14));return this._currentMatrix[0+i]=o,this._currentMatrix[4+i]=s,this._currentMatrix[8+i]=l,this._currentMatrix[12+i]=u,void(2===i&&(this._currentSymGen.addMatrix(this._currentMatrix),this._currentMatrix=r.create()))}}else{var c=e.substr(30).split(",");"A"===e[0]&&(this._currentSymGen=new t.SymGenerator,this._currentAssembly.addGenerator(this._currentSymGen)),this._currentMatrix=r.create();for(var h=0;h<c.length;++h){var f=c[h].trim();f.length&&this._currentSymGen.addChain(f)}}}},o.prototype={CONTINUE:1,MODEL_COMPLETE:2,FILE_END:3,ERROR:4,parseHelixRecord:function(e){var t=parseInt(e.substr(21,4),10),n=" "===e[25]?"\0":e[25],r=parseInt(e.substr(33,4),10),i=" "===e[37]?"\0":e[37],a=e[19];return this._helices.push({first:[t,n],last:[r,i],chainName:a}),!0},parseSheetRecord:function(e){var t=parseInt(e.substr(22,4),10),n=" "===e[26]?"\0":e[26],r=parseInt(e.substr(33,4),10),i=" "===e[37]?"\0":e[37],a=e[21];return this._sheets.push({first:[t,n],last:[r,i],chainName:a}),!0},parseAndAddAtom:function(e){var t=e[16];if(" "!==t&&"A"!==t)return!0;var r="H"===e[0],i=e[21],o=e.substr(17,3).trim(),s=e.substr(12,4),l=s.trim(),u=parseInt(e.substr(22,4),10);u!=u&&(u=1);var c=" "===e[26]?"\0":e[26],h=!1,f=!1;this._currChain&&this._currChain.name()===i||(f=!0,h=!0),this._currRes&&this._currRes.num()===u&&this._currRes.insCode()===c||(h=!0),f&&(this._currChain=this._structure.chain(i)||this._structure.addChain(i)),h&&(this._currRes=this._currChain.addResidue(o,u,c));for(var d=n.create(),p=0;p<3;++p)d[p]=parseFloat(e.substr(30+8*p,8));var m=e.substr(76,2).trim();""===m&&(m=a(s));var v=parseFloat(e.substr(54,6).trim()),_=parseFloat(e.substr(60,6).trim()),g=this._currRes.addAtom(l,d,m,r,isNaN(v)?null:v,isNaN(_)?null:_);if(this._options.conectRecords){var y=parseInt(e.substr(6,5).trim(),10);this._serialToAtomMap[y]=g}return!0},parseConectRecord:function(e){for(var t=parseInt(e.substr(6,5).trim(),10),n=[],r=0;r<4;++r){var i=parseInt(e.substr(11+5*r,6).trim(),10);isNaN(i)||i>t||n.push(i)}return this._conect.push({from:t,to:n}),!0},processLine:function(e){var t=e.substr(0,6);return"ATOM  "===t||"HETATM"===t?this.parseAndAddAtom(e)?this.CONTINUE:this.ERROR:"REMARK"===t?("350"===e.substr(7,3)&&this._remark350Reader.nextLine(e),this.CONTINUE):"HELIX "===t?this.parseHelixRecord(e)?this.CONTINUE:this.ERROR:"SHEET "===t?this.parseSheetRecord(e)?this.CONTINUE:this.ERROR:this._options.conectRecords&&"CONECT"===t?this.parseConectRecord(e)?this.CONTINUE:this.ERROR:"END   "===t?this.FILE_END:"ENDMDL"===t?this.MODEL_COMPLETE:this.CONTINUE},finish:function(){if(null===this._currChain)return null;var e,t=null;for(e=0;e<this._sheets.length;++e){var n=this._sheets[e];(t=this._structure.chain(n.chainName))&&t.assignSS(n.first,n.last,"E")}for(e=0;e<this._helices.length;++e){var r=this._helices[e];(t=this._structure.chain(r.chainName))&&t.assignSS(r.first,r.last,"H")}this._structure.setAssemblies(this._remark350Reader.assemblies()),this._options.conectRecords&&this._assignBondsFromConectRecords(this._structure),this._structure.deriveConnectivity(),console.log("imported",this._structure.chains().length,"chain(s),",this._structure.residueCount(),"residue(s)");var i=this._structure;return this._structure=new U.Mol,this._currChain=null,this._currRes=null,this._currAtom=null,i},_assignBondsFromConectRecords:function(e){for(var t=0;t<this._conect.length;++t)for(var n=this._conect[t],r=this._serialToAtomMap[n.from],i=0;i<n.to.length;++i){var a=this._serialToAtomMap[n.to[i]];e.connect(r,a)}}},u.prototype={processLine:function(e){var t=this._state;if(t<3){if(0===t){var n=e.trim();if(0===n.length)return!1;this._title=n}return this._sawEnd=!1,this._state++,!0}if(3===t){if(this._expectedAtomCount=parseInt(e.substr(0,3).trim(),10),this._expectedBondCount=parseInt(e.substr(3,3).trim(),10),isNaN(this._expectedAtomCount)||isNaN(this._expectedBondCount))return console.error("invalid bond definition"),!1;this._state++;var r=""+(this._structure.chains().length+1);this._currentChain=this._structure.addChain(r),this._currentResidue=this._currentChain.addResidue(this._title,1)}if(4===t){for(var i=[0,0,0],a=0;a<3;++a)if(i[a]=parseFloat(e.substr(10*a,10).trim()),isNaN(i[a]))return console.error("invalid atom position"),!1;var o=e.substr(31,3).trim();this._currentResidue.addAtom(o,i,o,!1),this._atomCount++,this._atomCount===this._expectedAtomCount&&this._state++}if(5===t){var s=parseInt(e.substr(0,3).trim(),10)-1,l=parseInt(e.substr(3,3).trim(),10)-1;if(isNaN(s)||isNaN(l))return console.error("invalid bond definition"),!1;var u=this._currentResidue.atoms();this._structure.connect(u[s],u[l]),this._bondCount++,this._bondCount===this._expectedBondCount&&this._state++}return"M  END"===e.substr(0,6)&&(this._sawEnd=!0,this._state++),"$$$$"===e.substr(0,4)&&this._reset(),!0},_reset:function(){this._state=0,this._currentResidue=null,this._currentChain=null,this._expectedAtomCount=null,this._expectedBondount=null,this._atomCount=0,this._bondCount=0,this._title=""},finish:function(){return this._sawEnd?this._structure:(console.error("truncated SDF file"),null)}},{pdb:l,sdf:c,Remark350Reader:i,fetchPdb:function(e,t,n){h(e,function(e){var r=l(e,n);t(r)})},fetchSdf:function(e,t){h(e,function(e){var n=c(e);t(n)})},guessAtomElementFromName:a}}(C),N=function(){var t,n,r,i,a,o,s,l,u,c,f,d=e.vec3,p=e.mat3,m=(t=d.create(),n=d.create(),function(e,r){d.set(t,0,0,0);var i=0;e.eachCentralAtom(function(e,n){d.add(t,t,n),i+=1}),0!==i&&(d.scale(t,t,1/i),r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r[8]=0,e.eachCentralAtom(function(e,i){d.sub(n,i,t);var a=n[0],o=n[1],s=n[2];r[0]+=o*o+s*s,r[1]-=a*o,r[2]-=a*s,r[5]-=o*s,r[4]+=a*a+s*s,r[8]+=a*a+o*o}),r[3]=r[1],r[6]=r[2],r[7]=r[5])});return{principalAxes:(r=p.create(),i=p.create(),a=d.create(),o=d.create(),s=d.create(),l=d.create(),u=d.create(),c=d.create(),f=d.create(),function(e){m(e,r);var t=h.diagonalizer(r);p.fromQuat(i,t);var n=!0;e.eachCentralAtom(function(e,t){d.transformMat3(s,t,i),n?(d.copy(a,s),d.copy(o,s),n=!1):(d.min(a,a,s),d.max(o,o,s))}),d.sub(l,o,a);var v=[[l[0],0],[l[1],1],[l[2],2]];v.sort(function(e,t){return t[0]-e[0]});var _=v[0][1],g=v[1][1];d.set(u,i[_+0],i[_+3],i[_+6]),d.set(c,i[g+0],i[g+3],i[g+6]),d.cross(f,u,c);var y=p.create();return y[0]=u[0],y[1]=c[0],y[2]=f[0],y[3]=u[1],y[4]=c[1],y[5]=f[1],y[6]=u[2],y[7]=c[2],y[8]=f[2],y})}}(),{Viewer:x.Viewer,isWebGLSupported:x.isWebGLSupported,io:I,color:t,mol:U,rgb:{setColorPalette:t.setColorPalette,hex2rgb:t.hex2rgb},vec3:e.vec3,vec4:e.vec4,mat3:e.mat3,mat4:e.mat4,quat:e.quat,viewpoint:N}})?r.apply(t,i):r)||(e.exports=a)},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))i.call(n,u)&&(s[u]=n[u]);if(r){o=r(n);for(var c=0;c<o.length;c++)a.call(n,o[c])&&(s[o[c]]=n[o[c]])}}return s}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(8)},function(e,t){var n=function(e){return{name:"Gene_Protein",title:"Gene --\x3e Proteins.",comment:"Added 26OCT2010: ML",description:"For a given Gene (or List of Genes) returns the corresponding Protein(s) products.",from:"Gene",select:["primaryIdentifier","symbol","proteins.primaryIdentifier","proteins.primaryAccession","proteins.name","proteins.length"],orderBy:[{path:"primaryIdentifier",direction:"ASC"}],where:[{path:"Gene.id",op:"=",value:e}]}};e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:imjs;return new Promise(function(i,a){new r.Service({root:t}).records(n(e)).then(function(e){e.length?i(e[0]):a("No associated proteins found!")}).catch(a)})}},function(e,t){e.exports=function(e,t){return t||(t=window.fetch),t("http://www.rcsb.org/pdb/rest/search?req=browser",{method:"POST",body:"\n\t\t\t<orgPdbQuery>\n\t\t\t\t<queryType>org.pdb.query.simple.UpAccessionIdQuery</queryType>\n\t\t\t\t<description>Simple query for a list of UniprotKB Accession IDs: P50225</description>\n\t\t\t\t<accessionIdList>".concat(e,"</accessionIdList>\n\t\t\t</orgPdbQuery>\n\t\t\t"),headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.text().then(function(e){var t=e.split("\n");return t.splice(-1),t.map(function(e){return e.split(":")[0]}).filter(function(e){return 4===String(e).length})})})}},function(e,t){var n=function(e){return{name:"Protein_Sequence",title:"Protein --\x3e Sequence",description:"for a specified protein or list proteins give the protein sequence and length.",from:"Protein",select:["primaryIdentifier","primaryAccession"],where:[{path:"Protein.id",op:"=",value:e,switched:"LOCKED",switchable:!1}]}};e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:imjs;return new Promise(function(i,a){new r.Service({root:t}).records(n(e)).then(function(e){e.length?i(e[0]):a("No associated proteins found!")}).catch(a)})}},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2),i="function"==typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,_="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,a,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,a,o,s],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}function T(){}function S(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&g("85"),this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},T.prototype=w.prototype;var x=S.prototype=new T;x.constructor=S,r(x,w.prototype),x.isPureReactComponent=!0;var C={current:null},E={current:null},A=Object.prototype.hasOwnProperty,R={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r=void 0,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)A.call(t,r)&&!R.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:E.current}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var M=/\/+/g,F=[];function D(e,t,n,r){if(F.length){var i=F.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function I(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>F.length&&F.push(e)}function N(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case a:case o:l=!0}}if(l)return r(i,t,""===n?"."+O(t,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=n+O(s=t[u],u);l+=e(s,c,r,i)}else if(c=null===t||"object"!=typeof t?null:"function"==typeof(c=_&&t[_]||t["@@iterator"])?c:null,"function"==typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=e(s=s.value,c=n+O(s,u++),r,i);else"object"===s&&g("31","[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return l}(e,"",t,n)}function O(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function V(e,t){e.func.call(e.context,t,e.count++)}function L(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?z(e,r,n,function(e){return e}):null!=e&&(P(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(M,"$&/")+"/")+n)),r.push(e))}function z(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(M,"$&/")+"/"),N(e,L,t=D(t,a,r,i)),I(t)}function U(){var e=C.current;return null===e&&g("321"),e}var B={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return z(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;N(e,V,t=D(null,null,t,n)),I(t)},count:function(e){return N(e,function(){return null},null)},toArray:function(e){var t=[];return z(e,t,null,function(e){return e}),t},only:function(e){return P(e)||g("143"),e}},createRef:function(){return{current:null}},Component:w,PureComponent:S,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return U().useCallback(e,t)},useContext:function(e,t){return U().useContext(e,t)},useEffect:function(e,t){return U().useEffect(e,t)},useImperativeHandle:function(e,t,n){return U().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return U().useLayoutEffect(e,t)},useMemo:function(e,t){return U().useMemo(e,t)},useReducer:function(e,t,n){return U().useReducer(e,t,n)},useRef:function(e){return U().useRef(e)},useState:function(e){return U().useState(e)},Fragment:s,StrictMode:l,Suspense:p,createElement:k,cloneElement:function(e,t,n){null==e&&g("267",e);var i=void 0,o=r({},e.props),s=e.key,l=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,u=E.current),void 0!==t.key&&(s=""+t.key);var c=void 0;for(i in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)A.call(t,i)&&!R.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==c?c[i]:t[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){c=Array(i);for(var h=0;h<i;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:a,type:e.type,key:s,ref:l,props:o,_owner:u}},createFactory:function(e){var t=k.bind(null,e);return t.type=e,t},isValidElement:P,version:"16.8.6",unstable_ConcurrentMode:f,unstable_Profiler:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:C,ReactCurrentOwner:E,assign:r}},j={default:B},W=j&&B||j;e.exports=W.default||W},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(0),i=n(2),a=n(9);function o(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,a,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,a,o,s],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||o("227");var s=!1,l=null,u=!1,c=null,h={onError:function(e){s=!0,l=e}};function f(e,t,n,r,i,a,o,u,c){s=!1,l=null,function(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}.apply(h,arguments)}var d=null,p={};function m(){if(d)for(var e in p){var t=p[e],n=d.indexOf(e);if(-1<n||o("96",e),!_[n])for(var r in t.extractEvents||o("97",e),_[n]=t,n=t.eventTypes){var i=void 0,a=n[r],s=t,l=r;g.hasOwnProperty(l)&&o("99",l),g[l]=a;var u=a.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&v(u[i],s,l);i=!0}else a.registrationName?(v(a.registrationName,s,l),i=!0):i=!1;i||o("98",r,e)}}}function v(e,t,n){y[e]&&o("100",e),y[e]=t,b[e]=t.eventTypes[n].dependencies}var _=[],g={},y={},b={},w=null,T=null,S=null;function x(e,t,n){var r=e.type||"unknown-event";e.currentTarget=S(n),function(e,t,n,r,i,a,h,d,p){if(f.apply(this,arguments),s){if(s){var m=l;s=!1,l=null}else o("198"),m=void 0;u||(u=!0,c=m)}}(r,t,void 0,e),e.currentTarget=null}function C(e,t){return null==t&&o("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function E(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var A=null;function R(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)x(e,t[r],n[r]);else t&&x(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var k={injectEventPluginOrder:function(e){d&&o("101"),d=Array.prototype.slice.call(e),m()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];p.hasOwnProperty(t)&&p[t]===r||(p[t]&&o("102",t),p[t]=r,n=!0)}n&&m()}};function P(e,t){var n=e.stateNode;if(!n)return null;var r=w(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&o("231",t,typeof n),n)}function M(e){if(null!==e&&(A=C(A,e)),e=A,A=null,e&&(E(e,R),A&&o("95"),u))throw e=c,u=!1,c=null,e}var F=Math.random().toString(36).slice(2),D="__reactInternalInstance$"+F,I="__reactEventHandlers$"+F;function N(e){if(e[D])return e[D];for(;!e[D];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[D]).tag||6===e.tag?e:null}function O(e){return!(e=e[D])||5!==e.tag&&6!==e.tag?null:e}function V(e){if(5===e.tag||6===e.tag)return e.stateNode;o("33")}function L(e){return e[I]||null}function z(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function U(e,t,n){(t=P(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=C(n._dispatchListeners,t),n._dispatchInstances=C(n._dispatchInstances,e))}function B(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=z(t);for(t=n.length;0<t--;)U(n[t],"captured",e);for(t=0;t<n.length;t++)U(n[t],"bubbled",e)}}function j(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=P(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=C(n._dispatchListeners,t),n._dispatchInstances=C(n._dispatchInstances,e))}function W(e){e&&e.dispatchConfig.registrationName&&j(e._targetInst,null,e)}function q(e){E(e,B)}var H=!("undefined"==typeof window||!window.document||!window.document.createElement);function G(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Y={animationend:G("Animation","AnimationEnd"),animationiteration:G("Animation","AnimationIteration"),animationstart:G("Animation","AnimationStart"),transitionend:G("Transition","TransitionEnd")},X={},$={};function Q(e){if(X[e])return X[e];if(!Y[e])return e;var t,n=Y[e];for(t in n)if(n.hasOwnProperty(t)&&t in $)return X[e]=n[t];return e}H&&($=document.createElement("div").style,"AnimationEvent"in window||(delete Y.animationend.animation,delete Y.animationiteration.animation,delete Y.animationstart.animation),"TransitionEvent"in window||delete Y.transitionend.transition);var K=Q("animationend"),Z=Q("animationiteration"),J=Q("animationstart"),ee=Q("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ne=null,re=null,ie=null;function ae(){if(ie)return ie;var e,t,n=re,r=n.length,i="value"in ne?ne.value:ne.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return ie=i.slice(e,1<t?1-t:void 0)}function oe(){return!0}function se(){return!1}function le(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?oe:se,this.isPropagationStopped=se,this}function ue(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function ce(e){e instanceof this||o("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function he(e){e.eventPool=[],e.getPooled=ue,e.release=ce}i(le.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=oe)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=oe)},persist:function(){this.isPersistent=oe},isPersistent:se,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=se,this._dispatchInstances=this._dispatchListeners=null}}),le.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},le.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,he(n),n},he(le);var fe=le.extend({data:null}),de=le.extend({data:null}),pe=[9,13,27,32],me=H&&"CompositionEvent"in window,ve=null;H&&"documentMode"in document&&(ve=document.documentMode);var _e=H&&"TextEvent"in window&&!ve,ge=H&&(!me||ve&&8<ve&&11>=ve),ye=String.fromCharCode(32),be={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},we=!1;function Te(e,t){switch(e){case"keyup":return-1!==pe.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Se(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var xe=!1;var Ce={eventTypes:be,extractEvents:function(e,t,n,r){var i=void 0,a=void 0;if(me)e:{switch(e){case"compositionstart":i=be.compositionStart;break e;case"compositionend":i=be.compositionEnd;break e;case"compositionupdate":i=be.compositionUpdate;break e}i=void 0}else xe?Te(e,n)&&(i=be.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=be.compositionStart);return i?(ge&&"ko"!==n.locale&&(xe||i!==be.compositionStart?i===be.compositionEnd&&xe&&(a=ae()):(re="value"in(ne=r)?ne.value:ne.textContent,xe=!0)),i=fe.getPooled(i,t,n,r),a?i.data=a:null!==(a=Se(n))&&(i.data=a),q(i),a=i):a=null,(e=_e?function(e,t){switch(e){case"compositionend":return Se(t);case"keypress":return 32!==t.which?null:(we=!0,ye);case"textInput":return(e=t.data)===ye&&we?null:e;default:return null}}(e,n):function(e,t){if(xe)return"compositionend"===e||!me&&Te(e,t)?(e=ae(),ie=re=ne=null,xe=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ge&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=de.getPooled(be.beforeInput,t,n,r)).data=e,q(t)):t=null,null===a?t:null===t?a:[a,t]}},Ee=null,Ae=null,Re=null;function ke(e){if(e=T(e)){"function"!=typeof Ee&&o("280");var t=w(e.stateNode);Ee(e.stateNode,e.type,t)}}function Pe(e){Ae?Re?Re.push(e):Re=[e]:Ae=e}function Me(){if(Ae){var e=Ae,t=Re;if(Re=Ae=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Fe(e,t){return e(t)}function De(e,t,n){return e(t,n)}function Ie(){}var Ne=!1;function Oe(e,t){if(Ne)return e(t);Ne=!0;try{return Fe(e,t)}finally{Ne=!1,(null!==Ae||null!==Re)&&(Ie(),Me())}}var Ve={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Le(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ve[e.type]:"textarea"===t}function ze(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Ue(e){if(!H)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function je(e){e._valueTracker||(e._valueTracker=function(e){var t=Be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function We(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var qe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;qe.hasOwnProperty("ReactCurrentDispatcher")||(qe.ReactCurrentDispatcher={current:null});var He=/^(.*)[\\\/]/,Ge="function"==typeof Symbol&&Symbol.for,Ye=Ge?Symbol.for("react.element"):60103,Xe=Ge?Symbol.for("react.portal"):60106,$e=Ge?Symbol.for("react.fragment"):60107,Qe=Ge?Symbol.for("react.strict_mode"):60108,Ke=Ge?Symbol.for("react.profiler"):60114,Ze=Ge?Symbol.for("react.provider"):60109,Je=Ge?Symbol.for("react.context"):60110,et=Ge?Symbol.for("react.concurrent_mode"):60111,tt=Ge?Symbol.for("react.forward_ref"):60112,nt=Ge?Symbol.for("react.suspense"):60113,rt=Ge?Symbol.for("react.memo"):60115,it=Ge?Symbol.for("react.lazy"):60116,at="function"==typeof Symbol&&Symbol.iterator;function ot(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=at&&e[at]||e["@@iterator"])?e:null}function st(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case et:return"ConcurrentMode";case $e:return"Fragment";case Xe:return"Portal";case Ke:return"Profiler";case Qe:return"StrictMode";case nt:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case Je:return"Context.Consumer";case Ze:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case rt:return st(e.type);case it:if(e=1===e._status?e._result:null)return st(e)}return null}function lt(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=st(e.type);n=null,r&&(n=st(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(He,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}var ut=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ct=Object.prototype.hasOwnProperty,ht={},ft={};function dt(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pt[e]=new dt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pt[t]=new dt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){pt[e]=new dt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pt[e]=new dt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pt[e]=new dt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){pt[e]=new dt(e,3,!0,e,null)}),["capture","download"].forEach(function(e){pt[e]=new dt(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){pt[e]=new dt(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){pt[e]=new dt(e,5,!1,e.toLowerCase(),null)});var mt=/[\-:]([a-z])/g;function vt(e){return e[1].toUpperCase()}function _t(e,t,n,r){var i=pt.hasOwnProperty(t)?pt[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ct.call(ft,e)||!ct.call(ht,e)&&(ut.test(e)?ft[e]=!0:(ht[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function gt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function yt(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function bt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=gt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function wt(e,t){null!=(t=t.checked)&&_t(e,"checked",t,!1)}function Tt(e,t){wt(e,t);var n=gt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?xt(e,t.type,n):t.hasOwnProperty("defaultValue")&&xt(e,t.type,gt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function St(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function xt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mt,vt);pt[t]=new dt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mt,vt);pt[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mt,vt);pt[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){pt[e]=new dt(e,1,!1,e.toLowerCase(),null)});var Ct={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Et(e,t,n){return(e=le.getPooled(Ct.change,e,t,n)).type="change",Pe(n),q(e),e}var At=null,Rt=null;function kt(e){M(e)}function Pt(e){if(We(V(e)))return e}function Mt(e,t){if("change"===e)return t}var Ft=!1;function Dt(){At&&(At.detachEvent("onpropertychange",It),Rt=At=null)}function It(e){"value"===e.propertyName&&Pt(Rt)&&Oe(kt,e=Et(Rt,e,ze(e)))}function Nt(e,t,n){"focus"===e?(Dt(),Rt=n,(At=t).attachEvent("onpropertychange",It)):"blur"===e&&Dt()}function Ot(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Pt(Rt)}function Vt(e,t){if("click"===e)return Pt(t)}function Lt(e,t){if("input"===e||"change"===e)return Pt(t)}H&&(Ft=Ue("input")&&(!document.documentMode||9<document.documentMode));var zt={eventTypes:Ct,_isInputEventSupported:Ft,extractEvents:function(e,t,n,r){var i=t?V(t):window,a=void 0,o=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?a=Mt:Le(i)?Ft?a=Lt:(a=Ot,o=Nt):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Vt),a&&(a=a(e,t)))return Et(a,n,r);o&&o(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&xt(i,"number",i.value)}},Ut=le.extend({view:null,detail:null}),Bt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Bt[e])&&!!t[e]}function Wt(){return jt}var qt=0,Ht=0,Gt=!1,Yt=!1,Xt=Ut.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Wt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=qt;return qt=e.screenX,Gt?"mousemove"===e.type?e.screenX-t:0:(Gt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ht;return Ht=e.screenY,Yt?"mousemove"===e.type?e.screenY-t:0:(Yt=!0,0)}}),$t=Xt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Qt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Kt={eventTypes:Qt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!a&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,t=(t=n.relatedTarget||n.toElement)?N(t):null):a=null,a===t)return null;var o=void 0,s=void 0,l=void 0,u=void 0;"mouseout"===e||"mouseover"===e?(o=Xt,s=Qt.mouseLeave,l=Qt.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(o=$t,s=Qt.pointerLeave,l=Qt.pointerEnter,u="pointer");var c=null==a?i:V(a);if(i=null==t?i:V(t),(e=o.getPooled(s,a,n,r)).type=u+"leave",e.target=c,e.relatedTarget=i,(n=o.getPooled(l,t,n,r)).type=u+"enter",n.target=i,n.relatedTarget=c,r=t,a&&r)e:{for(i=r,u=0,o=t=a;o;o=z(o))u++;for(o=0,l=i;l;l=z(l))o++;for(;0<u-o;)t=z(t),u--;for(;0<o-u;)i=z(i),o--;for(;u--;){if(t===i||t===i.alternate)break e;t=z(t),i=z(i)}t=null}else t=null;for(i=t,t=[];a&&a!==i&&(null===(u=a.alternate)||u!==i);)t.push(a),a=z(a);for(a=[];r&&r!==i&&(null===(u=r.alternate)||u!==i);)a.push(r),r=z(r);for(r=0;r<t.length;r++)j(t[r],"bubbled",e);for(r=a.length;0<r--;)j(a[r],"captured",n);return[e,n]}};function Zt(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var Jt=Object.prototype.hasOwnProperty;function en(e,t){if(Zt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Jt.call(t,n[r])||!Zt(e[n[r]],t[n[r]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function nn(e){2!==tn(e)&&o("188")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&o("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,a=i?i.alternate:null;if(!i||!a)break;if(i.child===a.child){for(var s=i.child;s;){if(s===n)return nn(i),e;if(s===r)return nn(i),t;s=s.sibling}o("188")}if(n.return!==r.return)n=i,r=a;else{s=!1;for(var l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}s||o("189")}}n.alternate!==r&&o("190")}return 3!==n.tag&&o("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var an=le.extend({animationName:null,elapsedTime:null,pseudoElement:null}),on=le.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sn=Ut.extend({relatedTarget:null});function ln(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn=Ut.extend({key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ln(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Wt,charCode:function(e){return"keypress"===e.type?ln(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ln(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),fn=Xt.extend({dataTransfer:null}),dn=Ut.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Wt}),pn=le.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mn=Xt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),vn=[["abort","abort"],[K,"animationEnd"],[Z,"animationIteration"],[J,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],_n={},gn={};function yn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},_n[e]=t,gn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){yn(e,!0)}),vn.forEach(function(e){yn(e,!1)});var bn={eventTypes:_n,isInteractiveTopLevelEventType:function(e){return void 0!==(e=gn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=gn[e];if(!i)return null;switch(e){case"keypress":if(0===ln(n))return null;case"keydown":case"keyup":e=hn;break;case"blur":case"focus":e=sn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Xt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=dn;break;case K:case Z:case J:e=an;break;case ee:e=pn;break;case"scroll":e=Ut;break;case"wheel":e=mn;break;case"copy":case"cut":case"paste":e=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=$t;break;default:e=le}return q(t=e.getPooled(i,t,n,r)),t}},wn=bn.isInteractiveTopLevelEventType,Tn=[];function Sn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=N(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ze(e.nativeEvent);r=e.topLevelType;for(var a=e.nativeEvent,o=null,s=0;s<_.length;s++){var l=_[s];l&&(l=l.extractEvents(r,t,a,i))&&(o=C(o,l))}M(o)}}var xn=!0;function Cn(e,t){if(!t)return null;var n=(wn(e)?An:Rn).bind(null,e);t.addEventListener(e,n,!1)}function En(e,t){if(!t)return null;var n=(wn(e)?An:Rn).bind(null,e);t.addEventListener(e,n,!0)}function An(e,t){De(Rn,e,t)}function Rn(e,t){if(xn){var n=ze(t);if(null===(n=N(n))||"number"!=typeof n.tag||2===tn(n)||(n=null),Tn.length){var r=Tn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Oe(Sn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Tn.length&&Tn.push(e)}}}var kn={},Pn=0,Mn="_reactListenersID"+(""+Math.random()).slice(2);function Fn(e){return Object.prototype.hasOwnProperty.call(e,Mn)||(e[Mn]=Pn++,kn[e[Mn]]={}),kn[e[Mn]]}function Dn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function In(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nn(e,t){var n,r=In(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=In(r)}}function On(){for(var e=window,t=Dn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Dn((e=t.contentWindow).document)}return t}function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Ln(e){var t=On(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&Vn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=Nn(n,a);var o=Nn(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zn=H&&"documentMode"in document&&11>=document.documentMode,Un={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Bn=null,jn=null,Wn=null,qn=!1;function Hn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return qn||null==Bn||Bn!==Dn(n)?null:("selectionStart"in(n=Bn)&&Vn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Wn&&en(Wn,n)?null:(Wn=n,(e=le.getPooled(Un.select,jn,e,t)).type="select",e.target=Bn,q(e),e))}var Gn={eventTypes:Un,extractEvents:function(e,t,n,r){var i,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!a)){e:{a=Fn(a),i=b.onSelect;for(var o=0;o<i.length;o++){var s=i[o];if(!a.hasOwnProperty(s)||!a[s]){a=!1;break e}}a=!0}i=!a}if(i)return null;switch(a=t?V(t):window,e){case"focus":(Le(a)||"true"===a.contentEditable)&&(Bn=a,jn=t,Wn=null);break;case"blur":Wn=jn=Bn=null;break;case"mousedown":qn=!0;break;case"contextmenu":case"mouseup":case"dragend":return qn=!1,Hn(n,r);case"selectionchange":if(zn)break;case"keydown":case"keyup":return Hn(n,r)}return null}};function Yn(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Xn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+gt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function $n(e,t){return null!=t.dangerouslySetInnerHTML&&o("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&o("92"),Array.isArray(t)&&(1>=t.length||o("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:gt(n)}}function Kn(e,t){var n=gt(t.value),r=gt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Zn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}k.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=L,T=O,S=V,k.injectEventPluginsByName({SimpleEventPlugin:bn,EnterLeaveEventPlugin:Kt,ChangeEventPlugin:zt,SelectEventPlugin:Gn,BeforeInputEventPlugin:Ce});var Jn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function er(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?er(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var nr,rr=void 0,ir=(nr=function(e,t){if(e.namespaceURI!==Jn.svg||"innerHTML"in e)e.innerHTML=t;else{for((rr=rr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=rr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return nr(e,t)})}:nr);function ar(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var or={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sr=["Webkit","ms","Moz","O"];function lr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||or.hasOwnProperty(e)&&or[e]?(""+t).trim():t+"px"}function ur(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=lr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(or).forEach(function(e){sr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),or[t]=or[e]})});var cr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hr(e,t){t&&(cr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&o("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&o("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||o("61")),null!=t.style&&"object"!=typeof t.style&&o("62",""))}function fr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function dr(e,t){var n=Fn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=b[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":En("scroll",e);break;case"focus":case"blur":En("focus",e),En("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Ue(i)&&En(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(i)&&Cn(i,e)}n[i]=!0}}}function pr(){}var mr=null,vr=null;function _r(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function gr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var yr="function"==typeof setTimeout?setTimeout:void 0,br="function"==typeof clearTimeout?clearTimeout:void 0,wr=a.unstable_scheduleCallback,Tr=a.unstable_cancelCallback;function Sr(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function xr(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Cr=[],Er=-1;function Ar(e){0>Er||(e.current=Cr[Er],Cr[Er]=null,Er--)}function Rr(e,t){Cr[++Er]=e.current,e.current=t}var kr={},Pr={current:kr},Mr={current:!1},Fr=kr;function Dr(e,t){var n=e.type.contextTypes;if(!n)return kr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ir(e){return null!=(e=e.childContextTypes)}function Nr(e){Ar(Mr),Ar(Pr)}function Or(e){Ar(Mr),Ar(Pr)}function Vr(e,t,n){Pr.current!==kr&&o("168"),Rr(Pr,t),Rr(Mr,n)}function Lr(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())a in e||o("108",st(t)||"Unknown",a);return i({},n,r)}function zr(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||kr,Fr=Pr.current,Rr(Pr,t),Rr(Mr,Mr.current),!0}function Ur(e,t,n){var r=e.stateNode;r||o("169"),n?(t=Lr(e,t,Fr),r.__reactInternalMemoizedMergedChildContext=t,Ar(Mr),Ar(Pr),Rr(Pr,t)):Ar(Mr),Rr(Mr,n)}var Br=null,jr=null;function Wr(e){return function(t){try{return e(t)}catch(e){}}}function qr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Hr(e,t,n,r){return new qr(e,t,n,r)}function Gr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Yr(e,t){var n=e.alternate;return null===n?((n=Hr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xr(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)Gr(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case $e:return $r(n.children,i,a,t);case et:return Qr(n,3|i,a,t);case Qe:return Qr(n,2|i,a,t);case Ke:return(e=Hr(12,n,t,4|i)).elementType=Ke,e.type=Ke,e.expirationTime=a,e;case nt:return(e=Hr(13,n,t,i)).elementType=nt,e.type=nt,e.expirationTime=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ze:s=10;break e;case Je:s=9;break e;case tt:s=11;break e;case rt:s=14;break e;case it:s=16,r=null;break e}o("130",null==e?e:typeof e,"")}return(t=Hr(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function $r(e,t,n,r){return(e=Hr(7,e,r,t)).expirationTime=n,e}function Qr(e,t,n,r){return e=Hr(8,e,r,t),t=0==(1&t)?Qe:et,e.elementType=t,e.type=t,e.expirationTime=n,e}function Kr(e,t,n){return(e=Hr(6,e,null,t)).expirationTime=n,e}function Zr(e,t,n){return(t=Hr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),ni(t,e)}function ei(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),ni(t,e)}function ti(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function ni(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,a=t.latestPingedTime;0===(i=0!==i?i:a)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function ri(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ii=(new r.Component).refs;function ai(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var oi={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Ts(),i=$a(r=$o(r,e));i.payload=t,null!=n&&(i.callback=n),Wo(),Ka(e,i),Zo(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Ts(),i=$a(r=$o(r,e));i.tag=Wa,i.payload=t,null!=n&&(i.callback=n),Wo(),Ka(e,i),Zo(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Ts(),r=$a(n=$o(n,e));r.tag=qa,null!=t&&(r.callback=t),Wo(),Ka(e,r),Zo(e,n)}};function si(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,r)||!en(i,a))}function li(e,t,n){var r=!1,i=kr,a=t.contextType;return"object"==typeof a&&null!==a?a=Ba(a):(i=Ir(t)?Fr:Pr.current,a=(r=null!=(r=t.contextTypes))?Dr(e,i):kr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ui(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function ci(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ii;var a=t.contextType;"object"==typeof a&&null!==a?i.context=Ba(a):(a=Ir(t)?Fr:Pr.current,i.context=Dr(e,a)),null!==(a=e.updateQueue)&&(to(e,a,n,i,r),i.state=e.memoizedState),"function"==typeof(a=t.getDerivedStateFromProps)&&(ai(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&oi.enqueueReplaceState(i,i.state,null),null!==(a=e.updateQueue)&&(to(e,a,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var hi=Array.isArray;function fi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&o("309"),r=n.stateNode),r||o("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ii&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&o("284"),n._owner||o("290",e)}return e}function di(e,t){"textarea"!==e.type&&o("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function pi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Yr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Kr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=fi(e,t,n),r.return=e,r):((r=Xr(n.type,n.key,n.props,null,e.mode,r)).ref=fi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Zr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=$r(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Kr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Ye:return(n=Xr(t.type,t.key,t.props,null,e.mode,n)).ref=fi(e,null,t),n.return=e,n;case Xe:return(t=Zr(t,e.mode,n)).return=e,t}if(hi(t)||ot(t))return(t=$r(t,e.mode,n,null)).return=e,t;di(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Ye:return n.key===i?n.type===$e?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case Xe:return n.key===i?c(e,t,n,r):null}if(hi(n)||ot(n))return null!==i?null:h(e,t,n,r,null);di(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Ye:return e=e.get(null===r.key?n:r.key)||null,r.type===$e?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case Xe:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(hi(r)||ot(r))return h(t,e=e.get(n)||null,r,i,null);di(t,r)}return null}function m(i,o,s,l){for(var u=null,c=null,h=o,m=o=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var _=d(i,h,s[m],l);if(null===_){null===h&&(h=v);break}e&&h&&null===_.alternate&&t(i,h),o=a(_,o,m),null===c?u=_:c.sibling=_,c=_,h=v}if(m===s.length)return n(i,h),u;if(null===h){for(;m<s.length;m++)(h=f(i,s[m],l))&&(o=a(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<s.length;m++)(v=p(h,i,m,s[m],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),o=a(v,o,m),null===c?u=v:c.sibling=v,c=v);return e&&h.forEach(function(e){return t(i,e)}),u}function v(i,s,l,u){var c=ot(l);"function"!=typeof c&&o("150"),null==(l=c.call(l))&&o("151");for(var h=c=null,m=s,v=s=0,_=null,g=l.next();null!==m&&!g.done;v++,g=l.next()){m.index>v?(_=m,m=null):_=m.sibling;var y=d(i,m,g.value,u);if(null===y){m||(m=_);break}e&&m&&null===y.alternate&&t(i,m),s=a(y,s,v),null===h?c=y:h.sibling=y,h=y,m=_}if(g.done)return n(i,m),c;if(null===m){for(;!g.done;v++,g=l.next())null!==(g=f(i,g.value,u))&&(s=a(g,s,v),null===h?c=g:h.sibling=g,h=g);return c}for(m=r(i,m);!g.done;v++,g=l.next())null!==(g=p(m,i,v,g.value,u))&&(e&&null!==g.alternate&&m.delete(null===g.key?v:g.key),s=a(g,s,v),null===h?c=g:h.sibling=g,h=g);return e&&m.forEach(function(e){return t(i,e)}),c}return function(e,r,a,l){var u="object"==typeof a&&null!==a&&a.type===$e&&null===a.key;u&&(a=a.props.children);var c="object"==typeof a&&null!==a;if(c)switch(a.$$typeof){case Ye:e:{for(c=a.key,u=r;null!==u;){if(u.key===c){if(7===u.tag?a.type===$e:u.elementType===a.type){n(e,u.sibling),(r=i(u,a.type===$e?a.props.children:a.props)).ref=fi(e,u,a),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}a.type===$e?((r=$r(a.props.children,e.mode,l,a.key)).return=e,e=r):((l=Xr(a.type,a.key,a.props,null,e.mode,l)).ref=fi(e,r,a),l.return=e,e=l)}return s(e);case Xe:e:{for(u=a.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Zr(a,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Kr(a,e.mode,l)).return=e,e=r),s(e);if(hi(a))return m(e,r,a,l);if(ot(a))return v(e,r,a,l);if(c&&di(e,a),void 0===a&&!u)switch(e.tag){case 1:case 0:o("152",(l=e.type).displayName||l.name||"Component")}return n(e,r)}}var mi=pi(!0),vi=pi(!1),_i={},gi={current:_i},yi={current:_i},bi={current:_i};function wi(e){return e===_i&&o("174"),e}function Ti(e,t){Rr(bi,t),Rr(yi,e),Rr(gi,_i);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tr(null,"");break;default:t=tr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Ar(gi),Rr(gi,t)}function Si(e){Ar(gi),Ar(yi),Ar(bi)}function xi(e){wi(bi.current);var t=wi(gi.current),n=tr(t,e.type);t!==n&&(Rr(yi,e),Rr(gi,n))}function Ci(e){yi.current===e&&(Ar(gi),Ar(yi))}var Ei=0,Ai=2,Ri=4,ki=8,Pi=16,Mi=32,Fi=64,Di=128,Ii=qe.ReactCurrentDispatcher,Ni=0,Oi=null,Vi=null,Li=null,zi=null,Ui=null,Bi=null,ji=0,Wi=null,qi=0,Hi=!1,Gi=null,Yi=0;function Xi(){o("321")}function $i(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zt(e[n],t[n]))return!1;return!0}function Qi(e,t,n,r,i,a){if(Ni=a,Oi=t,Li=null!==e?e.memoizedState:null,Ii.current=null===Li?ua:ca,t=n(r,i),Hi){do{Hi=!1,Yi+=1,Li=null!==e?e.memoizedState:null,Bi=zi,Wi=Ui=Vi=null,Ii.current=ca,t=n(r,i)}while(Hi);Gi=null,Yi=0}return Ii.current=la,(e=Oi).memoizedState=zi,e.expirationTime=ji,e.updateQueue=Wi,e.effectTag|=qi,e=null!==Vi&&null!==Vi.next,Ni=0,Bi=Ui=zi=Li=Vi=Oi=null,ji=0,Wi=null,qi=0,e&&o("300"),t}function Ki(){Ii.current=la,Ni=0,Bi=Ui=zi=Li=Vi=Oi=null,ji=0,Wi=null,qi=0,Hi=!1,Gi=null,Yi=0}function Zi(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Ui?zi=Ui=e:Ui=Ui.next=e,Ui}function Ji(){if(null!==Bi)Bi=(Ui=Bi).next,Li=null!==(Vi=Li)?Vi.next:null;else{null===Li&&o("310");var e={memoizedState:(Vi=Li).memoizedState,baseState:Vi.baseState,queue:Vi.queue,baseUpdate:Vi.baseUpdate,next:null};Ui=null===Ui?zi=e:Ui.next=e,Li=Vi.next}return Ui}function ea(e,t){return"function"==typeof t?t(e):t}function ta(e){var t=Ji(),n=t.queue;if(null===n&&o("311"),n.lastRenderedReducer=e,0<Yi){var r=n.dispatch;if(null!==Gi){var i=Gi.get(n);if(void 0!==i){Gi.delete(n);var a=t.memoizedState;do{a=e(a,i.action),i=i.next}while(null!==i);return Zt(a,t.memoizedState)||(wa=!0),t.memoizedState=a,t.baseUpdate===n.last&&(t.baseState=a),n.lastRenderedState=a,[a,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(a=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var l=i=null,u=r,c=!1;do{var h=u.expirationTime;h<Ni?(c||(c=!0,l=s,i=a),h>ji&&(ji=h)):a=u.eagerReducer===e?u.eagerState:e(a,u.action),s=u,u=u.next}while(null!==u&&u!==r);c||(l=s,i=a),Zt(a,t.memoizedState)||(wa=!0),t.memoizedState=a,t.baseUpdate=l,t.baseState=i,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Wi?(Wi={lastEffect:null}).lastEffect=e.next=e:null===(t=Wi.lastEffect)?Wi.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Wi.lastEffect=e),e}function ra(e,t,n,r){var i=Zi();qi|=e,i.memoizedState=na(t,n,void 0,void 0===r?null:r)}function ia(e,t,n,r){var i=Ji();r=void 0===r?null:r;var a=void 0;if(null!==Vi){var o=Vi.memoizedState;if(a=o.destroy,null!==r&&$i(r,o.deps))return void na(Ei,n,a,r)}qi|=e,i.memoizedState=na(t,n,a,r)}function aa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function oa(){}function sa(e,t,n){25>Yi||o("301");var r=e.alternate;if(e===Oi||null!==r&&r===Oi)if(Hi=!0,e={expirationTime:Ni,action:n,eagerReducer:null,eagerState:null,next:null},null===Gi&&(Gi=new Map),void 0===(n=Gi.get(t)))Gi.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{Wo();var i=Ts(),a={expirationTime:i=$o(i,e),action:n,eagerReducer:null,eagerState:null,next:null},s=t.last;if(null===s)a.next=a;else{var l=s.next;null!==l&&(a.next=l),s.next=a}if(t.last=a,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var u=t.lastRenderedState,c=r(u,n);if(a.eagerReducer=r,a.eagerState=c,Zt(c,u))return}catch(e){}Zo(e,i)}}var la={readContext:Ba,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi},ua={readContext:Ba,useCallback:function(e,t){return Zi().memoizedState=[e,void 0===t?null:t],e},useContext:Ba,useEffect:function(e,t){return ra(516,Di|Fi,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ra(4,Ri|Mi,aa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4,Ri|Mi,e,t)},useMemo:function(e,t){var n=Zi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Zi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=sa.bind(null,Oi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Zi().memoizedState=e},useState:function(e){var t=Zi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:ea,lastRenderedState:e}).dispatch=sa.bind(null,Oi,e),[t.memoizedState,e]},useDebugValue:oa},ca={readContext:Ba,useCallback:function(e,t){var n=Ji();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$i(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Ba,useEffect:function(e,t){return ia(516,Di|Fi,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ia(4,Ri|Mi,aa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ia(4,Ri|Mi,e,t)},useMemo:function(e,t){var n=Ji();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$i(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ta,useRef:function(){return Ji().memoizedState},useState:function(e){return ta(ea)},useDebugValue:oa},ha=null,fa=null,da=!1;function pa(e,t){var n=Hr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function ma(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function va(e){if(da){var t=fa;if(t){var n=t;if(!ma(e,t)){if(!(t=Sr(n))||!ma(e,t))return e.effectTag|=2,da=!1,void(ha=e);pa(ha,n)}ha=e,fa=xr(t)}else e.effectTag|=2,da=!1,ha=e}}function _a(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;ha=e}function ga(e){if(e!==ha)return!1;if(!da)return _a(e),da=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!gr(t,e.memoizedProps))for(t=fa;t;)pa(e,t),t=Sr(t);return _a(e),fa=ha?Sr(e.stateNode):null,!0}function ya(){fa=ha=null,da=!1}var ba=qe.ReactCurrentOwner,wa=!1;function Ta(e,t,n,r){t.child=null===e?vi(t,null,n,r):mi(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var a=t.ref;return Ua(t,i),r=Qi(e,t,n,r,a,i),null===e||wa?(t.effectTag|=1,Ta(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Fa(e,t,i))}function xa(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!=typeof o||Gr(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Xr(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ca(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:en)(i,r)&&e.ref===t.ref)?Fa(e,t,a):(t.effectTag|=1,(e=Yr(o,r)).ref=t.ref,e.return=t,t.child=e)}function Ca(e,t,n,r,i,a){return null!==e&&en(e.memoizedProps,r)&&e.ref===t.ref&&(wa=!1,i<a)?Fa(e,t,a):Aa(e,t,n,r,a)}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Aa(e,t,n,r,i){var a=Ir(n)?Fr:Pr.current;return a=Dr(t,a),Ua(t,i),n=Qi(e,t,n,r,a,i),null===e||wa?(t.effectTag|=1,Ta(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Fa(e,t,i))}function Ra(e,t,n,r,i){if(Ir(n)){var a=!0;zr(t)}else a=!1;if(Ua(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),li(t,n,r),ci(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"==typeof u&&null!==u?u=Ba(u):u=Dr(t,u=Ir(n)?Fr:Pr.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==u)&&ui(t,o,r,u),Ga=!1;var f=t.memoizedState;l=o.state=f;var d=t.updateQueue;null!==d&&(to(t,d,r,o,i),l=t.memoizedState),s!==r||f!==l||Mr.current||Ga?("function"==typeof c&&(ai(t,n,c,r),l=t.memoizedState),(s=Ga||si(t,n,s,r,f,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"==typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,s=t.memoizedProps,o.props=t.type===t.elementType?s:ri(t.type,s),l=o.context,"object"==typeof(u=n.contextType)&&null!==u?u=Ba(u):u=Dr(t,u=Ir(n)?Fr:Pr.current),(h="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==u)&&ui(t,o,r,u),Ga=!1,l=t.memoizedState,f=o.state=l,null!==(d=t.updateQueue)&&(to(t,d,r,o,i),f=t.memoizedState),s!==r||l!==f||Mr.current||Ga?("function"==typeof c&&(ai(t,n,c,r),f=t.memoizedState),(c=Ga||si(t,n,s,r,l,f,u))?(h||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,u)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=u,r=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return ka(e,t,n,r,a,i)}function ka(e,t,n,r,i,a){Ea(e,t);var o=0!=(64&t.effectTag);if(!r&&!o)return i&&Ur(t,n,!1),Fa(e,t,a);r=t.stateNode,ba.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=mi(t,e.child,null,a),t.child=mi(t,null,s,a)):Ta(e,t,s,a),t.memoizedState=r.state,i&&Ur(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Vr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Vr(0,t.context,!1),Ti(e,t.containerInfo)}function Ma(e,t,n){var r=t.mode,i=t.pendingProps,a=t.memoizedState;if(0==(64&t.effectTag)){a=null;var o=!1}else a={timedOutAt:null!==a?a.timedOutAt:0},o=!0,t.effectTag&=-65;if(null===e)if(o){var s=i.fallback;e=$r(null,r,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=$r(s,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=vi(t,null,i.children,n);else null!==e.memoizedState?(s=(r=e.child).sibling,o?(n=i.fallback,i=Yr(r,r.pendingProps),0==(1&t.mode)&&((o=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=o)),r=i.sibling=Yr(s,n,s.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=mi(t,r.child,i.children,n)):(s=e.child,o?(o=i.fallback,(i=$r(null,r,0,null)).child=s,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=$r(o,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=mi(t,s,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=a,t.child=n,r}function Fa(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&o("153"),null!==t.child){for(n=Yr(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Yr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Da(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Mr.current)wa=!0;else if(r<n){switch(wa=!1,t.tag){case 3:Pa(t),ya();break;case 5:xi(t);break;case 1:Ir(t.type)&&zr(t);break;case 4:Ti(t,t.stateNode.containerInfo);break;case 10:La(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Ma(e,t,n):null!==(t=Fa(e,t,n))?t.sibling:null}return Fa(e,t,n)}}else wa=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Dr(t,Pr.current);if(Ua(t,n),i=Qi(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,Ki(),Ir(r)){var a=!0;zr(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&ai(t,r,s,e),i.updater=oi,t.stateNode=i,i._reactInternalFiber=t,ci(t,r,e,n),t=ka(null,t,r,!0,a,n)}else t.tag=0,Ta(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),a=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"==typeof e)return Gr(e)?1:0;if(null!=e){if((e=e.$$typeof)===tt)return 11;if(e===rt)return 14}return 2}(e),a=ri(e,a),s=void 0,i){case 0:s=Aa(null,t,e,a,n);break;case 1:s=Ra(null,t,e,a,n);break;case 11:s=Sa(null,t,e,a,n);break;case 14:s=xa(null,t,e,ri(e.type,a),r,n);break;default:o("306",e,"")}return s;case 0:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 3:return Pa(t),null===(r=t.updateQueue)&&o("282"),i=null!==(i=t.memoizedState)?i.element:null,to(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(ya(),t=Fa(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(fa=xr(t.stateNode.containerInfo),ha=t,i=da=!0),i?(t.effectTag|=2,t.child=vi(t,null,r,n)):(Ta(e,t,r,n),ya()),t=t.child),t;case 5:return xi(t),null===e&&va(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,gr(r,i)?s=null:null!==a&&gr(r,a)&&(t.effectTag|=16),Ea(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ta(e,t,s,n),t=t.child),t;case 6:return null===e&&va(t),null;case 13:return Ma(e,t,n);case 4:return Ti(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=mi(t,null,r,n):Ta(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 7:return Ta(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ta(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,La(t,a=i.value),null!==s){var l=s.value;if(0===(a=Zt(l,a)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,a):1073741823))){if(s.children===i.children&&!Mr.current){t=Fa(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.contextDependencies;if(null!==u){s=l.child;for(var c=u.first;null!==c;){if(c.context===r&&0!=(c.observedBits&a)){1===l.tag&&((c=$a(n)).tag=qa,Ka(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),c=n;for(var h=l.return;null!==h;){var f=h.alternate;if(h.childExpirationTime<c)h.childExpirationTime=c,null!==f&&f.childExpirationTime<c&&(f.childExpirationTime=c);else{if(!(null!==f&&f.childExpirationTime<c))break;f.childExpirationTime=c}h=h.return}u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}Ta(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,Ua(t,n),r=r(i=Ba(i,a.unstable_observedBits)),t.effectTag|=1,Ta(e,t,r,n),t.child;case 14:return a=ri(i=t.type,t.pendingProps),xa(e,t,i,a=ri(i.type,a),r,n);case 15:return Ca(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ri(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Ir(r)?(e=!0,zr(t)):e=!1,Ua(t,n),li(t,r,i),ci(t,r,i,n),ka(null,t,r,!0,e,n)}o("156")}var Ia={current:null},Na=null,Oa=null,Va=null;function La(e,t){var n=e.type._context;Rr(Ia,n._currentValue),n._currentValue=t}function za(e){var t=Ia.current;Ar(Ia),e.type._context._currentValue=t}function Ua(e,t){Na=e,Va=Oa=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(wa=!0),e.contextDependencies=null}function Ba(e,t){return Va!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(Va=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Oa?(null===Na&&o("308"),Oa=t,Na.contextDependencies={first:t,expirationTime:0}):Oa=Oa.next=t),e._currentValue}var ja=0,Wa=1,qa=2,Ha=3,Ga=!1;function Ya(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xa(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function $a(e){return{expirationTime:e,tag:ja,payload:null,callback:null,next:null,nextEffect:null}}function Qa(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Ka(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Ya(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Ya(e.memoizedState),i=n.updateQueue=Ya(n.memoizedState)):r=e.updateQueue=Xa(i):null===i&&(i=n.updateQueue=Xa(r));null===i||r===i?Qa(r,t):null===r.lastUpdate||null===i.lastUpdate?(Qa(r,t),Qa(i,t)):(Qa(r,t),i.lastUpdate=t)}function Za(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Ya(e.memoizedState):Ja(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Ja(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Xa(t)),t}function eo(e,t,n,r,a,o){switch(n.tag){case Wa:return"function"==typeof(e=n.payload)?e.call(o,r,a):e;case Ha:e.effectTag=-2049&e.effectTag|64;case ja:if(null==(a="function"==typeof(e=n.payload)?e.call(o,r,a):e))break;return i({},r,a);case qa:Ga=!0}return r}function to(e,t,n,r,i){Ga=!1;for(var a=(t=Ja(e,t)).baseState,o=null,s=0,l=t.firstUpdate,u=a;null!==l;){var c=l.expirationTime;c<i?(null===o&&(o=l,a=u),s<c&&(s=c)):(u=eo(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(c=null,l=t.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<i?(null===c&&(c=l,null===o&&(a=u)),s<h&&(s=h)):(u=eo(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===o&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===o&&null===c&&(a=u),t.baseState=a,t.firstUpdate=o,t.firstCapturedUpdate=c,e.expirationTime=s,e.memoizedState=u}function no(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),ro(t.firstEffect,n),t.firstEffect=t.lastEffect=null,ro(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function ro(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&o("191",n),n.call(r)}e=e.nextEffect}}function io(e,t){return{value:e,source:t,stack:lt(t)}}function ao(e){e.effectTag|=4}var oo=void 0,so=void 0,lo=void 0,uo=void 0;oo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},so=function(){},lo=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var s=t.stateNode;switch(wi(gi.current),e=null,n){case"input":o=yt(s,o),r=yt(s,r),e=[];break;case"option":o=Yn(s,o),r=Yn(s,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=$n(s,o),r=$n(s,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(s.onclick=pr)}hr(n,r),s=n=void 0;var l=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var u=o[n];for(s in u)u.hasOwnProperty(s)&&(l||(l={}),l[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(y.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(u=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(l||(l={}),l[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(l||(l={}),l[s]=c[s])}else l||(e||(e=[]),e.push(n,l)),l=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(n,""+c)):"children"===n?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(y.hasOwnProperty(n)?(null!=c&&dr(a,n),e||u===c||(e=[])):(e=e||[]).push(n,c))}l&&(e=e||[]).push("style",l),a=e,(t.updateQueue=a)&&ao(t)}},uo=function(e,t,n,r){n!==r&&ao(t)};var co="function"==typeof WeakSet?WeakSet:Set;function ho(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=lt(n)),null!==n&&st(n.type),t=t.value,null!==e&&1===e.tag&&st(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function fo(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Xo(e,t)}else t.current=null}function po(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==Ei){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==Ei&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function mo(e){switch("function"==typeof jr&&jr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(e){Xo(i,e)}}n=n.next}while(n!==t)}break;case 1:if(fo(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Xo(e,t)}break;case 5:fo(e);break;case 4:go(e)}}function vo(e){return 5===e.tag||3===e.tag||4===e.tag}function _o(e){e:{for(var t=e.return;null!==t;){if(vo(t)){var n=t;break e}t=t.return}o("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:o("161")}16&n.effectTag&&(ar(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||vo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var a=t,s=i.stateNode,l=n;8===a.nodeType?a.parentNode.insertBefore(s,l):a.insertBefore(s,l)}else t.insertBefore(i.stateNode,n);else r?(s=t,l=i.stateNode,8===s.nodeType?(a=s.parentNode).insertBefore(l,s):(a=s).appendChild(l),null!=(s=s._reactRootContainer)||null!==a.onclick||(a.onclick=pr)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function go(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&o("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var a=t,s=a;;)if(mo(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(a=r,s=t.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,i=!0,t.child.return=t,t=t.child;continue}}else if(mo(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function yo(e,t){switch(t.tag){case 0:case 11:case 14:case 15:po(Ri,ki,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&function(e,t,n,r,i){e[I]=i,"input"===n&&"radio"===i.type&&null!=i.name&&wt(e,i),fr(n,r),r=fr(n,i);for(var a=0;a<t.length;a+=2){var o=t[a],s=t[a+1];"style"===o?ur(e,s):"dangerouslySetInnerHTML"===o?ir(e,s):"children"===o?ar(e,s):_t(e,o,s,r)}switch(n){case"input":Tt(e,i);break;case"textarea":Kn(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Xn(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Xn(e,!!i.multiple,i.defaultValue,!0):Xn(e,!!i.multiple,i.multiple?[]:"",!1))}}(n,a,i,e,r)}break;case 6:null===t.stateNode&&o("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=Ts())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=lr("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var s=t.stateNode;null===s&&(s=t.stateNode=new co),n.forEach(function(e){var n=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=$o(t=Ts(),e),null!==(e=Ko(e,t))&&(Jr(e,t),0!==(t=e.expirationTime)&&Ss(e,t))}.bind(null,t,e);s.has(e)||(s.add(e),e.then(n,n))})}break;case 17:break;default:o("163")}}var bo="function"==typeof WeakMap?WeakMap:Map;function wo(e,t,n){(n=$a(n)).tag=Ha,n.payload={element:null};var r=t.value;return n.callback=function(){Fs(r),ho(e,t)},n}function To(e,t,n){(n=$a(n)).tag=Ha;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Lo?Lo=new Set([this]):Lo.add(this));var n=t.value,i=t.stack;ho(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function So(e){switch(e.tag){case 1:Ir(e.type)&&Nr();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return Si(),Or(),0!=(64&(t=e.effectTag))&&o("285"),e.effectTag=-2049&t|64,e;case 5:return Ci(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return Si(),null;case 10:return za(e),null;default:return null}}var xo=qe.ReactCurrentDispatcher,Co=qe.ReactCurrentOwner,Eo=1073741822,Ao=!1,Ro=null,ko=null,Po=0,Mo=-1,Fo=!1,Do=null,Io=!1,No=null,Oo=null,Vo=null,Lo=null;function zo(){if(null!==Ro)for(var e=Ro.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!=n&&Nr();break;case 3:Si(),Or();break;case 5:Ci(t);break;case 4:Si();break;case 10:za(t)}e=e.return}ko=null,Po=0,Mo=-1,Fo=!1,Ro=null}function Uo(){for(;null!==Do;){var e=Do.effectTag;if(16&e&&ar(Do.stateNode,""),128&e){var t=Do.alternate;null!==t&&(null!==(t=t.ref)&&("function"==typeof t?t(null):t.current=null))}switch(14&e){case 2:_o(Do),Do.effectTag&=-3;break;case 6:_o(Do),Do.effectTag&=-3,yo(Do.alternate,Do);break;case 4:yo(Do.alternate,Do);break;case 8:go(e=Do),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Do=Do.nextEffect}}function Bo(){for(;null!==Do;){if(256&Do.effectTag)e:{var e=Do.alternate,t=Do;switch(t.tag){case 0:case 11:case 15:po(Ai,Ei,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ri(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:o("163")}}Do=Do.nextEffect}}function jo(e,t){for(;null!==Do;){var n=Do.effectTag;if(36&n){var r=Do.alternate,i=Do,a=t;switch(i.tag){case 0:case 11:case 15:po(Pi,Mi,i);break;case 1:var s=i.stateNode;if(4&i.effectTag)if(null===r)s.componentDidMount();else{var l=i.elementType===i.type?r.memoizedProps:ri(i.type,r.memoizedProps);s.componentDidUpdate(l,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&no(0,r,s);break;case 3:if(null!==(r=i.updateQueue)){if(s=null,null!==i.child)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}no(0,r,s)}break;case 5:a=i.stateNode,null===r&&4&i.effectTag&&_r(i.type,i.memoizedProps)&&a.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:o("163")}}128&n&&(null!==(i=Do.ref)&&(a=Do.stateNode,"function"==typeof i?i(a):i.current=a)),512&n&&(No=e),Do=Do.nextEffect}}function Wo(){null!==Oo&&Tr(Oo),null!==Vo&&Vo()}function qo(e,t){Io=Ao=!0,e.current===t&&o("177");var n=e.pendingCommitExpirationTime;0===n&&o("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,i=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?Jr(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Jr(e,t)):t>n&&Jr(e,t)}ni(0,e)}(e,i>r?i:r),Co.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,mr=xn,vr=function(){var e=On();if(Vn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var a=0,o=-1,s=-1,l=0,u=0,c=e,h=null;t:for(;;){for(var f;c!==t||0!==r&&3!==c.nodeType||(o=a+r),c!==i||0!==n&&3!==c.nodeType||(s=a+n),3===c.nodeType&&(a+=c.nodeValue.length),null!==(f=c.firstChild);)h=c,c=f;for(;;){if(c===e)break t;if(h===t&&++l===r&&(o=a),h===i&&++u===n&&(s=a),null!==(f=c.nextSibling))break;h=(c=h).parentNode}c=f}t=-1===o||-1===s?null:{start:o,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),xn=!1,Do=r;null!==Do;){i=!1;var s=void 0;try{Bo()}catch(e){i=!0,s=e}i&&(null===Do&&o("178"),Xo(Do,s),null!==Do&&(Do=Do.nextEffect))}for(Do=r;null!==Do;){i=!1,s=void 0;try{Uo()}catch(e){i=!0,s=e}i&&(null===Do&&o("178"),Xo(Do,s),null!==Do&&(Do=Do.nextEffect))}for(Ln(vr),vr=null,xn=!!mr,mr=null,e.current=t,Do=r;null!==Do;){i=!1,s=void 0;try{jo(e,n)}catch(e){i=!0,s=e}i&&(null===Do&&o("178"),Xo(Do,s),null!==Do&&(Do=Do.nextEffect))}if(null!==r&&null!==No){var l=function(e,t){Vo=Oo=No=null;var n=is;is=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var a=t;po(Di,Ei,a),po(Ei,Fi,a)}catch(e){r=!0,i=e}r&&Xo(t,i)}t=t.nextEffect}while(null!==t);is=n,0!==(n=e.expirationTime)&&Ss(e,n),cs||is||Rs(1073741823,!1)}.bind(null,e,r);Oo=a.unstable_runWithPriority(a.unstable_NormalPriority,function(){return wr(l)}),Vo=l}Ao=Io=!1,"function"==typeof Br&&Br(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(Lo=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Ho(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){Ro=e;e:{var a=t,s=Po,l=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Ir(t.type)&&Nr();break;case 3:Si(),Or(),(l=t.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==a&&null!==a.child||(ga(t),t.effectTag&=-3),so(t);break;case 5:Ci(t);var u=wi(bi.current);if(s=t.type,null!==a&&null!=t.stateNode)lo(a,t,s,l,u),a.ref!==t.ref&&(t.effectTag|=128);else if(l){var c=wi(gi.current);if(ga(t)){a=(l=t).stateNode;var h=l.type,f=l.memoizedProps,d=u;switch(a[D]=l,a[I]=f,s=void 0,u=h){case"iframe":case"object":Cn("load",a);break;case"video":case"audio":for(h=0;h<te.length;h++)Cn(te[h],a);break;case"source":Cn("error",a);break;case"img":case"image":case"link":Cn("error",a),Cn("load",a);break;case"form":Cn("reset",a),Cn("submit",a);break;case"details":Cn("toggle",a);break;case"input":bt(a,f),Cn("invalid",a),dr(d,"onChange");break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Cn("invalid",a),dr(d,"onChange");break;case"textarea":Qn(a,f),Cn("invalid",a),dr(d,"onChange")}for(s in hr(u,f),h=null,f)f.hasOwnProperty(s)&&(c=f[s],"children"===s?"string"==typeof c?a.textContent!==c&&(h=["children",c]):"number"==typeof c&&a.textContent!==""+c&&(h=["children",""+c]):y.hasOwnProperty(s)&&null!=c&&dr(d,s));switch(u){case"input":je(a),St(a,f,!0);break;case"textarea":je(a),Zn(a);break;case"select":case"option":break;default:"function"==typeof f.onClick&&(a.onclick=pr)}s=h,l.updateQueue=s,(l=null!==s)&&ao(t)}else{f=t,d=s,a=l,h=9===u.nodeType?u:u.ownerDocument,c===Jn.html&&(c=er(d)),c===Jn.html?"script"===d?((a=h.createElement("div")).innerHTML="<script><\/script>",h=a.removeChild(a.firstChild)):"string"==typeof a.is?h=h.createElement(d,{is:a.is}):(h=h.createElement(d),"select"===d&&(d=h,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):h=h.createElementNS(c,d),(a=h)[D]=f,a[I]=l,oo(a,t,!1,!1),d=a;var p=u,m=fr(h=s,f=l);switch(h){case"iframe":case"object":Cn("load",d),u=f;break;case"video":case"audio":for(u=0;u<te.length;u++)Cn(te[u],d);u=f;break;case"source":Cn("error",d),u=f;break;case"img":case"image":case"link":Cn("error",d),Cn("load",d),u=f;break;case"form":Cn("reset",d),Cn("submit",d),u=f;break;case"details":Cn("toggle",d),u=f;break;case"input":bt(d,f),u=yt(d,f),Cn("invalid",d),dr(p,"onChange");break;case"option":u=Yn(d,f);break;case"select":d._wrapperState={wasMultiple:!!f.multiple},u=i({},f,{value:void 0}),Cn("invalid",d),dr(p,"onChange");break;case"textarea":Qn(d,f),u=$n(d,f),Cn("invalid",d),dr(p,"onChange");break;default:u=f}hr(h,u),c=void 0;var v=h,_=d,g=u;for(c in g)if(g.hasOwnProperty(c)){var b=g[c];"style"===c?ur(_,b):"dangerouslySetInnerHTML"===c?null!=(b=b?b.__html:void 0)&&ir(_,b):"children"===c?"string"==typeof b?("textarea"!==v||""!==b)&&ar(_,b):"number"==typeof b&&ar(_,""+b):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(y.hasOwnProperty(c)?null!=b&&dr(p,c):null!=b&&_t(_,c,b,m))}switch(h){case"input":je(d),St(d,f,!1);break;case"textarea":je(d),Zn(d);break;case"option":null!=f.value&&d.setAttribute("value",""+gt(f.value));break;case"select":(u=d).multiple=!!f.multiple,null!=(d=f.value)?Xn(u,!!f.multiple,d,!1):null!=f.defaultValue&&Xn(u,!!f.multiple,f.defaultValue,!0);break;default:"function"==typeof u.onClick&&(d.onclick=pr)}(l=_r(s,l))&&ao(t),t.stateNode=a}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&o("166");break;case 6:a&&null!=t.stateNode?uo(a,t,a.memoizedProps,l):("string"!=typeof l&&(null===t.stateNode&&o("166")),a=wi(bi.current),wi(gi.current),ga(t)?(s=(l=t).stateNode,a=l.memoizedProps,s[D]=l,(l=s.nodeValue!==a)&&ao(t)):(s=t,(l=(9===a.nodeType?a:a.ownerDocument).createTextNode(l))[D]=t,s.stateNode=l));break;case 11:break;case 13:if(l=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=s,Ro=t;break e}l=null!==l,s=null!==a&&null!==a.memoizedState,null!==a&&!l&&s&&(null!==(a=a.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=a,a.nextEffect=u):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),(l||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Si(),so(t);break;case 10:za(t);break;case 9:case 14:break;case 17:Ir(t.type)&&Nr();break;case 18:break;default:o("156")}Ro=null}if(t=e,1===Po||1!==t.childExpirationTime){for(l=0,s=t.child;null!==s;)(a=s.expirationTime)>l&&(l=a),(u=s.childExpirationTime)>l&&(l=u),s=s.sibling;t.childExpirationTime=l}if(null!==Ro)return Ro;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=So(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Go(e){var t=Da(e.alternate,e,Po);return e.memoizedProps=e.pendingProps,null===t&&(t=Ho(e)),Co.current=null,t}function Yo(e,t){Ao&&o("243"),Wo(),Ao=!0;var n=xo.current;xo.current=la;var r=e.nextExpirationTimeToWorkOn;r===Po&&e===ko&&null!==Ro||(zo(),Po=r,Ro=Yr((ko=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==Ro&&!Es();)Ro=Go(Ro);else for(;null!==Ro;)Ro=Go(Ro)}catch(t){if(Va=Oa=Na=null,Ki(),null===Ro)i=!0,Fs(t);else{null===Ro&&o("271");var a=Ro,s=a.return;if(null!==s){e:{var l=e,u=s,c=a,h=t;if(s=Po,c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==h&&"object"==typeof h&&"function"==typeof h.then){var f=h;h=u;var d=-1,p=-1;do{if(13===h.tag){var m=h.alternate;if(null!==m&&null!==(m=m.memoizedState)){p=10*(1073741822-m.timedOutAt);break}"number"==typeof(m=h.pendingProps.maxDuration)&&(0>=m?d=0:(-1===d||m<d)&&(d=m))}h=h.return}while(null!==h);h=u;do{if((m=13===h.tag)&&(m=void 0!==h.memoizedProps.fallback&&null===h.memoizedState),m){if(null===(u=h.updateQueue)?((u=new Set).add(f),h.updateQueue=u):u.add(f),0==(1&h.mode)){h.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:((s=$a(1073741823)).tag=qa,Ka(c,s))),c.expirationTime=1073741823;break e}u=s;var v=(c=l).pingCache;null===v?(v=c.pingCache=new bo,m=new Set,v.set(f,m)):void 0===(m=v.get(f))&&(m=new Set,v.set(f,m)),m.has(u)||(m.add(u),c=Qo.bind(null,c,f,u),f.then(c,c)),-1===d?l=1073741823:(-1===p&&(p=10*(1073741822-ti(l,s))-5e3),l=p+d),0<=l&&Mo<l&&(Mo=l),h.effectTag|=2048,h.expirationTime=s;break e}h=h.return}while(null!==h);h=Error((st(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+lt(c))}Fo=!0,h=io(h,c),l=u;do{switch(l.tag){case 3:l.effectTag|=2048,l.expirationTime=s,Za(l,s=wo(l,h,s));break e;case 1:if(d=h,p=l.type,c=l.stateNode,0==(64&l.effectTag)&&("function"==typeof p.getDerivedStateFromError||null!==c&&"function"==typeof c.componentDidCatch&&(null===Lo||!Lo.has(c)))){l.effectTag|=2048,l.expirationTime=s,Za(l,s=To(l,d,s));break e}}l=l.return}while(null!==l)}Ro=Ho(a);continue}i=!0,Fs(t)}}break}if(Ao=!1,xo.current=n,Va=Oa=Na=null,Ki(),i)ko=null,e.finishedWork=null;else if(null!==Ro)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&o("281"),ko=null,Fo){if(i=e.latestPendingTime,a=e.latestSuspendedTime,s=e.latestPingedTime,0!==i&&i<r||0!==a&&a<r||0!==s&&s<r)return ei(e,r),void ws(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void ws(e,n,r,t,-1)}t&&-1!==Mo?(ei(e,r),(t=10*(1073741822-ti(e,r)))<Mo&&(Mo=t),t=10*(1073741822-Ts()),t=Mo-t,ws(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Xo(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Lo||!Lo.has(r)))return Ka(n,e=To(n,e=io(t,e),1073741823)),void Zo(n,1073741823);break;case 3:return Ka(n,e=wo(n,e=io(t,e),1073741823)),void Zo(n,1073741823)}n=n.return}3===e.tag&&(Ka(e,n=wo(e,n=io(t,e),1073741823)),Zo(e,1073741823))}function $o(e,t){var n=a.unstable_getCurrentPriorityLevel(),r=void 0;if(0==(1&t.mode))r=1073741823;else if(Ao&&!Io)r=Po;else{switch(n){case a.unstable_ImmediatePriority:r=1073741823;break;case a.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case a.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case a.unstable_LowPriority:case a.unstable_IdlePriority:r=1;break;default:o("313")}null!==ko&&r===Po&&--r}return n===a.unstable_UserBlockingPriority&&(0===ss||r<ss)&&(ss=r),r}function Qo(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==ko&&Po===n?ko=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),ni(n,e),0!==(n=e.expirationTime)&&Ss(e,n)))}function Ko(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Zo(e,t){null!==(e=Ko(e,t))&&(!Ao&&0!==Po&&t>Po&&zo(),Jr(e,t),Ao&&!Io&&ko===e||Ss(e,e.expirationTime),_s>vs&&(_s=0,o("185")))}function Jo(e,t,n,r,i){return a.unstable_runWithPriority(a.unstable_ImmediatePriority,function(){return e(t,n,r,i)})}var es=null,ts=null,ns=0,rs=void 0,is=!1,as=null,os=0,ss=0,ls=!1,us=null,cs=!1,hs=!1,fs=null,ds=a.unstable_now(),ps=1073741822-(ds/10|0),ms=ps,vs=50,_s=0,gs=null;function ys(){ps=1073741822-((a.unstable_now()-ds)/10|0)}function bs(e,t){if(0!==ns){if(t<ns)return;null!==rs&&a.unstable_cancelCallback(rs)}ns=t,e=a.unstable_now()-ds,rs=a.unstable_scheduleCallback(As,{timeout:10*(1073741822-t)-e})}function ws(e,t,n,r,i){e.expirationTime=r,0!==i||Es()?0<i&&(e.timeoutHandle=yr(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,ys(),ms=ps,ks(e,n)}.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function Ts(){return is?ms:(xs(),0!==os&&1!==os||(ys(),ms=ps),ms)}function Ss(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===ts?(es=ts=e,e.nextScheduledRoot=e):(ts=ts.nextScheduledRoot=e).nextScheduledRoot=es):t>e.expirationTime&&(e.expirationTime=t),is||(cs?hs&&(as=e,os=1073741823,Ps(e,1073741823,!1)):1073741823===t?Rs(1073741823,!1):bs(e,t))}function xs(){var e=0,t=null;if(null!==ts)for(var n=ts,r=es;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===ts)&&o("244"),r===r.nextScheduledRoot){es=ts=r.nextScheduledRoot=null;break}if(r===es)es=i=r.nextScheduledRoot,ts.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===ts){(ts=n).nextScheduledRoot=es,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===ts)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}as=t,os=e}var Cs=!1;function Es(){return!!Cs||!!a.unstable_shouldYield()&&(Cs=!0)}function As(){try{if(!Es()&&null!==es){ys();var e=es;do{var t=e.expirationTime;0!==t&&ps<=t&&(e.nextExpirationTimeToWorkOn=ps),e=e.nextScheduledRoot}while(e!==es)}Rs(0,!0)}finally{Cs=!1}}function Rs(e,t){if(xs(),t)for(ys(),ms=ps;null!==as&&0!==os&&e<=os&&!(Cs&&ps>os);)Ps(as,os,ps>os),xs(),ys(),ms=ps;else for(;null!==as&&0!==os&&e<=os;)Ps(as,os,!1),xs();if(t&&(ns=0,rs=null),0!==os&&bs(as,os),_s=0,gs=null,null!==fs)for(e=fs,fs=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){ls||(ls=!0,us=e)}}if(ls)throw e=us,us=null,ls=!1,e}function ks(e,t){is&&o("253"),as=e,os=t,Ps(e,t,!1),Rs(1073741823,!1)}function Ps(e,t,n){if(is&&o("245"),is=!0,n){var r=e.finishedWork;null!==r?Ms(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,br(r)),Yo(e,n),null!==(r=e.finishedWork)&&(Es()?e.finishedWork=r:Ms(e,r,t)))}else null!==(r=e.finishedWork)?Ms(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,br(r)),Yo(e,n),null!==(r=e.finishedWork)&&Ms(e,r,t));is=!1}function Ms(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===fs?fs=[r]:fs.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===gs?_s++:(gs=e,_s=0),a.unstable_runWithPriority(a.unstable_ImmediatePriority,function(){qo(e,t)})}function Fs(e){null===as&&o("246"),as.expirationTime=0,ls||(ls=!0,us=e)}function Ds(e,t){var n=cs;cs=!0;try{return e(t)}finally{(cs=n)||is||Rs(1073741823,!1)}}function Is(e,t){if(cs&&!hs){hs=!0;try{return e(t)}finally{hs=!1}}return e(t)}function Ns(e,t,n){cs||is||0===ss||(Rs(ss,!1),ss=0);var r=cs;cs=!0;try{return a.unstable_runWithPriority(a.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(cs=r)||is||Rs(1073741823,!1)}}function Os(e,t,n,r,i){var a=t.current;e:if(n){t:{2===tn(n=n._reactInternalFiber)&&1===n.tag||o("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Ir(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);o("171"),s=void 0}if(1===n.tag){var l=n.type;if(Ir(l)){n=Lr(n,l,s);break e}}n=s}else n=kr;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=$a(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Wo(),Ka(a,i),Zo(a,r),r}function Vs(e,t,n,r){var i=t.current;return Os(e,t,n,i=$o(Ts(),i),r)}function Ls(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function zs(e){var t=1073741822-25*(1+((1073741822-Ts()+500)/25|0));t>=Eo&&(t=Eo-1),this._expirationTime=Eo=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Us(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Bs(e,t,n){e={current:t=Hr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function js(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ws(e,t,n,r,i){var a=n._reactRootContainer;if(a){if("function"==typeof i){var o=i;i=function(){var e=Ls(a._internalRoot);o.call(e)}}null!=e?a.legacy_renderSubtreeIntoContainer(e,t,i):a.render(t,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Bs(e,!1,t)}(n,r),"function"==typeof i){var s=i;i=function(){var e=Ls(a._internalRoot);s.call(e)}}Is(function(){null!=e?a.legacy_renderSubtreeIntoContainer(e,t,i):a.render(t,i)})}return Ls(a._internalRoot)}function qs(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return js(t)||o("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Xe,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ee=function(e,t,n){switch(t){case"input":if(Tt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=L(r);i||o("90"),We(r),Tt(r,i)}}}break;case"textarea":Kn(e,n);break;case"select":null!=(t=n.value)&&Xn(e,!!n.multiple,t,!1)}},zs.prototype.render=function(e){this._defer||o("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Us;return Os(e,t,null,n,r._onCommit),r},zs.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},zs.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||o("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&o("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,ks(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},zs.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Us.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Us.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&o("191",n),n()}}},Bs.prototype.render=function(e,t){var n=this._internalRoot,r=new Us;return null!==(t=void 0===t?null:t)&&r.then(t),Vs(e,n,null,r._onCommit),r},Bs.prototype.unmount=function(e){var t=this._internalRoot,n=new Us;return null!==(e=void 0===e?null:e)&&n.then(e),Vs(null,t,null,n._onCommit),n},Bs.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Us;return null!==(n=void 0===n?null:n)&&i.then(n),Vs(t,r,e,i._onCommit),i},Bs.prototype.createBatch=function(){var e=new zs(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Fe=Ds,De=Ns,Ie=function(){is||0===ss||(Rs(ss,!1),ss=0)};var Hs={createPortal:qs,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?o("188"):o("268",Object.keys(e))),e=null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return js(t)||o("200"),Ws(null,e,t,!0,n)},render:function(e,t,n){return js(t)||o("200"),Ws(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return js(n)||o("200"),(null==e||void 0===e._reactInternalFiber)&&o("38"),Ws(e,t,n,!1,r)},unmountComponentAtNode:function(e){return js(e)||o("40"),!!e._reactRootContainer&&(Is(function(){Ws(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return qs.apply(void 0,arguments)},unstable_batchedUpdates:Ds,unstable_interactiveUpdates:Ns,flushSync:function(e,t){is&&o("187");var n=cs;cs=!0;try{return Jo(e,t)}finally{cs=n,Rs(1073741823,!1)}},unstable_createRoot:function(e,t){return js(e)||o("299","unstable_createRoot"),new Bs(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=cs;cs=!0;try{Jo(e)}finally{(cs=t)||is||Rs(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[O,V,L,k.injectEventPluginsByName,g,q,function(e){E(e,W)},Pe,Me,Rn,M]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Br=Wr(function(e){return t.onCommitFiberRoot(n,e)}),jr=Wr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}})(i({},e,{overrideProps:null,currentDispatcherRef:qe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:N,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var Gs={default:Hs},Ys=Gs&&Hs||Gs;e.exports=Ys.default||Ys},function(e,t,n){"use strict";e.exports=n(10)},function(e,t,n){"use strict";(function(e){
/** @license React v0.13.6
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,i=3,a=-1,o=-1,s=!1,l=!1;function u(){if(!s){var e=n.expirationTime;l?S():l=!0,T(f,e)}}function c(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var a=i,s=o;i=e,o=t;try{var l=r()}finally{i=a,o=s}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=l.next=l.previous=l;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=l,u()),(t=r.previous).next=r.previous=l,l.next=r,l.previous=t}}function h(){if(-1===a&&null!==n&&1===n.priorityLevel){s=!0;try{do{c()}while(null!==n&&1===n.priorityLevel)}finally{s=!1,null!==n?u():l=!1}}}function f(e){s=!0;var i=r;r=e;try{if(e)for(;null!==n;){var a=t.unstable_now();if(!(n.expirationTime<=a))break;do{c()}while(null!==n&&n.expirationTime<=a)}else if(null!==n)do{c()}while(null!==n&&!x())}finally{s=!1,r=i,null!==n?u():l=!1,h()}}var d,p,m=Date,v="function"==typeof setTimeout?setTimeout:void 0,_="function"==typeof clearTimeout?clearTimeout:void 0,g="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,y="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function b(e){d=g(function(t){_(p),e(t)}),p=v(function(){y(d),e(t.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var w=performance;t.unstable_now=function(){return w.now()}}else t.unstable_now=function(){return m.now()};var T,S,x,C=null;if("undefined"!=typeof window?C=window:void 0!==e&&(C=e),C&&C._schedMock){var E=C._schedMock;T=E[0],S=E[1],x=E[2],t.unstable_now=E[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var A=null,R=function(e){if(null!==A)try{A(e)}finally{A=null}};T=function(e){null!==A?setTimeout(T,0,e):(A=e,setTimeout(R,0,!1))},S=function(){A=null},x=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof g&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var k=null,P=!1,M=-1,F=!1,D=!1,I=0,N=33,O=33;x=function(){return I<=t.unstable_now()};var V=new MessageChannel,L=V.port2;V.port1.onmessage=function(){P=!1;var e=k,n=M;k=null,M=-1;var r=t.unstable_now(),i=!1;if(0>=I-r){if(!(-1!==n&&n<=r))return F||(F=!0,b(z)),k=e,void(M=n);i=!0}if(null!==e){D=!0;try{e(i)}finally{D=!1}}};var z=function(e){if(null!==k){b(z);var t=e-I+O;t<O&&N<O?(8>t&&(t=8),O=t<N?N:t):N=t,I=e+O,P||(P=!0,L.postMessage(void 0))}else F=!1};T=function(e,t){k=e,M=t,D||0>t?L.postMessage(void 0):F||(F=!0,b(z))},S=function(){k=null,P=!1,M=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=i,o=a;i=e,a=t.unstable_now();try{return n()}finally{i=r,a=o,h()}},t.unstable_next=function(e){switch(i){case 1:case 2:case 3:var n=3;break;default:n=i}var r=i,o=a;i=n,a=t.unstable_now();try{return e()}finally{i=r,a=o,h()}},t.unstable_scheduleCallback=function(e,r){var o=-1!==a?a:t.unstable_now();if("object"==typeof r&&null!==r&&"number"==typeof r.timeout)r=o+r.timeout;else switch(i){case 1:r=o+-1;break;case 2:r=o+250;break;case 5:r=o+1073741823;break;case 4:r=o+1e4;break;default:r=o+5e3}if(e={callback:e,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,u();else{o=null;var s=n;do{if(s.expirationTime>r){o=s;break}s=s.next}while(s!==n);null===o?o=n:o===n&&(n=e,u()),(r=o.previous).next=o.previous=e,e.next=o,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=i;return function(){var r=i,o=a;i=n,a=t.unstable_now();try{return e.apply(this,arguments)}finally{i=r,a=o,h()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<o||x())},t.unstable_continueExecution=function(){null!==n&&u()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(11))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(3),o=n.n(a),s=n(1),l=n.n(s);var u=function(e){var t=e.text;return i.a.createElement("div",{className:"loading-container"},i.a.createElement("span",{className:"loading-text"},t),i.a.createElement("div",{className:"loading"},i.a.createElement("div",null,i.a.createElement("span",null),i.a.createElement("span",null),i.a.createElement("span",null),i.a.createElement("span",null))))},c=n(4),h=n.n(c),f=n(5),d=n.n(f),p=n(6),m=n.n(p);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=g(t).call(this,e))||"object"!==v(a)&&"function"!=typeof a?y(r):a).visualizer=i.a.createRef(),n.state={structureReady:!0,pdbIds:null,filteredPdbIds:null,selectedId:0,viewerMode:"cartoon",error:null,searchedId:"",hoveredId:null},n.initVisualizer=n.initVisualizer.bind(y(n)),n.handleSearch=n.handleSearch.bind(y(n)),n.fetchTitle=n.fetchTitle.bind(y(n)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.entity,r=n.value,i=n.class,a=t.serviceUrl;if(!t.testing){this.setState({structureReady:!1});var o=function(t){d()(t).then(function(t){e.setState({pdbIds:t,filteredPdbIds:t}),e.initVisualizer(t),e.fetchTitle(t[0])}).catch(function(t){t="string"==typeof t?t:"Could not download PDB file, please try again later!",e.setState({error:t})})};"Protein"===i?m()(r,a).then(function(e){o(e.primaryAccession)}):h()(r,a).then(function(e){var t=e.proteins;o(t[0].primaryAccession)}).catch(function(t){return e.setState({error:t})})}}},{key:"initVisualizer",value:function(e,t){var n=this;e||(e=this.state.pdbIds),t||(t=this.state.selectedId),l.a.io.fetchPdb("https://files.rcsb.org/download/".concat(e[t],".pdb"),function(e){n.setState({structureReady:!0},function(){n.visualizer.current.innerHTML="";var t=l.a.Viewer(n.visualizer.current,{quality:"medium",antialias:!0,outline:!1,slabMode:"auto"}),r=t.renderAs("structure",e,n.state.viewerMode,{color:l.a.color.ssSuccession(),showRelated:"1"}),i=l.a.viewpoint.principalAxes(r);t.setRotation(i),t.autoZoom()})})}},{key:"updateSelected",value:function(e){this.setState({selectedId:e,focusedIdTitle:"",detailsLoading:!0});var t=this.state.filteredPdbIds[e];this.fetchTitle(t),this.visualizer.current.innerHTML="",this.setState({structureReady:!1}),this.initVisualizer(null,e)}},{key:"fetchTitle",value:function(e){var t=this;fetch("https://www.rcsb.org/pdb/json/describePDB?structureId=".concat(e)).then(function(e){return e.json()}).then(function(e){return t.setState({detailsLoading:!1,focusedIdTitle:e[0].title})})}},{key:"changeMode",value:function(e){var t=this;this.setState({viewerMode:e.target.value},function(){t.visualizer.current.innerHTML="",t.setState({structureReady:!1}),t.initVisualizer()})}},{key:"handleSearch",value:function(e){var t=this,n=e.target.value;this.setState({filteredPdbIds:this.state.pdbIds.filter(function(e){return-1!==e.toLowerCase().indexOf(n.toLowerCase())})},function(){return t.fetchTitle(t.state.filteredPdbIds[0])})}},{key:"render",value:function(){var e=this,t=this.state.filteredPdbIds&&this.state.filteredPdbIds.map(function(t,n){return i.a.createElement("div",{key:n},i.a.createElement("div",{className:"option ".concat(e.state.selectedId==n&&"selected"),onClick:function(){return e.updateSelected(n)}},t),e.state.selectedId===n&&i.a.createElement("div",{className:"details-panel"},e.state.detailsLoading?i.a.createElement(u,null):i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,e.state.focusedIdTitle),i.a.createElement("a",{href:"https://www.rcsb.org/structure/".concat(t),rel:"noopener noreferrer",target:"_blank",className:"title-text"},"open RCSB page"))))}),n=["sline","lines","trace","lineTrace","cartoon","tube","spheres"].map(function(e){return i.a.createElement("option",{key:e,value:e},e)});return this.state.error?i.a.createElement("div",{className:"viz-container error"},this.state.error):t?i.a.createElement("div",{className:"rootContainer"},this.state.structureReady?i.a.createElement("div",{className:"viz-container",ref:this.visualizer}):i.a.createElement("div",{className:"viz-container"},i.a.createElement(u,{text:"Initialising Visualizer..."})),i.a.createElement("div",{className:"select-box"},i.a.createElement("span",{className:"heading"},"Select Viewer Mode"),i.a.createElement("select",{placeholder:"Select viewer mode",className:"viewer-select",onChange:this.changeMode.bind(this)},n),i.a.createElement("input",{className:"heading",placeholder:"Search and Select a PDB ID",onChange:this.handleSearch}),i.a.createElement("div",{style:{maxHeight:300,overflow:"scroll"}},t.length?t:"No search results!"))):i.a.createElement("div",{className:"rootContainer"},i.a.createElement(u,{text:"Fetching associated PDB ids"}))}}])&&_(n.prototype,r),a&&_(n,a),t}();function T(e,t,n,r,a){if(r||(r={}),!(e&&t&&n&&r&&a))throw new Error("Call main with correct signature");o.a.render(i.a.createElement(w,{serviceUrl:t.root,entity:n,config:a,testing:r.testing}),e)}n.d(t,"main",function(){return T})}]);